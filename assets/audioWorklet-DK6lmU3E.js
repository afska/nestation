(function(){"use strict";function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u=i;function i(t,e){this._elements=new Array(t||50),this._first=0,this._last=0,this._size=0,this._evictedCb=e}i.prototype.capacity=function(){return this._elements.length},i.prototype.isEmpty=function(){return this.size()===0},i.prototype.isFull=function(){return this.size()===this.capacity()},i.prototype.peek=function(){if(this.isEmpty())throw new Error("RingBuffer is empty");return this._elements[this._first]},i.prototype.peekN=function(t){if(t>this._size)throw new Error("Not enough elements in RingBuffer");var e=Math.min(this._first+t,this.capacity()),r=this._elements.slice(this._first,e);if(e<this.capacity())return r;var n=this._elements.slice(0,t-r.length);return r.concat(n)},i.prototype.deq=function(){var t=this.peek();return this._size--,this._first=(this._first+1)%this.capacity(),t},i.prototype.deqN=function(t){var e=this.peekN(t);return this._size-=t,this._first=(this._first+t)%this.capacity(),e},i.prototype.enq=function(t){this._end=(this._first+this.size())%this.capacity();var e=this.isFull();return e&&this._evictedCb&&this._evictedCb(this._elements[this._end]),this._elements[this._end]=t,e?this._first=(this._first+1)%this.capacity():this._size++,this.size()},i.prototype.size=function(){return this._size};var p=c(u);const h=8192;class a extends AudioWorkletProcessor{constructor(){super(),this.buffer=new p(h),this.port.onmessage=e=>{this.buffer.size()>=h&&this.buffer.deqN(h),this.buffer.enq(e.data)}}process(e,r){const n=r[0][0],o=n.length;try{const f=this.buffer.deqN(o);for(let s=0;s<o;s++)n[s]=f[s]}catch{for(let s=0;s<o;s++)n[s]=0}return!0}}registerProcessor("player-worklet",a)})();
