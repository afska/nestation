var IT=Object.defineProperty;var kT=(e,t,n)=>t in e?IT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Oe=(e,t,n)=>(kT(e,typeof t!="symbol"?t+"":t,n),n);var Ts=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};function bT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vf(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var yg={exports:{}},lo={},xg={exports:{}},De={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Cd=Object.getOwnPropertySymbols,DT=Object.prototype.hasOwnProperty,NT=Object.prototype.propertyIsEnumerable;function OT(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function PT(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(a){o[a]=a}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var vg=PT()?Object.assign:function(e,t){for(var n,r=OT(e),o,a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var u in n)DT.call(n,u)&&(r[u]=n[u]);if(Cd){o=Cd(n);for(var c=0;c<o.length;c++)NT.call(n,o[c])&&(r[o[c]]=n[o[c]])}}return r};/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf=vg,Dn=typeof Symbol=="function"&&Symbol.for,uo=Dn?Symbol.for("react.element"):60103,FT=Dn?Symbol.for("react.portal"):60106,MT=Dn?Symbol.for("react.fragment"):60107,LT=Dn?Symbol.for("react.strict_mode"):60108,BT=Dn?Symbol.for("react.profiler"):60114,UT=Dn?Symbol.for("react.provider"):60109,GT=Dn?Symbol.for("react.context"):60110,VT=Dn?Symbol.for("react.forward_ref"):60112,WT=Dn?Symbol.for("react.suspense"):60113,$T=Dn?Symbol.for("react.memo"):60115,zT=Dn?Symbol.for("react.lazy"):60116,Ed=typeof Symbol=="function"&&Symbol.iterator;function co(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rg={};function as(e,t,n){this.props=e,this.context=t,this.refs=Rg,this.updater=n||Sg}as.prototype.isReactComponent={};as.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(co(85));this.updater.enqueueSetState(this,e,t,"setState")};as.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cg(){}Cg.prototype=as.prototype;function $f(e,t,n){this.props=e,this.context=t,this.refs=Rg,this.updater=n||Sg}var zf=$f.prototype=new Cg;zf.constructor=$f;Wf(zf,as.prototype);zf.isPureReactComponent=!0;var qf={current:null},Eg=Object.prototype.hasOwnProperty,Tg={key:!0,ref:!0,__self:!0,__source:!0};function Ag(e,t,n){var r,o={},a=null,u=null;if(t!=null)for(r in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(a=""+t.key),t)Eg.call(t,r)&&!Tg.hasOwnProperty(r)&&(o[r]=t[r]);var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){for(var m=Array(c),_=0;_<c;_++)m[_]=arguments[_+2];o.children=m}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)o[r]===void 0&&(o[r]=c[r]);return{$$typeof:uo,type:e,key:a,ref:u,props:o,_owner:qf.current}}function qT(e,t){return{$$typeof:uo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jf(e){return typeof e=="object"&&e!==null&&e.$$typeof===uo}function jT(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(n){return t[n]})}var wg=/\/+/g,Ga=[];function Ig(e,t,n,r){if(Ga.length){var o=Ga.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function kg(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>Ga.length&&Ga.push(e)}function Pc(e,t,n,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case uo:case FT:a=!0}}if(a)return n(r,e,t===""?"."+Hu(e,0):t),1;if(a=0,t=t===""?".":t+":",Array.isArray(e))for(var u=0;u<e.length;u++){o=e[u];var c=t+Hu(o,u);a+=Pc(o,c,n,r)}else if(e===null||typeof e!="object"?c=null:(c=Ed&&e[Ed]||e["@@iterator"],c=typeof c=="function"?c:null),typeof c=="function")for(e=c.call(e),u=0;!(o=e.next()).done;)o=o.value,c=t+Hu(o,u++),a+=Pc(o,c,n,r);else if(o==="object")throw n=""+e,Error(co(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function Fc(e,t,n){return e==null?0:Pc(e,"",t,n)}function Hu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jT(e.key):t.toString(36)}function HT(e,t){e.func.call(e.context,t,e.count++)}function XT(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Mc(e,r,n,function(a){return a}):e!=null&&(jf(e)&&(e=qT(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(wg,"$&/")+"/")+n)),r.push(e))}function Mc(e,t,n,r,o){var a="";n!=null&&(a=(""+n).replace(wg,"$&/")+"/"),t=Ig(t,a,r,o),Fc(e,XT,t),kg(t)}var bg={current:null};function hr(){var e=bg.current;if(e===null)throw Error(co(321));return e}var YT={ReactCurrentDispatcher:bg,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:qf,IsSomeRendererActing:{current:!1},assign:Wf};De.Children={map:function(e,t,n){if(e==null)return e;var r=[];return Mc(e,r,null,t,n),r},forEach:function(e,t,n){if(e==null)return e;t=Ig(null,null,t,n),Fc(e,HT,t),kg(t)},count:function(e){return Fc(e,function(){return null},null)},toArray:function(e){var t=[];return Mc(e,t,null,function(n){return n}),t},only:function(e){if(!jf(e))throw Error(co(143));return e}};De.Component=as;De.Fragment=MT;De.Profiler=BT;De.PureComponent=$f;De.StrictMode=LT;De.Suspense=WT;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YT;De.cloneElement=function(e,t,n){if(e==null)throw Error(co(267,e));var r=Wf({},e.props),o=e.key,a=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,u=qf.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(m in t)Eg.call(t,m)&&!Tg.hasOwnProperty(m)&&(r[m]=t[m]===void 0&&c!==void 0?c[m]:t[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){c=Array(m);for(var _=0;_<m;_++)c[_]=arguments[_+2];r.children=c}return{$$typeof:uo,type:e.type,key:o,ref:a,props:r,_owner:u}};De.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:GT,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:UT,_context:e},e.Consumer=e};De.createElement=Ag;De.createFactory=function(e){var t=Ag.bind(null,e);return t.type=e,t};De.createRef=function(){return{current:null}};De.forwardRef=function(e){return{$$typeof:VT,render:e}};De.isValidElement=jf;De.lazy=function(e){return{$$typeof:zT,_ctor:e,_status:-1,_result:null}};De.memo=function(e,t){return{$$typeof:$T,type:e,compare:t===void 0?null:t}};De.useCallback=function(e,t){return hr().useCallback(e,t)};De.useContext=function(e,t){return hr().useContext(e,t)};De.useDebugValue=function(){};De.useEffect=function(e,t){return hr().useEffect(e,t)};De.useImperativeHandle=function(e,t,n){return hr().useImperativeHandle(e,t,n)};De.useLayoutEffect=function(e,t){return hr().useLayoutEffect(e,t)};De.useMemo=function(e,t){return hr().useMemo(e,t)};De.useReducer=function(e,t,n){return hr().useReducer(e,t,n)};De.useRef=function(e){return hr().useRef(e)};De.useState=function(e){return hr().useState(e)};De.version="16.14.0";xg.exports=De;var Ee=xg.exports;/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=Ee,Dg=60103;lo.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var Td=Symbol.for;Dg=Td("react.element"),lo.Fragment=Td("react.fragment")}var ZT=KT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JT=Object.prototype.hasOwnProperty,QT={key:!0,ref:!0,__self:!0,__source:!0};function Ng(e,t,n){var r,o={},a=null,u=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(u=t.ref);for(r in t)JT.call(t,r)&&!QT.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Dg,type:e,key:a,ref:u,props:o,_owner:ZT.current}}lo.jsx=Ng;lo.jsxs=Ng;yg.exports=lo;var W=yg.exports,Og={exports:{}},Rn={},Pg={exports:{}},Fg={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,n,r,o,a;if(typeof window>"u"||typeof MessageChannel!="function"){var u=null,c=null,m=function(){if(u!==null)try{var j=e.unstable_now();u(!0,j),u=null}catch(Q){throw setTimeout(m,0),Q}},_=Date.now();e.unstable_now=function(){return Date.now()-_},t=function(j){u!==null?setTimeout(t,0,j):(u=j,setTimeout(m,0))},n=function(j,Q){c=setTimeout(j,Q)},r=function(){clearTimeout(c)},o=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var v=window.performance,R=window.Date,b=window.setTimeout,L=window.clearTimeout;if(typeof console<"u"){var H=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof H!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof v=="object"&&typeof v.now=="function")e.unstable_now=function(){return v.now()};else{var J=R.now();e.unstable_now=function(){return R.now()-J}}var E=!1,T=null,D=-1,P=5,q=0;o=function(){return e.unstable_now()>=q},a=function(){},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):P=0<j?Math.floor(1e3/j):5};var B=new MessageChannel,Y=B.port2;B.port1.onmessage=function(){if(T!==null){var j=e.unstable_now();q=j+P;try{T(!0,j)?Y.postMessage(null):(E=!1,T=null)}catch(Q){throw Y.postMessage(null),Q}}else E=!1},t=function(j){T=j,E||(E=!0,Y.postMessage(null))},n=function(j,Q){D=b(function(){j(e.unstable_now())},Q)},r=function(){L(D),D=-1}}function ne(j,Q){var pe=j.length;j.push(Q);e:for(;;){var Fe=pe-1>>>1,Te=j[Fe];if(Te!==void 0&&0<tt(Te,Q))j[Fe]=Q,j[pe]=Te,pe=Fe;else break e}}function ue(j){return j=j[0],j===void 0?null:j}function re(j){var Q=j[0];if(Q!==void 0){var pe=j.pop();if(pe!==Q){j[0]=pe;e:for(var Fe=0,Te=j.length;Fe<Te;){var pt=2*(Fe+1)-1,an=j[pt],ln=pt+1,Mt=j[ln];if(an!==void 0&&0>tt(an,pe))Mt!==void 0&&0>tt(Mt,an)?(j[Fe]=Mt,j[ln]=pe,Fe=ln):(j[Fe]=an,j[pt]=pe,Fe=pt);else if(Mt!==void 0&&0>tt(Mt,pe))j[Fe]=Mt,j[ln]=pe,Fe=ln;else break e}}return Q}return null}function tt(j,Q){var pe=j.sortIndex-Q.sortIndex;return pe!==0?pe:j.id-Q.id}var it=[],xt=[],Ue=1,se=null,Ae=3,nt=!1,le=!1,st=!1;function Cn(j){for(var Q=ue(xt);Q!==null;){if(Q.callback===null)re(xt);else if(Q.startTime<=j)re(xt),Q.sortIndex=Q.expirationTime,ne(it,Q);else break;Q=ue(xt)}}function Ht(j){if(st=!1,Cn(j),!le)if(ue(it)!==null)le=!0,t(xe);else{var Q=ue(xt);Q!==null&&n(Ht,Q.startTime-j)}}function xe(j,Q){le=!1,st&&(st=!1,r()),nt=!0;var pe=Ae;try{for(Cn(Q),se=ue(it);se!==null&&(!(se.expirationTime>Q)||j&&!o());){var Fe=se.callback;if(Fe!==null){se.callback=null,Ae=se.priorityLevel;var Te=Fe(se.expirationTime<=Q);Q=e.unstable_now(),typeof Te=="function"?se.callback=Te:se===ue(it)&&re(it),Cn(Q)}else re(it);se=ue(it)}if(se!==null)var pt=!0;else{var an=ue(xt);an!==null&&n(Ht,an.startTime-Q),pt=!1}return pt}finally{se=null,Ae=pe,nt=!1}}function Ze(j){switch(j){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Ri=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){le||nt||(le=!0,t(xe))},e.unstable_getCurrentPriorityLevel=function(){return Ae},e.unstable_getFirstCallbackNode=function(){return ue(it)},e.unstable_next=function(j){switch(Ae){case 1:case 2:case 3:var Q=3;break;default:Q=Ae}var pe=Ae;Ae=Q;try{return j()}finally{Ae=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Ri,e.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var pe=Ae;Ae=j;try{return Q()}finally{Ae=pe}},e.unstable_scheduleCallback=function(j,Q,pe){var Fe=e.unstable_now();if(typeof pe=="object"&&pe!==null){var Te=pe.delay;Te=typeof Te=="number"&&0<Te?Fe+Te:Fe,pe=typeof pe.timeout=="number"?pe.timeout:Ze(j)}else pe=Ze(j),Te=Fe;return pe=Te+pe,j={id:Ue++,callback:Q,priorityLevel:j,startTime:Te,expirationTime:pe,sortIndex:-1},Te>Fe?(j.sortIndex=Te,ne(xt,j),ue(it)===null&&j===ue(xt)&&(st?r():st=!0,n(Ht,Te-Fe))):(j.sortIndex=pe,ne(it,j),le||nt||(le=!0,t(xe))),j},e.unstable_shouldYield=function(){var j=e.unstable_now();Cn(j);var Q=ue(it);return Q!==se&&se!==null&&Q!==null&&Q.callback!==null&&Q.startTime<=j&&Q.expirationTime<se.expirationTime||o()},e.unstable_wrapCallback=function(j){var Q=Ae;return function(){var pe=Ae;Ae=Q;try{return j.apply(this,arguments)}finally{Ae=pe}}}})(Fg);Pg.exports=Fg;var eA=Pg.exports;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Ee,Ot=vg,_t=eA;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!_l)throw Error(z(227));function tA(e,t,n,r,o,a,u,c,m){var _=Array.prototype.slice.call(arguments,3);try{t.apply(n,_)}catch(v){this.onError(v)}}var Us=!1,Va=null,Wa=!1,Lc=null,nA={onError:function(e){Us=!0,Va=e}};function rA(e,t,n,r,o,a,u,c,m){Us=!1,Va=null,tA.apply(nA,arguments)}function iA(e,t,n,r,o,a,u,c,m){if(rA.apply(this,arguments),Us){if(Us){var _=Va;Us=!1,Va=null}else throw Error(z(198));Wa||(Wa=!0,Lc=_)}}var Hf=null,Mg=null,Lg=null;function Ad(e,t,n){var r=e.type||"unknown-event";e.currentTarget=Lg(n),iA(r,t,void 0,e),e.currentTarget=null}var $a=null,Gi={};function Bg(){if($a)for(var e in Gi){var t=Gi[e],n=$a.indexOf(e);if(!(-1<n))throw Error(z(96,e));if(!za[n]){if(!t.extractEvents)throw Error(z(97,e));za[n]=t,n=t.eventTypes;for(var r in n){var o=void 0,a=n[r],u=t,c=r;if(Bc.hasOwnProperty(c))throw Error(z(99,c));Bc[c]=a;var m=a.phasedRegistrationNames;if(m){for(o in m)m.hasOwnProperty(o)&&wd(m[o],u,c);o=!0}else a.registrationName?(wd(a.registrationName,u,c),o=!0):o=!1;if(!o)throw Error(z(98,r,e))}}}}function wd(e,t,n){if(es[e])throw Error(z(100,e));es[e]=t,Xf[e]=t.eventTypes[n].dependencies}var za=[],Bc={},es={},Xf={};function Ug(e){var t=!1,n;for(n in e)if(e.hasOwnProperty(n)){var r=e[n];if(!Gi.hasOwnProperty(n)||Gi[n]!==r){if(Gi[n])throw Error(z(102,n));Gi[n]=r,t=!0}}t&&Bg()}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uc=null,Hi=null,Xi=null;function Id(e){if(e=Mg(e)){if(typeof Uc!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Hf(t),Uc(e.stateNode,e.type,t))}}function Gg(e){Hi?Xi?Xi.push(e):Xi=[e]:Hi=e}function Vg(){if(Hi){var e=Hi,t=Xi;if(Xi=Hi=null,Id(e),t)for(e=0;e<t.length;e++)Id(t[e])}}function Yf(e,t){return e(t)}function Wg(e,t,n,r,o){return e(t,n,r,o)}function Kf(){}var $g=Yf,ri=!1,Xu=!1;function Zf(){(Hi!==null||Xi!==null)&&(Kf(),Vg())}function zg(e,t,n){if(Xu)return e(t,n);Xu=!0;try{return $g(e,t,n)}finally{Xu=!1,Zf()}}var sA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kd=Object.prototype.hasOwnProperty,bd={},Dd={};function oA(e){return kd.call(Dd,e)?!0:kd.call(bd,e)?!1:sA.test(e)?Dd[e]=!0:(bd[e]=!0,!1)}function aA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lA(e,t,n,r){if(t===null||typeof t>"u"||aA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ft(e,t,n,r,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yt[e]=new Ft(e,0,!1,e,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yt[t]=new Ft(t,1,!1,e[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yt[e]=new Ft(e,2,!1,e.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yt[e]=new Ft(e,2,!1,e,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yt[e]=new Ft(e,3,!1,e.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(e){yt[e]=new Ft(e,3,!0,e,null,!1)});["capture","download"].forEach(function(e){yt[e]=new Ft(e,4,!1,e,null,!1)});["cols","rows","size","span"].forEach(function(e){yt[e]=new Ft(e,6,!1,e,null,!1)});["rowSpan","start"].forEach(function(e){yt[e]=new Ft(e,5,!1,e.toLowerCase(),null,!1)});var Jf=/[\-:]([a-z])/g;function Qf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jf,Qf);yt[t]=new Ft(t,1,!1,e,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jf,Qf);yt[t]=new Ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jf,Qf);yt[t]=new Ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(e){yt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!1)});yt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(e){yt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!0)});var kn=_l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;kn.hasOwnProperty("ReactCurrentDispatcher")||(kn.ReactCurrentDispatcher={current:null});kn.hasOwnProperty("ReactCurrentBatchConfig")||(kn.ReactCurrentBatchConfig={suspense:null});function eh(e,t,n,r){var o=yt.hasOwnProperty(t)?yt[t]:null,a=o!==null?o.type===0:r?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(lA(t,n,o,r)&&(n=null),r||o===null?oA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var uA=/^(.*)[\\\/]/,jt=typeof Symbol=="function"&&Symbol.for,la=jt?Symbol.for("react.element"):60103,Vi=jt?Symbol.for("react.portal"):60106,ti=jt?Symbol.for("react.fragment"):60107,qg=jt?Symbol.for("react.strict_mode"):60108,xa=jt?Symbol.for("react.profiler"):60114,jg=jt?Symbol.for("react.provider"):60109,Hg=jt?Symbol.for("react.context"):60110,cA=jt?Symbol.for("react.concurrent_mode"):60111,th=jt?Symbol.for("react.forward_ref"):60112,va=jt?Symbol.for("react.suspense"):60113,Gc=jt?Symbol.for("react.suspense_list"):60120,nh=jt?Symbol.for("react.memo"):60115,Xg=jt?Symbol.for("react.lazy"):60116,Yg=jt?Symbol.for("react.block"):60121,Nd=typeof Symbol=="function"&&Symbol.iterator;function As(e){return e===null||typeof e!="object"?null:(e=Nd&&e[Nd]||e["@@iterator"],typeof e=="function"?e:null)}function fA(e){if(e._status===-1){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}}function fr(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ti:return"Fragment";case Vi:return"Portal";case xa:return"Profiler";case qg:return"StrictMode";case va:return"Suspense";case Gc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Hg:return"Context.Consumer";case jg:return"Context.Provider";case th:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case nh:return fr(e.type);case Yg:return fr(e.render);case Xg:if(e=e._status===1?e._result:null)return fr(e)}return null}function rh(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,o=e._debugSource,a=fr(e.type);n=null,r&&(n=fr(r.type)),r=a,a="",o?a=" (at "+o.fileName.replace(uA,"")+":"+o.lineNumber+")":n&&(a=" (created by "+n+")"),n=`
    in `+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function Lr(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Kg(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hA(e){var t=Kg(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(u){r=""+u,a.call(this,u)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ua(e){e._valueTracker||(e._valueTracker=hA(e))}function Zg(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Kg(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Vc(e,t){var n=t.checked;return Ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Od(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Lr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jg(e,t){t=t.checked,t!=null&&eh(e,"checked",t,!1)}function Wc(e,t){Jg(e,t);var n=Lr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$c(e,t.type,n):t.hasOwnProperty("defaultValue")&&$c(e,t.type,Lr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $c(e,t,n){(t!=="number"||e.ownerDocument.activeElement!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function pA(e){var t="";return _l.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function zc(e,t){return e=Ot({children:void 0},t),(t=pA(t.children))&&(e.children=t),e}function Yi(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Lr(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function qc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Lr(n)}}function Qg(e,t){var n=Lr(t.value),r=Lr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Md(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var e1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function t1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?t1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ca,n1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!==e1.svg||"innerHTML"in e)e.innerHTML=t;else{for(ca=ca||document.createElement("div"),ca.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ca.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ys(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}function fa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wi={animationend:fa("Animation","AnimationEnd"),animationiteration:fa("Animation","AnimationIteration"),animationstart:fa("Animation","AnimationStart"),transitionend:fa("Transition","TransitionEnd")},Yu={},r1={};Vr&&(r1=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function yl(e){if(Yu[e])return Yu[e];if(!Wi[e])return e;var t=Wi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in r1)return Yu[e]=t[n];return e}var i1=yl("animationend"),s1=yl("animationiteration"),o1=yl("animationstart"),a1=yl("transitionend"),Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ld=new(typeof WeakMap=="function"?WeakMap:Map);function ih(e){var t=Ld.get(e);return t===void 0&&(t=new Map,Ld.set(e,t)),t}function yi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.effectTag&1026&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function l1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bd(e){if(yi(e)!==e)throw Error(z(188))}function dA(e){var t=e.alternate;if(!t){if(t=yi(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Bd(o),e;if(a===r)return Bd(o),t;a=a.sibling}throw Error(z(188))}if(n.return!==r.return)n=o,r=a;else{for(var u=!1,c=o.child;c;){if(c===n){u=!0,n=o,r=a;break}if(c===r){u=!0,r=o,n=a;break}c=c.sibling}if(!u){for(c=a.child;c;){if(c===n){u=!0,n=a,r=o;break}if(c===r){u=!0,r=a,n=o;break}c=c.sibling}if(!u)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function u1(e){if(e=dA(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function ts(e,t){if(t==null)throw Error(z(30));return e==null?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function sh(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ws=null;function mA(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)Ad(e,t[r],n[r]);else t&&Ad(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function xl(e){if(e!==null&&(ws=ts(ws,e)),e=ws,ws=null,e){if(sh(e,mA),ws)throw Error(z(95));if(Wa)throw e=Lc,Wa=!1,Lc=null,e}}function oh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function c1(e){if(!Vr)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t=typeof t[e]=="function"),t}var qa=[];function f1(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>qa.length&&qa.push(e)}function h1(e,t,n,r){if(qa.length){var o=qa.pop();return o.topLevelType=e,o.eventSystemFlags=r,o.nativeEvent=t,o.targetInst=n,o}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function p1(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(r.tag===3)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=r.tag!==3?null:r.stateNode.containerInfo}if(!r)break;t=n.tag,t!==5&&t!==6||e.ancestors.push(n),n=ho(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var o=oh(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,u=e.eventSystemFlags;n===0&&(u|=64);for(var c=null,m=0;m<za.length;m++){var _=za[m];_&&(_=_.extractEvents(r,t,a,o,u))&&(c=ts(c,_))}xl(c)}}function Hc(e,t,n){if(!n.has(e)){switch(e){case"scroll":Ls(t,"scroll",!0);break;case"focus":case"blur":Ls(t,"focus",!0),Ls(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":c1(e)&&Ls(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:Ms.indexOf(e)===-1&&qe(e,t)}n.set(e,null)}}var d1,ah,m1,Xc=!1,Mn=[],br=null,Dr=null,Nr=null,Ks=new Map,Zs=new Map,Is=[],Yc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),gA="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function _A(e,t){var n=ih(t);Yc.forEach(function(r){Hc(r,t,n)}),gA.forEach(function(r){Hc(r,t,n)})}function Kc(e,t,n,r,o){return{blockedOn:e,topLevelType:t,eventSystemFlags:n|32,nativeEvent:o,container:r}}function Ud(e,t){switch(e){case"focus":case"blur":br=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Ks.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(t.pointerId)}}function ks(e,t,n,r,o,a){return e===null||e.nativeEvent!==a?(e=Kc(t,n,r,o,a),t!==null&&(t=po(t),t!==null&&ah(t)),e):(e.eventSystemFlags|=r,e)}function yA(e,t,n,r,o){switch(t){case"focus":return br=ks(br,e,t,n,r,o),!0;case"dragenter":return Dr=ks(Dr,e,t,n,r,o),!0;case"mouseover":return Nr=ks(Nr,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Ks.set(a,ks(Ks.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Zs.set(a,ks(Zs.get(a)||null,e,t,n,r,o)),!0}return!1}function xA(e){var t=ho(e.target);if(t!==null){var n=yi(t);if(n!==null){if(t=n.tag,t===13){if(t=l1(n),t!==null){e.blockedOn=t,_t.unstable_runWithPriority(e.priority,function(){m1(n)});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sa(e){if(e.blockedOn!==null)return!1;var t=ch(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(t!==null){var n=po(t);return n!==null&&ah(n),e.blockedOn=t,!1}return!0}function Gd(e,t,n){Sa(e)&&n.delete(t)}function vA(){for(Xc=!1;0<Mn.length;){var e=Mn[0];if(e.blockedOn!==null){e=po(e.blockedOn),e!==null&&d1(e);break}var t=ch(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);t!==null?e.blockedOn=t:Mn.shift()}br!==null&&Sa(br)&&(br=null),Dr!==null&&Sa(Dr)&&(Dr=null),Nr!==null&&Sa(Nr)&&(Nr=null),Ks.forEach(Gd),Zs.forEach(Gd)}function bs(e,t){e.blockedOn===t&&(e.blockedOn=null,Xc||(Xc=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,vA)))}function g1(e){function t(o){return bs(o,e)}if(0<Mn.length){bs(Mn[0],e);for(var n=1;n<Mn.length;n++){var r=Mn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(br!==null&&bs(br,e),Dr!==null&&bs(Dr,e),Nr!==null&&bs(Nr,e),Ks.forEach(t),Zs.forEach(t),n=0;n<Is.length;n++)r=Is[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Is.length&&(n=Is[0],n.blockedOn===null);)xA(n),n.blockedOn===null&&Is.shift()}var _1={},y1=new Map,lh=new Map,SA=["abort","abort",i1,"animationEnd",s1,"animationIteration",o1,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",a1,"transitionEnd","waiting","waiting"];function uh(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],o=e[n+1],a="on"+(o[0].toUpperCase()+o.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},lh.set(r,t),y1.set(r,a),_1[o]=a}}uh("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);uh("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);uh(SA,2);for(var Vd="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ku=0;Ku<Vd.length;Ku++)lh.set(Vd[Ku],0);var RA=_t.unstable_UserBlockingPriority,CA=_t.unstable_runWithPriority,Ra=!0;function qe(e,t){Ls(t,e,!1)}function Ls(e,t,n){var r=lh.get(t);switch(r===void 0?2:r){case 0:r=EA.bind(null,t,1,e);break;case 1:r=TA.bind(null,t,1,e);break;default:r=vl.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function EA(e,t,n,r){ri||Kf();var o=vl,a=ri;ri=!0;try{Wg(o,e,t,n,r)}finally{(ri=a)||Zf()}}function TA(e,t,n,r){CA(RA,vl.bind(null,e,t,n,r))}function vl(e,t,n,r){if(Ra)if(0<Mn.length&&-1<Yc.indexOf(e))e=Kc(null,e,t,n,r),Mn.push(e);else{var o=ch(e,t,n,r);if(o===null)Ud(e,r);else if(-1<Yc.indexOf(e))e=Kc(o,e,t,n,r),Mn.push(e);else if(!yA(o,e,t,n,r)){Ud(e,r),e=h1(e,r,null,t);try{zg(p1,e)}finally{f1(e)}}}}function ch(e,t,n,r){if(n=oh(r),n=ho(n),n!==null){var o=yi(n);if(o===null)n=null;else{var a=o.tag;if(a===13){if(n=l1(o),n!==null)return n;n=null}else if(a===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}e=h1(e,r,n,t);try{zg(p1,e)}finally{f1(e)}return null}var Gs={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AA=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(e){AA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Gs[t]=Gs[e]})});function x1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Gs.hasOwnProperty(e)&&Gs[e]?(""+t).trim():t+"px"}function v1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=x1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var wA=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zc(e,t){if(t){if(wA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e,""));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62,""))}}function Jc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd=e1.html;function ir(e,t){e=e.nodeType===9||e.nodeType===11?e:e.ownerDocument;var n=ih(e);t=Xf[t];for(var r=0;r<t.length;r++)Hc(t[r],e,n)}function ja(){}function Qc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zd(e,t){var n=$d(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$d(n)}}function S1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?S1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qd(){for(var e=window,t=Qc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qc(e.document)}return t}function ef(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var R1="$",C1="/$",fh="$?",hh="$!",Zu=null,Ju=null;function E1(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function tf(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qu=typeof setTimeout=="function"?setTimeout:void 0,IA=typeof clearTimeout=="function"?clearTimeout:void 0;function Ki(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function jd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===R1||n===hh||n===fh){if(t===0)return e;t--}else n===C1&&t++}e=e.previousSibling}return null}var ph=Math.random().toString(36).slice(2),Tr="__reactInternalInstance$"+ph,Ha="__reactEventHandlers$"+ph,fo="__reactContainere$"+ph;function ho(e){var t=e[Tr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fo]||n[Tr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jd(e);e!==null;){if(n=e[Tr])return n;e=jd(e)}return t}e=n,n=e.parentNode}return null}function po(e){return e=e[Tr]||e[fo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function dh(e){return e[Ha]||null}function sr(e){do e=e.return;while(e&&e.tag!==5);return e||null}function T1(e,t){var n=e.stateNode;if(!n)return null;var r=Hf(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}function Hd(e,t,n){(t=T1(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=ts(n._dispatchListeners,t),n._dispatchInstances=ts(n._dispatchInstances,e))}function kA(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=sr(t);for(t=n.length;0<t--;)Hd(n[t],"captured",e);for(t=0;t<n.length;t++)Hd(n[t],"bubbled",e)}}function nf(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=T1(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ts(n._dispatchListeners,t),n._dispatchInstances=ts(n._dispatchInstances,e))}function bA(e){e&&e.dispatchConfig.registrationName&&nf(e._targetInst,null,e)}function ns(e){sh(e,kA)}var Ar=null,mh=null,Ca=null;function A1(){if(Ca)return Ca;var e,t=mh,n=t.length,r,o="value"in Ar?Ar.value:Ar.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var u=n-e;for(r=1;r<=u&&t[n-r]===o[a-r];r++);return Ca=o.slice(e,1<r?1-r:void 0)}function Ea(){return!0}function Xa(){return!1}function on(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var o in e)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):o==="target"?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1)?Ea:Xa,this.isPropagationStopped=Xa,this}Ot(on.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){this.isPersistent=Ea},isPersistent:Xa,destructor:function(){var e=this.constructor.Interface,t;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Xa,this._dispatchInstances=this._dispatchListeners=null}});on.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};on.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return Ot(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=Ot({},r.Interface,e),n.extend=r.extend,w1(n),n};w1(on);function DA(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function NA(e){if(!(e instanceof this))throw Error(z(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function w1(e){e.eventPool=[],e.getPooled=DA,e.release=NA}var OA=on.extend({data:null}),PA=on.extend({data:null}),FA=[9,13,27,32],gh=Vr&&"CompositionEvent"in window,Vs=null;Vr&&"documentMode"in document&&(Vs=document.documentMode);var MA=Vr&&"TextEvent"in window&&!Vs,I1=Vr&&(!gh||Vs&&8<Vs&&11>=Vs),Xd=" ",nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Yd=!1;function k1(e,t){switch(e){case"keyup":return FA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function b1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $i=!1;function LA(e,t){switch(e){case"compositionend":return b1(t);case"keypress":return t.which!==32?null:(Yd=!0,Xd);case"textInput":return e=t.data,e===Xd&&Yd?null:e;default:return null}}function BA(e,t){if($i)return e==="compositionend"||!gh&&k1(e,t)?(e=A1(),Ca=mh=Ar=null,$i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return I1&&t.locale!=="ko"?null:t.data;default:return null}}var UA={eventTypes:nr,extractEvents:function(e,t,n,r){var o;if(gh)e:{switch(e){case"compositionstart":var a=nr.compositionStart;break e;case"compositionend":a=nr.compositionEnd;break e;case"compositionupdate":a=nr.compositionUpdate;break e}a=void 0}else $i?k1(e,n)&&(a=nr.compositionEnd):e==="keydown"&&n.keyCode===229&&(a=nr.compositionStart);return a?(I1&&n.locale!=="ko"&&($i||a!==nr.compositionStart?a===nr.compositionEnd&&$i&&(o=A1()):(Ar=r,mh="value"in Ar?Ar.value:Ar.textContent,$i=!0)),a=OA.getPooled(a,t,n,r),o?a.data=o:(o=b1(n),o!==null&&(a.data=o)),ns(a),o=a):o=null,(e=MA?LA(e,n):BA(e,n))?(t=PA.getPooled(nr.beforeInput,t,n,r),t.data=e,ns(t)):t=null,o===null?t:t===null?o:[o,t]}},GA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!GA[e.type]:t==="textarea"}var N1={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function O1(e,t,n){return e=on.getPooled(N1.change,e,t,n),e.type="change",Gg(n),ns(e),e}var Ws=null,Js=null;function VA(e){xl(e)}function Sl(e){var t=pi(e);if(Zg(t))return e}function WA(e,t){if(e==="change")return t}var rf=!1;Vr&&(rf=c1("input")&&(!document.documentMode||9<document.documentMode));function Kd(){Ws&&(Ws.detachEvent("onpropertychange",P1),Js=Ws=null)}function P1(e){if(e.propertyName==="value"&&Sl(Js))if(e=O1(Js,e,oh(e)),ri)xl(e);else{ri=!0;try{Yf(VA,e)}finally{ri=!1,Zf()}}}function $A(e,t,n){e==="focus"?(Kd(),Ws=t,Js=n,Ws.attachEvent("onpropertychange",P1)):e==="blur"&&Kd()}function zA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sl(Js)}function qA(e,t){if(e==="click")return Sl(t)}function jA(e,t){if(e==="input"||e==="change")return Sl(t)}var HA={eventTypes:N1,_isInputEventSupported:rf,extractEvents:function(e,t,n,r){var o=t?pi(t):window,a=o.nodeName&&o.nodeName.toLowerCase();if(a==="select"||a==="input"&&o.type==="file")var u=WA;else if(D1(o))if(rf)u=jA;else{u=zA;var c=$A}else(a=o.nodeName)&&a.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(u=qA);if(u&&(u=u(e,t)))return O1(u,n,r);c&&c(e,o,t),e==="blur"&&(e=o._wrapperState)&&e.controlled&&o.type==="number"&&$c(o,"number",o.value)}},mo=on.extend({view:null,detail:null}),XA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=XA[e])?!!t[e]:!1}function _h(){return YA}var Zd=0,Jd=0,Qd=!1,em=!1,go=mo.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:_h,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Zd;return Zd=e.screenX,Qd?e.type==="mousemove"?e.screenX-t:0:(Qd=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Jd;return Jd=e.screenY,em?e.type==="mousemove"?e.screenY-t:0:(em=!0,0)}}),F1=go.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ds={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},KA={eventTypes:Ds,extractEvents:function(e,t,n,r,o){var a=e==="mouseover"||e==="pointerover",u=e==="mouseout"||e==="pointerout";if(a&&!(o&32)&&(n.relatedTarget||n.fromElement)||!u&&!a)return null;if(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,u){if(u=t,t=(t=n.relatedTarget||n.toElement)?ho(t):null,t!==null){var c=yi(t);(t!==c||t.tag!==5&&t.tag!==6)&&(t=null)}}else u=null;if(u===t)return null;if(e==="mouseout"||e==="mouseover")var m=go,_=Ds.mouseLeave,v=Ds.mouseEnter,R="mouse";else(e==="pointerout"||e==="pointerover")&&(m=F1,_=Ds.pointerLeave,v=Ds.pointerEnter,R="pointer");if(e=u==null?a:pi(u),a=t==null?a:pi(t),_=m.getPooled(_,u,n,r),_.type=R+"leave",_.target=e,_.relatedTarget=a,n=m.getPooled(v,t,n,r),n.type=R+"enter",n.target=a,n.relatedTarget=e,r=u,R=t,r&&R)e:{for(m=r,v=R,u=0,e=m;e;e=sr(e))u++;for(e=0,t=v;t;t=sr(t))e++;for(;0<u-e;)m=sr(m),u--;for(;0<e-u;)v=sr(v),e--;for(;u--;){if(m===v||m===v.alternate)break e;m=sr(m),v=sr(v)}m=null}else m=null;for(v=m,m=[];r&&r!==v&&(u=r.alternate,!(u!==null&&u===v));)m.push(r),r=sr(r);for(r=[];R&&R!==v&&(u=R.alternate,!(u!==null&&u===v));)r.push(R),R=sr(R);for(R=0;R<m.length;R++)nf(m[R],"bubbled",_);for(R=r.length;0<R--;)nf(r[R],"captured",n);return o&64?[_,n]:[_]}};function ZA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var di=typeof Object.is=="function"?Object.is:ZA,JA=Object.prototype.hasOwnProperty;function Qs(e,t){if(di(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!JA.call(t,n[r])||!di(e[n[r]],t[n[r]]))return!1;return!0}var QA=Vr&&"documentMode"in document&&11>=document.documentMode,M1={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zi=null,sf=null,$s=null,of=!1;function tm(e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;return of||zi==null||zi!==Qc(n)?null:(n=zi,"selectionStart"in n&&ef(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$s&&Qs($s,n)?null:($s=n,e=on.getPooled(M1.select,sf,e,t),e.type="select",e.target=zi,ns(e),e))}var ew={eventTypes:M1,extractEvents:function(e,t,n,r,o,a){if(o=a||(r.window===r?r.document:r.nodeType===9?r:r.ownerDocument),!(a=!o)){e:{o=ih(o),a=Xf.onSelect;for(var u=0;u<a.length;u++)if(!o.has(a[u])){o=!1;break e}o=!0}a=!o}if(a)return null;switch(o=t?pi(t):window,e){case"focus":(D1(o)||o.contentEditable==="true")&&(zi=o,sf=t,$s=null);break;case"blur":$s=sf=zi=null;break;case"mousedown":of=!0;break;case"contextmenu":case"mouseup":case"dragend":return of=!1,tm(n,r);case"selectionchange":if(QA)break;case"keydown":case"keyup":return tm(n,r)}return null}},tw=on.extend({animationName:null,elapsedTime:null,pseudoElement:null}),nw=on.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rw=mo.extend({relatedTarget:null});function Ta(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}var iw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ow=mo.extend({key:function(e){if(e.key){var t=iw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ta(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sw[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:_h,charCode:function(e){return e.type==="keypress"?Ta(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ta(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aw=go.extend({dataTransfer:null}),lw=mo.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:_h}),uw=on.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),cw=go.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),fw={eventTypes:_1,extractEvents:function(e,t,n,r){var o=y1.get(e);if(!o)return null;switch(e){case"keypress":if(Ta(n)===0)return null;case"keydown":case"keyup":e=ow;break;case"blur":case"focus":e=rw;break;case"click":if(n.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=go;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=aw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=lw;break;case i1:case s1:case o1:e=tw;break;case a1:e=uw;break;case"scroll":e=mo;break;case"wheel":e=cw;break;case"copy":case"cut":case"paste":e=nw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=F1;break;default:e=on}return t=e.getPooled(o,t,n,r),ns(t),t}};if($a)throw Error(z(101));$a=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));Bg();var hw=po;Hf=dh;Mg=hw;Lg=pi;Ug({SimpleEventPlugin:fw,EnterLeaveEventPlugin:KA,ChangeEventPlugin:HA,SelectEventPlugin:ew,BeforeInputEventPlugin:UA});var af=[],qi=-1;function $e(e){0>qi||(e.current=af[qi],af[qi]=null,qi--)}function et(e,t){qi++,af[qi]=e.current,e.current=t}var Br={},wt={current:Br},$t={current:!1},mi=Br;function rs(e,t){var n=e.type.contextTypes;if(!n)return Br;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function zt(e){return e=e.childContextTypes,e!=null}function Ya(){$e($t),$e(wt)}function nm(e,t,n){if(wt.current!==Br)throw Error(z(168));et(wt,t),et($t,n)}function L1(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(z(108,fr(t)||"Unknown",o));return Ot({},n,{},r)}function Aa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Br,mi=wt.current,et(wt,e),et($t,$t.current),!0}function rm(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=L1(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,$e($t),$e(wt),et(wt,e)):$e($t),et($t,n)}var pw=_t.unstable_runWithPriority,yh=_t.unstable_scheduleCallback,B1=_t.unstable_cancelCallback,im=_t.unstable_requestPaint,lf=_t.unstable_now,dw=_t.unstable_getCurrentPriorityLevel,Rl=_t.unstable_ImmediatePriority,U1=_t.unstable_UserBlockingPriority,G1=_t.unstable_NormalPriority,V1=_t.unstable_LowPriority,W1=_t.unstable_IdlePriority,$1={},mw=_t.unstable_shouldYield,gw=im!==void 0?im:function(){},or=null,wa=null,ec=!1,sm=lf(),xn=1e4>sm?lf:function(){return lf()-sm};function Cl(){switch(dw()){case Rl:return 99;case U1:return 98;case G1:return 97;case V1:return 96;case W1:return 95;default:throw Error(z(332))}}function z1(e){switch(e){case 99:return Rl;case 98:return U1;case 97:return G1;case 96:return V1;case 95:return W1;default:throw Error(z(332))}}function Ur(e,t){return e=z1(e),pw(e,t)}function q1(e,t,n){return e=z1(e),yh(e,t,n)}function om(e){return or===null?(or=[e],wa=yh(Rl,j1)):or.push(e),$1}function zn(){if(wa!==null){var e=wa;wa=null,B1(e)}j1()}function j1(){if(!ec&&or!==null){ec=!0;var e=0;try{var t=or;Ur(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),or=null}catch(n){throw or!==null&&(or=or.slice(e+1)),yh(Rl,zn),n}finally{ec=!1}}}function Ia(e,t,n){return n/=10,1073741821-(((1073741821-e+t/10)/n|0)+1)*n}function In(e,t){if(e&&e.defaultProps){t=Ot({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n])}return t}var Ka={current:null},Za=null,ji=null,Ja=null;function xh(){Ja=ji=Za=null}function vh(e){var t=Ka.current;$e(Ka),e.type._context._currentValue=t}function H1(e,t){for(;e!==null;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,n!==null&&n.childExpirationTime<t&&(n.childExpirationTime=t);else if(n!==null&&n.childExpirationTime<t)n.childExpirationTime=t;else break;e=e.return}}function Zi(e,t){Za=e,Ja=ji=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.expirationTime>=t&&(Ln=!0),e.firstContext=null)}function Sn(e,t){if(Ja!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Ja=e,t=1073741823),t={context:e,observedBits:t,next:null},ji===null){if(Za===null)throw Error(z(308));ji=t,Za.dependencies={expirationTime:0,firstContext:t,responders:null}}else ji=ji.next=t;return e._currentValue}var Er=!1;function Sh(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Rh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function Or(e,t){return e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null},e.next=e}function Pr(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function am(e,t){var n=e.alternate;n!==null&&Rh(n,e),e=e.updateQueue,n=e.baseQueue,n===null?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function eo(e,t,n,r){var o=e.updateQueue;Er=!1;var a=o.baseQueue,u=o.shared.pending;if(u!==null){if(a!==null){var c=a.next;a.next=u.next,u.next=c}a=u,o.shared.pending=null,c=e.alternate,c!==null&&(c=c.updateQueue,c!==null&&(c.baseQueue=u))}if(a!==null){c=a.next;var m=o.baseState,_=0,v=null,R=null,b=null;if(c!==null){var L=c;do{if(u=L.expirationTime,u<r){var H={expirationTime:L.expirationTime,suspenseConfig:L.suspenseConfig,tag:L.tag,payload:L.payload,callback:L.callback,next:null};b===null?(R=b=H,v=m):b=b.next=H,u>_&&(_=u)}else{b!==null&&(b=b.next={expirationTime:1073741823,suspenseConfig:L.suspenseConfig,tag:L.tag,payload:L.payload,callback:L.callback,next:null}),C_(u,L.suspenseConfig);e:{var J=e,E=L;switch(u=t,H=n,E.tag){case 1:if(J=E.payload,typeof J=="function"){m=J.call(H,m,u);break e}m=J;break e;case 3:J.effectTag=J.effectTag&-4097|64;case 0:if(J=E.payload,u=typeof J=="function"?J.call(H,m,u):J,u==null)break e;m=Ot({},m,u);break e;case 2:Er=!0}}L.callback!==null&&(e.effectTag|=32,u=o.effects,u===null?o.effects=[L]:u.push(L))}if(L=L.next,L===null||L===c){if(u=o.shared.pending,u===null)break;L=a.next=u.next,u.next=c,o.baseQueue=a=u,o.shared.pending=null}}while(!0)}b===null?v=m:b.next=R,o.baseState=v,o.baseQueue=b,Il(_),e.expirationTime=_,e.memoizedState=m}}function lm(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=o,o=n,typeof r!="function")throw Error(z(191,r));r.call(o)}}}var zs=kn.ReactCurrentBatchConfig,X1=new _l.Component().refs;function Qa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ot({},t,n),e.memoizedState=n,e.expirationTime===0&&(e.updateQueue.baseState=n)}var El={isMounted:function(e){return(e=e._reactInternalFiber)?yi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Vn(),o=zs.suspense;r=fi(r,e,o),o=Or(r,o),o.payload=t,n!=null&&(o.callback=n),Pr(e,o),Mr(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Vn(),o=zs.suspense;r=fi(r,e,o),o=Or(r,o),o.tag=1,o.payload=t,n!=null&&(o.callback=n),Pr(e,o),Mr(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Vn(),r=zs.suspense;n=fi(n,e,r),r=Or(n,r),r.tag=2,t!=null&&(r.callback=t),Pr(e,r),Mr(e,n)}};function um(e,t,n,r,o,a,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,u):t.prototype&&t.prototype.isPureReactComponent?!Qs(n,r)||!Qs(o,a):!0}function Y1(e,t,n){var r=!1,o=Br,a=t.contextType;return typeof a=="object"&&a!==null?a=Sn(a):(o=zt(t)?mi:wt.current,r=t.contextTypes,a=(r=r!=null)?rs(e,o):Br),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=El,e.stateNode=t,t._reactInternalFiber=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function cm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&El.enqueueReplaceState(t,t.state,null)}function uf(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=X1,Sh(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=Sn(a):(a=zt(t)?mi:wt.current,o.context=rs(e,a)),eo(e,n,o,r),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Qa(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&El.enqueueReplaceState(o,o.state,null),eo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.effectTag|=4)}var ha=Array.isArray;function Ns(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var u=r.refs;u===X1&&(u=r.refs={}),a===null?delete u[o]:u[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function pa(e,t){if(e.type!=="textarea")throw Error(z(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function K1(e){function t(E,T){if(e){var D=E.lastEffect;D!==null?(D.nextEffect=T,E.lastEffect=T):E.firstEffect=E.lastEffect=T,T.nextEffect=null,T.effectTag=8}}function n(E,T){if(!e)return null;for(;T!==null;)t(E,T),T=T.sibling;return null}function r(E,T){for(E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function o(E,T){return E=gi(E,T),E.index=0,E.sibling=null,E}function a(E,T,D){return E.index=D,e?(D=E.alternate,D!==null?(D=D.index,D<T?(E.effectTag=2,T):D):(E.effectTag=2,T)):T}function u(E){return e&&E.alternate===null&&(E.effectTag=2),E}function c(E,T,D,P){return T===null||T.tag!==6?(T=oc(D,E.mode,P),T.return=E,T):(T=o(T,D),T.return=E,T)}function m(E,T,D,P){return T!==null&&T.elementType===D.type?(P=o(T,D.props),P.ref=Ns(E,T,D),P.return=E,P):(P=Na(D.type,D.key,D.props,null,E.mode,P),P.ref=Ns(E,T,D),P.return=E,P)}function _(E,T,D,P){return T===null||T.tag!==4||T.stateNode.containerInfo!==D.containerInfo||T.stateNode.implementation!==D.implementation?(T=ac(D,E.mode,P),T.return=E,T):(T=o(T,D.children||[]),T.return=E,T)}function v(E,T,D,P,q){return T===null||T.tag!==7?(T=kr(D,E.mode,P,q),T.return=E,T):(T=o(T,D),T.return=E,T)}function R(E,T,D){if(typeof T=="string"||typeof T=="number")return T=oc(""+T,E.mode,D),T.return=E,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case la:return D=Na(T.type,T.key,T.props,null,E.mode,D),D.ref=Ns(E,null,T),D.return=E,D;case Vi:return T=ac(T,E.mode,D),T.return=E,T}if(ha(T)||As(T))return T=kr(T,E.mode,D,null),T.return=E,T;pa(E,T)}return null}function b(E,T,D,P){var q=T!==null?T.key:null;if(typeof D=="string"||typeof D=="number")return q!==null?null:c(E,T,""+D,P);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case la:return D.key===q?D.type===ti?v(E,T,D.props.children,P,q):m(E,T,D,P):null;case Vi:return D.key===q?_(E,T,D,P):null}if(ha(D)||As(D))return q!==null?null:v(E,T,D,P,null);pa(E,D)}return null}function L(E,T,D,P,q){if(typeof P=="string"||typeof P=="number")return E=E.get(D)||null,c(T,E,""+P,q);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case la:return E=E.get(P.key===null?D:P.key)||null,P.type===ti?v(T,E,P.props.children,q,P.key):m(T,E,P,q);case Vi:return E=E.get(P.key===null?D:P.key)||null,_(T,E,P,q)}if(ha(P)||As(P))return E=E.get(D)||null,v(T,E,P,q,null);pa(T,P)}return null}function H(E,T,D,P){for(var q=null,B=null,Y=T,ne=T=0,ue=null;Y!==null&&ne<D.length;ne++){Y.index>ne?(ue=Y,Y=null):ue=Y.sibling;var re=b(E,Y,D[ne],P);if(re===null){Y===null&&(Y=ue);break}e&&Y&&re.alternate===null&&t(E,Y),T=a(re,T,ne),B===null?q=re:B.sibling=re,B=re,Y=ue}if(ne===D.length)return n(E,Y),q;if(Y===null){for(;ne<D.length;ne++)Y=R(E,D[ne],P),Y!==null&&(T=a(Y,T,ne),B===null?q=Y:B.sibling=Y,B=Y);return q}for(Y=r(E,Y);ne<D.length;ne++)ue=L(Y,E,ne,D[ne],P),ue!==null&&(e&&ue.alternate!==null&&Y.delete(ue.key===null?ne:ue.key),T=a(ue,T,ne),B===null?q=ue:B.sibling=ue,B=ue);return e&&Y.forEach(function(tt){return t(E,tt)}),q}function J(E,T,D,P){var q=As(D);if(typeof q!="function")throw Error(z(150));if(D=q.call(D),D==null)throw Error(z(151));for(var B=q=null,Y=T,ne=T=0,ue=null,re=D.next();Y!==null&&!re.done;ne++,re=D.next()){Y.index>ne?(ue=Y,Y=null):ue=Y.sibling;var tt=b(E,Y,re.value,P);if(tt===null){Y===null&&(Y=ue);break}e&&Y&&tt.alternate===null&&t(E,Y),T=a(tt,T,ne),B===null?q=tt:B.sibling=tt,B=tt,Y=ue}if(re.done)return n(E,Y),q;if(Y===null){for(;!re.done;ne++,re=D.next())re=R(E,re.value,P),re!==null&&(T=a(re,T,ne),B===null?q=re:B.sibling=re,B=re);return q}for(Y=r(E,Y);!re.done;ne++,re=D.next())re=L(Y,E,ne,re.value,P),re!==null&&(e&&re.alternate!==null&&Y.delete(re.key===null?ne:re.key),T=a(re,T,ne),B===null?q=re:B.sibling=re,B=re);return e&&Y.forEach(function(it){return t(E,it)}),q}return function(E,T,D,P){var q=typeof D=="object"&&D!==null&&D.type===ti&&D.key===null;q&&(D=D.props.children);var B=typeof D=="object"&&D!==null;if(B)switch(D.$$typeof){case la:e:{for(B=D.key,q=T;q!==null;){if(q.key===B){switch(q.tag){case 7:if(D.type===ti){n(E,q.sibling),T=o(q,D.props.children),T.return=E,E=T;break e}break;default:if(q.elementType===D.type){n(E,q.sibling),T=o(q,D.props),T.ref=Ns(E,q,D),T.return=E,E=T;break e}}n(E,q);break}else t(E,q);q=q.sibling}D.type===ti?(T=kr(D.props.children,E.mode,P,D.key),T.return=E,E=T):(P=Na(D.type,D.key,D.props,null,E.mode,P),P.ref=Ns(E,T,D),P.return=E,E=P)}return u(E);case Vi:e:{for(q=D.key;T!==null;){if(T.key===q)if(T.tag===4&&T.stateNode.containerInfo===D.containerInfo&&T.stateNode.implementation===D.implementation){n(E,T.sibling),T=o(T,D.children||[]),T.return=E,E=T;break e}else{n(E,T);break}else t(E,T);T=T.sibling}T=ac(D,E.mode,P),T.return=E,E=T}return u(E)}if(typeof D=="string"||typeof D=="number")return D=""+D,T!==null&&T.tag===6?(n(E,T.sibling),T=o(T,D),T.return=E,E=T):(n(E,T),T=oc(D,E.mode,P),T.return=E,E=T),u(E);if(ha(D))return H(E,T,D,P);if(As(D))return J(E,T,D,P);if(B&&pa(E,D),typeof D>"u"&&!q)switch(E.tag){case 1:case 0:throw E=E.type,Error(z(152,E.displayName||E.name||"Component"))}return n(E,T)}}var is=K1(!0),Ch=K1(!1),_o={},Gn={current:_o},to={current:_o},no={current:_o};function ii(e){if(e===_o)throw Error(z(174));return e}function cf(e,t){switch(et(no,t),et(to,e),et(Gn,_o),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=jc(t,e)}$e(Gn),et(Gn,t)}function ss(){$e(Gn),$e(to),$e(no)}function fm(e){ii(no.current);var t=ii(Gn.current),n=jc(t,e.type);t!==n&&(et(to,e),et(Gn,n))}function Eh(e){to.current===e&&($e(Gn),$e(to))}var Ke={current:0};function el(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data===fh||n.data===hh))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.effectTag&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Th(e,t){return{responder:e,props:t}}var ka=kn.ReactCurrentDispatcher,vn=kn.ReactCurrentBatchConfig,wr=0,lt=null,Tt=null,At=null,tl=!1;function tn(){throw Error(z(321))}function Ah(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!di(e[n],t[n]))return!1;return!0}function wh(e,t,n,r,o,a){if(wr=a,lt=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,ka.current=e===null||e.memoizedState===null?_w:yw,e=n(r,o),t.expirationTime===wr){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(z(301));a+=1,At=Tt=null,t.updateQueue=null,ka.current=xw,e=n(r,o)}while(t.expirationTime===wr)}if(ka.current=il,t=Tt!==null&&Tt.next!==null,wr=0,At=Tt=lt=null,tl=!1,t)throw Error(z(300));return e}function Ji(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?lt.memoizedState=At=e:At=At.next=e,At}function ls(){if(Tt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=At===null?lt.memoizedState:At.next;if(t!==null)At=t,Tt=e;else{if(e===null)throw Error(z(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},At===null?lt.memoizedState=At=e:At=At.next=e}return At}function li(e,t){return typeof t=="function"?t(e):t}function da(e){var t=ls(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Tt,o=r.baseQueue,a=n.pending;if(a!==null){if(o!==null){var u=o.next;o.next=a.next,a.next=u}r.baseQueue=o=a,n.pending=null}if(o!==null){o=o.next,r=r.baseState;var c=u=a=null,m=o;do{var _=m.expirationTime;if(_<wr){var v={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null};c===null?(u=c=v,a=r):c=c.next=v,_>lt.expirationTime&&(lt.expirationTime=_,Il(_))}else c!==null&&(c=c.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),C_(_,m.suspenseConfig),r=m.eagerReducer===e?m.eagerState:e(r,m.action);m=m.next}while(m!==null&&m!==o);c===null?a=r:c.next=u,di(r,t.memoizedState)||(Ln=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ma(e){var t=ls(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var u=o=o.next;do a=e(a,u.action),u=u.next;while(u!==o);di(a,t.memoizedState)||(Ln=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function tc(e){var t=Ji();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},e=e.dispatch=n_.bind(null,lt,e),[t.memoizedState,e]}function ff(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=lt.updateQueue,t===null?(t={lastEffect:null},lt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Z1(){return ls().memoizedState}function hf(e,t,n,r){var o=Ji();lt.effectTag|=e,o.memoizedState=ff(1|t,n,void 0,r===void 0?null:r)}function Ih(e,t,n,r){var o=ls();r=r===void 0?null:r;var a=void 0;if(Tt!==null){var u=Tt.memoizedState;if(a=u.destroy,r!==null&&Ah(r,u.deps)){ff(t,n,a,r);return}}lt.effectTag|=e,o.memoizedState=ff(1|t,n,a,r)}function hm(e,t){return hf(516,4,e,t)}function nl(e,t){return Ih(516,4,e,t)}function J1(e,t){return Ih(4,2,e,t)}function Q1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function e_(e,t,n){return n=n!=null?n.concat([e]):null,Ih(4,2,Q1.bind(null,t,e),n)}function kh(){}function pm(e,t){return Ji().memoizedState=[e,t===void 0?null:t],e}function rl(e,t){var n=ls();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ah(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function t_(e,t){var n=ls();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ah(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bh(e,t,n){var r=Cl();Ur(98>r?98:r,function(){e(!0)}),Ur(97<r?97:r,function(){var o=vn.suspense;vn.suspense=t===void 0?null:t;try{e(!1),n()}finally{vn.suspense=o}})}function n_(e,t,n){var r=Vn(),o=zs.suspense;r=fi(r,e,o),o={expirationTime:r,suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(a===null?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===lt||a!==null&&a===lt)tl=!0,o.expirationTime=wr,lt.expirationTime=wr;else{if(e.expirationTime===0&&(a===null||a.expirationTime===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,c=a(u,n);if(o.eagerReducer=a,o.eagerState=c,di(c,u))return}catch{}finally{}Mr(e,r)}}var il={readContext:Sn,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useResponder:tn,useDeferredValue:tn,useTransition:tn},_w={readContext:Sn,useCallback:pm,useContext:Sn,useEffect:hm,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,hf(4,2,Q1.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hf(4,2,e,t)},useMemo:function(e,t){var n=Ji();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ji();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=n_.bind(null,lt,e),[r.memoizedState,e]},useRef:function(e){var t=Ji();return e={current:e},t.memoizedState=e},useState:tc,useDebugValue:kh,useResponder:Th,useDeferredValue:function(e,t){var n=tc(e),r=n[0],o=n[1];return hm(function(){var a=vn.suspense;vn.suspense=t===void 0?null:t;try{o(e)}finally{vn.suspense=a}},[e,t]),r},useTransition:function(e){var t=tc(!1),n=t[0];return t=t[1],[pm(bh.bind(null,t,e),[t,e]),n]}},yw={readContext:Sn,useCallback:rl,useContext:Sn,useEffect:nl,useImperativeHandle:e_,useLayoutEffect:J1,useMemo:t_,useReducer:da,useRef:Z1,useState:function(){return da(li)},useDebugValue:kh,useResponder:Th,useDeferredValue:function(e,t){var n=da(li),r=n[0],o=n[1];return nl(function(){var a=vn.suspense;vn.suspense=t===void 0?null:t;try{o(e)}finally{vn.suspense=a}},[e,t]),r},useTransition:function(e){var t=da(li),n=t[0];return t=t[1],[rl(bh.bind(null,t,e),[t,e]),n]}},xw={readContext:Sn,useCallback:rl,useContext:Sn,useEffect:nl,useImperativeHandle:e_,useLayoutEffect:J1,useMemo:t_,useReducer:ma,useRef:Z1,useState:function(){return ma(li)},useDebugValue:kh,useResponder:Th,useDeferredValue:function(e,t){var n=ma(li),r=n[0],o=n[1];return nl(function(){var a=vn.suspense;vn.suspense=t===void 0?null:t;try{o(e)}finally{vn.suspense=a}},[e,t]),r},useTransition:function(e){var t=ma(li),n=t[0];return t=t[1],[rl(bh.bind(null,t,e),[t,e]),n]}},ur=null,Ir=null,ui=!1;function r_(e,t){var n=Bn(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function dm(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function pf(e){if(ui){var t=Ir;if(t){var n=t;if(!dm(e,t)){if(t=Ki(n.nextSibling),!t||!dm(e,t)){e.effectTag=e.effectTag&-1025|2,ui=!1,ur=e;return}r_(ur,n)}ur=e,Ir=Ki(t.firstChild)}else e.effectTag=e.effectTag&-1025|2,ui=!1,ur=e}}function mm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ur=e}function ga(e){if(e!==ur)return!1;if(!ui)return mm(e),ui=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!tf(t,e.memoizedProps))for(t=Ir;t;)r_(e,t),t=Ki(t.nextSibling);if(mm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n===C1){if(t===0){Ir=Ki(e.nextSibling);break e}t--}else n!==R1&&n!==hh&&n!==fh||t++}e=e.nextSibling}Ir=null}}else Ir=ur?Ki(e.stateNode.nextSibling):null;return!0}function nc(){Ir=ur=null,ui=!1}var vw=kn.ReactCurrentOwner,Ln=!1;function nn(e,t,n,r){t.child=e===null?Ch(t,null,n,r):is(t,e.child,n,r)}function gm(e,t,n,r,o){n=n.render;var a=t.ref;return Zi(t,o),r=wh(e,t,n,r,a,o),e!==null&&!Ln?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),cr(e,t,o)):(t.effectTag|=1,nn(e,t,r,o),t.child)}function _m(e,t,n,r,o,a){if(e===null){var u=n.type;return typeof u=="function"&&!Fh(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,i_(e,t,u,r,o,a)):(e=Na(n.type,null,r,null,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return u=e.child,o<a&&(o=u.memoizedProps,n=n.compare,n=n!==null?n:Qs,n(o,r)&&e.ref===t.ref)?cr(e,t,a):(t.effectTag|=1,e=gi(u,r),e.ref=t.ref,e.return=t,t.child=e)}function i_(e,t,n,r,o,a){return e!==null&&Qs(e.memoizedProps,r)&&e.ref===t.ref&&(Ln=!1,o<a)?(t.expirationTime=e.expirationTime,cr(e,t,a)):df(e,t,n,r,a)}function s_(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.effectTag|=128)}function df(e,t,n,r,o){var a=zt(n)?mi:wt.current;return a=rs(t,a),Zi(t,o),n=wh(e,t,n,r,a,o),e!==null&&!Ln?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),cr(e,t,o)):(t.effectTag|=1,nn(e,t,n,o),t.child)}function ym(e,t,n,r,o){if(zt(n)){var a=!0;Aa(t)}else a=!1;if(Zi(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Y1(t,n,r),uf(t,n,r,o),r=!0;else if(e===null){var u=t.stateNode,c=t.memoizedProps;u.props=c;var m=u.context,_=n.contextType;typeof _=="object"&&_!==null?_=Sn(_):(_=zt(n)?mi:wt.current,_=rs(t,_));var v=n.getDerivedStateFromProps,R=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function";R||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==r||m!==_)&&cm(t,u,r,_),Er=!1;var b=t.memoizedState;u.state=b,eo(t,r,u,o),m=t.memoizedState,c!==r||b!==m||$t.current||Er?(typeof v=="function"&&(Qa(t,n,v,r),m=t.memoizedState),(c=Er||um(t,n,c,r,b,m,_))?(R||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.effectTag|=4)):(typeof u.componentDidMount=="function"&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=m),u.props=r,u.state=m,u.context=_,r=c):(typeof u.componentDidMount=="function"&&(t.effectTag|=4),r=!1)}else u=t.stateNode,Rh(e,t),c=t.memoizedProps,u.props=t.type===t.elementType?c:In(t.type,c),m=u.context,_=n.contextType,typeof _=="object"&&_!==null?_=Sn(_):(_=zt(n)?mi:wt.current,_=rs(t,_)),v=n.getDerivedStateFromProps,(R=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(c!==r||m!==_)&&cm(t,u,r,_),Er=!1,m=t.memoizedState,u.state=m,eo(t,r,u,o),b=t.memoizedState,c!==r||m!==b||$t.current||Er?(typeof v=="function"&&(Qa(t,n,v,r),b=t.memoizedState),(v=Er||um(t,n,c,r,m,b,_))?(R||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,b,_),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,b,_)),typeof u.componentDidUpdate=="function"&&(t.effectTag|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.effectTag|=256)):(typeof u.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=b),u.props=r,u.state=b,u.context=_,r=v):(typeof u.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=4),typeof u.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=256),r=!1);return mf(e,t,n,r,a,o)}function mf(e,t,n,r,o,a){s_(e,t);var u=(t.effectTag&64)!==0;if(!r&&!u)return o&&rm(t,n,!1),cr(e,t,a);r=t.stateNode,vw.current=t;var c=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.effectTag|=1,e!==null&&u?(t.child=is(t,e.child,null,a),t.child=is(t,null,c,a)):nn(e,t,c,a),t.memoizedState=r.state,o&&rm(t,n,!0),t.child}function xm(e){var t=e.stateNode;t.pendingContext?nm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nm(e,t.context,!1),cf(e,t.containerInfo)}var rc={dehydrated:null,retryTime:0};function vm(e,t,n){var r=t.mode,o=t.pendingProps,a=Ke.current,u=!1,c;if((c=(t.effectTag&64)!==0)||(c=(a&2)!==0&&(e===null||e.memoizedState!==null)),c?(u=!0,t.effectTag&=-65):e!==null&&e.memoizedState===null||o.fallback===void 0||o.unstable_avoidThisFallback===!0||(a|=1),et(Ke,a&1),e===null){if(o.fallback!==void 0&&pf(t),u){if(u=o.fallback,o=kr(null,r,0,null),o.return=t,!(t.mode&2))for(e=t.memoizedState!==null?t.child.child:t.child,o.child=e;e!==null;)e.return=o,e=e.sibling;return n=kr(u,r,n,null),n.return=t,o.sibling=n,t.memoizedState=rc,t.child=o,n}return r=o.children,t.memoizedState=null,t.child=Ch(t,null,r,n)}if(e.memoizedState!==null){if(e=e.child,r=e.sibling,u){if(o=o.fallback,n=gi(e,e.pendingProps),n.return=t,!(t.mode&2)&&(u=t.memoizedState!==null?t.child.child:t.child,u!==e.child))for(n.child=u;u!==null;)u.return=n,u=u.sibling;return r=gi(r,o),r.return=t,n.sibling=r,n.childExpirationTime=0,t.memoizedState=rc,t.child=n,r}return n=is(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,u){if(u=o.fallback,o=kr(null,r,0,null),o.return=t,o.child=e,e!==null&&(e.return=o),!(t.mode&2))for(e=t.memoizedState!==null?t.child.child:t.child,o.child=e;e!==null;)e.return=o,e=e.sibling;return n=kr(u,r,n,null),n.return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=rc,t.child=o,n}return t.memoizedState=null,t.child=is(t,e,o.children,n)}function Sm(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;n!==null&&n.expirationTime<t&&(n.expirationTime=t),H1(e.return,t)}function ic(e,t,n,r,o,a){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:o,lastEffect:a}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailExpiration=0,u.tailMode=o,u.lastEffect=a)}function Rm(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(nn(e,t,r.children,n),r=Ke.current,r&2)r=r&1|2,t.effectTag|=64;else{if(e!==null&&e.effectTag&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sm(e,n);else if(e.tag===19)Sm(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(et(Ke,r),!(t.mode&2))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&el(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ic(t,!1,o,n,a,t.lastEffect);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&el(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ic(t,!0,n,null,a,t.lastEffect);break;case"together":ic(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function cr(e,t,n){e!==null&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(r!==0&&Il(r),t.childExpirationTime<n)return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=gi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}var o_,gf,a_,l_;o_=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};a_=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var u=t.stateNode;switch(ii(Gn.current),e=null,n){case"input":a=Vc(u,a),r=Vc(u,r),e=[];break;case"option":a=zc(u,a),r=zc(u,r),e=[];break;case"select":a=Ot({},a,{value:void 0}),r=Ot({},r,{value:void 0}),e=[];break;case"textarea":a=qc(u,a),r=qc(u,r),e=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(u.onclick=ja)}Zc(n,r);var c,m;n=null;for(c in a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style")for(m in u=a[c],u)u.hasOwnProperty(m)&&(n||(n={}),n[m]="");else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(es.hasOwnProperty(c)?e||(e=[]):(e=e||[]).push(c,null));for(c in r){var _=r[c];if(u=a!=null?a[c]:void 0,r.hasOwnProperty(c)&&_!==u&&(_!=null||u!=null))if(c==="style")if(u){for(m in u)!u.hasOwnProperty(m)||_&&_.hasOwnProperty(m)||(n||(n={}),n[m]="");for(m in _)_.hasOwnProperty(m)&&u[m]!==_[m]&&(n||(n={}),n[m]=_[m])}else n||(e||(e=[]),e.push(c,n)),n=_;else c==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,u=u?u.__html:void 0,_!=null&&u!==_&&(e=e||[]).push(c,_)):c==="children"?u===_||typeof _!="string"&&typeof _!="number"||(e=e||[]).push(c,""+_):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(es.hasOwnProperty(c)?(_!=null&&ir(o,c),e||u===_||(e=[])):(e=e||[]).push(c,_))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}};l_=function(e,t,n,r){n!==r&&(t.effectTag|=4)};function _a(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Sw(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return zt(t.type)&&Ya(),null;case 3:return ss(),$e($t),$e(wt),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),e!==null&&e.child!==null||!ga(t)||(t.effectTag|=4),gf(t),null;case 5:Eh(t),n=ii(no.current);var o=t.type;if(e!==null&&t.stateNode!=null)a_(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(t.stateNode===null)throw Error(z(166));return null}if(e=ii(Gn.current),ga(t)){r=t.stateNode,o=t.type;var a=t.memoizedProps;switch(r[Tr]=t,r[Ha]=a,o){case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(e=0;e<Ms.length;e++)qe(Ms[e],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"form":qe("reset",r),qe("submit",r);break;case"details":qe("toggle",r);break;case"input":Od(r,a),qe("invalid",r),ir(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},qe("invalid",r),ir(n,"onChange");break;case"textarea":Fd(r,a),qe("invalid",r),ir(n,"onChange")}Zc(o,a),e=null;for(var u in a)if(a.hasOwnProperty(u)){var c=a[u];u==="children"?typeof c=="string"?r.textContent!==c&&(e=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(e=["children",""+c]):es.hasOwnProperty(u)&&c!=null&&ir(n,u)}switch(o){case"input":ua(r),Pd(r,a,!0);break;case"textarea":ua(r),Md(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=ja)}n=e,t.updateQueue=n,n!==null&&(t.effectTag|=4)}else{switch(u=n.nodeType===9?n:n.ownerDocument,e===Wd&&(e=t1(o)),e===Wd?o==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=u.createElement(o,{is:r.is}):(e=u.createElement(o),o==="select"&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,o),e[Tr]=t,e[Ha]=r,o_(e,t,!1,!1),t.stateNode=e,u=Jc(o,r),o){case"iframe":case"object":case"embed":qe("load",e),c=r;break;case"video":case"audio":for(c=0;c<Ms.length;c++)qe(Ms[c],e);c=r;break;case"source":qe("error",e),c=r;break;case"img":case"image":case"link":qe("error",e),qe("load",e),c=r;break;case"form":qe("reset",e),qe("submit",e),c=r;break;case"details":qe("toggle",e),c=r;break;case"input":Od(e,r),c=Vc(e,r),qe("invalid",e),ir(n,"onChange");break;case"option":c=zc(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=Ot({},r,{value:void 0}),qe("invalid",e),ir(n,"onChange");break;case"textarea":Fd(e,r),c=qc(e,r),qe("invalid",e),ir(n,"onChange");break;default:c=r}Zc(o,c);var m=c;for(a in m)if(m.hasOwnProperty(a)){var _=m[a];a==="style"?v1(e,_):a==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&n1(e,_)):a==="children"?typeof _=="string"?(o!=="textarea"||_!=="")&&Ys(e,_):typeof _=="number"&&Ys(e,""+_):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(es.hasOwnProperty(a)?_!=null&&ir(n,a):_!=null&&eh(e,a,_,u))}switch(o){case"input":ua(e),Pd(e,r,!1);break;case"textarea":ua(e),Md(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Lr(r.value));break;case"select":e.multiple=!!r.multiple,n=r.value,n!=null?Yi(e,!!r.multiple,n,!1):r.defaultValue!=null&&Yi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=ja)}E1(o,r)&&(t.effectTag|=4)}t.ref!==null&&(t.effectTag|=128)}return null;case 6:if(e&&t.stateNode!=null)l_(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));n=ii(no.current),ii(Gn.current),ga(t)?(n=t.stateNode,r=t.memoizedProps,n[Tr]=t,n.nodeValue!==r&&(t.effectTag|=4)):(n=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),n[Tr]=t,t.stateNode=n)}return null;case 13:return $e(Ke),r=t.memoizedState,t.effectTag&64?(t.expirationTime=n,t):(n=r!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&ga(t):(o=e.memoizedState,r=o!==null,n||o===null||(o=e.child.sibling,o!==null&&(a=t.firstEffect,a!==null?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8))),n&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Ke.current&1?ft===ci&&(ft=al):((ft===ci||ft===al)&&(ft=Tl),io!==0&&rn!==null&&(ai(rn,qt),I_(rn,io)))),(n||r)&&(t.effectTag|=4),null);case 4:return ss(),gf(t),null;case 10:return vh(t),null;case 17:return zt(t.type)&&Ya(),null;case 19:if($e(Ke),r=t.memoizedState,r===null)return null;if(o=(t.effectTag&64)!==0,a=r.rendering,a===null){if(o)_a(r,!1);else if(ft!==ci||e!==null&&e.effectTag&64)for(a=t.child;a!==null;){if(e=el(a),e!==null){for(t.effectTag|=64,_a(r,!1),o=e.updateQueue,o!==null&&(t.updateQueue=o,t.effectTag|=4),r.lastEffect===null&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;r!==null;)o=r,a=n,o.effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,e=o.alternate,e===null?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=a===null?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return et(Ke,Ke.current&1|2),t.child}a=a.sibling}}else{if(!o)if(e=el(a),e!==null){if(t.effectTag|=64,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.effectTag|=4),_a(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate)return t=t.lastEffect=r.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*xn()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,_a(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(a.sibling=t.child,t.child=a):(n=r.last,n!==null?n.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(r.tailExpiration===0&&(r.tailExpiration=xn()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=xn(),n.sibling=null,t=Ke.current,et(Ke,o?t&1|2:t&1),n):null}throw Error(z(156,t.tag))}function Rw(e){switch(e.tag){case 1:zt(e.type)&&Ya();var t=e.effectTag;return t&4096?(e.effectTag=t&-4097|64,e):null;case 3:if(ss(),$e($t),$e(wt),t=e.effectTag,t&64)throw Error(z(285));return e.effectTag=t&-4097|64,e;case 5:return Eh(e),null;case 13:return $e(Ke),t=e.effectTag,t&4096?(e.effectTag=t&-4097|64,e):null;case 19:return $e(Ke),null;case 4:return ss(),null;case 10:return vh(e),null;default:return null}}function Dh(e,t){return{value:e,source:t,stack:rh(t)}}var Cw=typeof WeakSet=="function"?WeakSet:Set;function _f(e,t){var n=t.source,r=t.stack;r===null&&n!==null&&(r=rh(n)),n!==null&&fr(n.type),t=t.value,e!==null&&e.tag===1&&fr(e.type);try{console.error(t)}catch(o){setTimeout(function(){throw o})}}function Ew(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){hi(e,n)}}function Cm(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){hi(e,n)}else t.current=null}function Tw(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.effectTag&256&&e!==null){var n=e.memoizedProps,r=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:In(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(z(163))}function u_(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,r!==void 0&&r()}n=n.next}while(n!==t)}}function c_(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Aw(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:c_(3,n);return;case 1:if(e=n.stateNode,n.effectTag&4)if(t===null)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:In(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}t=n.updateQueue,t!==null&&lm(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}lm(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.effectTag&4&&E1(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&g1(n))));return;case 19:case 17:case 20:case 21:return}throw Error(z(163))}function Em(e,t,n){switch(typeof Tf=="function"&&Tf(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e.next;Ur(97<n?97:n,function(){var o=r;do{var a=o.destroy;if(a!==void 0){var u=t;try{a()}catch(c){hi(u,c)}}o=o.next}while(o!==r)})}break;case 1:Cm(t),n=t.stateNode,typeof n.componentWillUnmount=="function"&&Ew(t,n);break;case 5:Cm(t);break;case 4:h_(e,t,n)}}function f_(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,t!==null&&f_(t)}function Tm(e){return e.tag===5||e.tag===3||e.tag===4}function Am(e){e:{for(var t=e.return;t!==null;){if(Tm(t)){var n=t;break e}t=t.return}throw Error(z(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:t=t.containerInfo,r=!0;break;case 4:t=t.containerInfo,r=!0;break;default:throw Error(z(161))}n.effectTag&16&&(Ys(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||Tm(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.effectTag&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.effectTag&2)){n=n.stateNode;break e}}r?yf(e,n,t):xf(e,n,t)}function yf(e,t,n){var r=e.tag,o=r===5||r===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ja));else if(r!==4&&(e=e.child,e!==null))for(yf(e,t,n),e=e.sibling;e!==null;)yf(e,t,n),e=e.sibling}function xf(e,t,n){var r=e.tag,o=r===5||r===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xf(e,t,n),e=e.sibling;e!==null;)xf(e,t,n),e=e.sibling}function h_(e,t,n){for(var r=t,o=!1,a,u;;){if(!o){o=r.return;e:for(;;){if(o===null)throw Error(z(160));switch(a=o.stateNode,o.tag){case 5:u=!1;break e;case 3:a=a.containerInfo,u=!0;break e;case 4:a=a.containerInfo,u=!0;break e}o=o.return}o=!0}if(r.tag===5||r.tag===6){e:for(var c=e,m=r,_=n,v=m;;)if(Em(c,v,_),v.child!==null&&v.tag!==4)v.child.return=v,v=v.child;else{if(v===m)break e;for(;v.sibling===null;){if(v.return===null||v.return===m)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}u?(c=a,m=r.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):a.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){a=r.stateNode.containerInfo,u=!0,r.child.return=r,r=r.child;continue}}else if(Em(e,r,n),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function sc(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:u_(3,t);return;case 1:return;case 5:var n=t.stateNode;if(n!=null){var r=t.memoizedProps,o=e!==null?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(n[Ha]=r,e==="input"&&r.type==="radio"&&r.name!=null&&Jg(n,r),Jc(e,o),t=Jc(e,r),o=0;o<a.length;o+=2){var u=a[o],c=a[o+1];u==="style"?v1(n,c):u==="dangerouslySetInnerHTML"?n1(n,c):u==="children"?Ys(n,c):eh(n,u,c,t)}switch(e){case"input":Wc(n,r);break;case"textarea":Qg(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,e=r.value,e!=null?Yi(n,!!r.multiple,e,!1):t!==!!r.multiple&&(r.defaultValue!=null?Yi(n,!!r.multiple,r.defaultValue,!0):Yi(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(z(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:t=t.stateNode,t.hydrate&&(t.hydrate=!1,g1(t.containerInfo));return;case 12:return;case 13:if(n=t,t.memoizedState===null?r=!1:(r=!0,n=t.child,Ph=xn()),n!==null)e:for(e=n;;){if(e.tag===5)a=e.stateNode,r?(a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(a=e.stateNode,o=e.memoizedProps.style,o=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=x1("display",o));else if(e.tag===6)e.stateNode.nodeValue=r?"":e.memoizedProps;else if(e.tag===13&&e.memoizedState!==null&&e.memoizedState.dehydrated===null){a=e.child.sibling,a.return=e,e=a;continue}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}wm(t);return;case 19:wm(t);return;case 17:return}throw Error(z(163))}function wm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Cw),t.forEach(function(r){var o=Mw.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}var ww=typeof WeakMap=="function"?WeakMap:Map;function p_(e,t,n){n=Or(n,null),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cl||(cl=!0,vf=r),_f(e,t)},n}function d_(e,t,n){n=Or(n,null),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return _f(e,t),r(o)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this),_f(e,t));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),n}var Iw=Math.ceil,sl=kn.ReactCurrentDispatcher,m_=kn.ReactCurrentOwner,ht=0,Nh=8,bn=16,$n=32,ci=0,ol=1,g_=2,al=3,Tl=4,Oh=5,ce=ht,rn=null,ge=null,qt=0,ft=ci,Al=null,lr=1073741823,ro=1073741823,ll=null,io=0,ul=!1,Ph=0,__=500,te=null,cl=!1,vf=null,Fr=null,fl=!1,qs=null,Bs=90,si=null,js=0,Sf=null,ba=0;function Vn(){return(ce&(bn|$n))!==ht?1073741821-(xn()/10|0):ba!==0?ba:ba=1073741821-(xn()/10|0)}function fi(e,t,n){if(t=t.mode,!(t&2))return 1073741823;var r=Cl();if(!(t&4))return r===99?1073741823:1073741822;if((ce&bn)!==ht)return qt;if(n!==null)e=Ia(e,n.timeoutMs|0||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Ia(e,150,100);break;case 97:case 96:e=Ia(e,5e3,250);break;case 95:e=2;break;default:throw Error(z(326))}return rn!==null&&e===qt&&--e,e}function Mr(e,t){if(50<js)throw js=0,Sf=null,Error(z(185));if(e=wl(e,t),e!==null){var n=Cl();t===1073741823?(ce&Nh)!==ht&&(ce&(bn|$n))===ht?Rf(e):(sn(e),ce===ht&&zn()):sn(e),(ce&4)===ht||n!==98&&n!==99||(si===null?si=new Map([[e,t]]):(n=si.get(e),(n===void 0||n>t)&&si.set(e,t)))}}function wl(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;n!==null&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,o=null;if(r===null&&e.tag===3)o=e.stateNode;else for(;r!==null;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),n!==null&&n.childExpirationTime<t&&(n.childExpirationTime=t),r.return===null&&r.tag===3){o=r.stateNode;break}r=r.return}return o!==null&&(rn===o&&(Il(t),ft===Tl&&ai(o,qt)),I_(o,t)),o}function Da(e){var t=e.lastExpiredTime;if(t!==0||(t=e.firstPendingTime,!w_(e,t)))return t;var n=e.lastPingedTime;return e=e.nextKnownPendingLevel,e=n>e?n:e,2>=e&&t!==e?0:e}function sn(e){if(e.lastExpiredTime!==0)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=om(Rf.bind(null,e));else{var t=Da(e),n=e.callbackNode;if(t===0)n!==null&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Vn();if(t===1073741823?r=99:t===1||t===2?r=95:(r=10*(1073741821-t)-10*(1073741821-r),r=0>=r?99:250>=r?98:5250>=r?97:95),n!==null){var o=e.callbackPriority;if(e.callbackExpirationTime===t&&o>=r)return;n!==$1&&B1(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=t===1073741823?om(Rf.bind(null,e)):q1(r,y_.bind(null,e),{timeout:10*(1073741821-t)-xn()}),e.callbackNode=t}}}function y_(e,t){if(ba=0,t)return t=Vn(),Af(e,t),sn(e),null;var n=Da(e);if(n!==0){if(t=e.callbackNode,(ce&(bn|$n))!==ht)throw Error(z(327));if(us(),e===rn&&n===qt||oi(e,n),ge!==null){var r=ce;ce|=bn;var o=R_();do try{Dw();break}catch(c){S_(e,c)}while(!0);if(xh(),ce=r,sl.current=o,ft===ol)throw t=Al,oi(e,n),ai(e,n),sn(e),t;if(ge===null)switch(o=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=ft,rn=null,r){case ci:case ol:throw Error(z(345));case g_:Af(e,2<n?2:n);break;case al:if(ai(e,n),r=e.lastSuspendedTime,n===r&&(e.nextKnownPendingLevel=Cf(o)),lr===1073741823&&(o=Ph+__-xn(),10<o)){if(ul){var a=e.lastPingedTime;if(a===0||a>=n){e.lastPingedTime=n,oi(e,n);break}}if(a=Da(e),a!==0&&a!==n)break;if(r!==0&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=Qu(ei.bind(null,e),o);break}ei(e);break;case Tl:if(ai(e,n),r=e.lastSuspendedTime,n===r&&(e.nextKnownPendingLevel=Cf(o)),ul&&(o=e.lastPingedTime,o===0||o>=n)){e.lastPingedTime=n,oi(e,n);break}if(o=Da(e),o!==0&&o!==n)break;if(r!==0&&r!==n){e.lastPingedTime=r;break}if(ro!==1073741823?r=10*(1073741821-ro)-xn():lr===1073741823?r=0:(r=10*(1073741821-lr)-5e3,o=xn(),n=10*(1073741821-n)-o,r=o-r,0>r&&(r=0),r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Iw(r/1960))-r,n<r&&(r=n)),10<r){e.timeoutHandle=Qu(ei.bind(null,e),r);break}ei(e);break;case Oh:if(lr!==1073741823&&ll!==null){a=lr;var u=ll;if(r=u.busyMinDurationMs|0,0>=r?r=0:(o=u.busyDelayMs|0,a=xn()-(10*(1073741821-a)-(u.timeoutMs|0||5e3)),r=a<=o?0:o+r-a),10<r){ai(e,n),e.timeoutHandle=Qu(ei.bind(null,e),r);break}}ei(e);break;default:throw Error(z(329))}if(sn(e),e.callbackNode===t)return y_.bind(null,e)}}return null}function Rf(e){var t=e.lastExpiredTime;if(t=t!==0?t:1073741823,(ce&(bn|$n))!==ht)throw Error(z(327));if(us(),e===rn&&t===qt||oi(e,t),ge!==null){var n=ce;ce|=bn;var r=R_();do try{bw();break}catch(o){S_(e,o)}while(!0);if(xh(),ce=n,sl.current=r,ft===ol)throw n=Al,oi(e,t),ai(e,t),sn(e),n;if(ge!==null)throw Error(z(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,rn=null,ei(e),sn(e)}return null}function kw(){if(si!==null){var e=si;si=null,e.forEach(function(t,n){Af(n,t),sn(n)}),zn()}}function x_(e,t){var n=ce;ce|=1;try{return e(t)}finally{ce=n,ce===ht&&zn()}}function v_(e,t){var n=ce;ce&=-2,ce|=Nh;try{return e(t)}finally{ce=n,ce===ht&&zn()}}function oi(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,IA(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ya();break;case 3:ss(),$e($t),$e(wt);break;case 5:Eh(r);break;case 4:ss();break;case 13:$e(Ke);break;case 19:$e(Ke);break;case 10:vh(r)}n=n.return}rn=e,ge=gi(e.current,null),qt=t,ft=ci,Al=null,ro=lr=1073741823,ll=null,io=0,ul=!1}function S_(e,t){do{try{if(xh(),ka.current=il,tl)for(var n=lt.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}if(wr=0,At=Tt=lt=null,tl=!1,ge===null||ge.return===null)return ft=ol,Al=t,ge=null;e:{var o=e,a=ge.return,u=ge,c=t;if(t=qt,u.effectTag|=2048,u.firstEffect=u.lastEffect=null,c!==null&&typeof c=="object"&&typeof c.then=="function"){var m=c;if(!(u.mode&2)){var _=u.alternate;_?(u.updateQueue=_.updateQueue,u.memoizedState=_.memoizedState,u.expirationTime=_.expirationTime):(u.updateQueue=null,u.memoizedState=null)}var v=(Ke.current&1)!==0,R=a;do{var b;if(b=R.tag===13){var L=R.memoizedState;if(L!==null)b=L.dehydrated!==null;else{var H=R.memoizedProps;b=H.fallback===void 0?!1:H.unstable_avoidThisFallback!==!0?!0:!v}}if(b){var J=R.updateQueue;if(J===null){var E=new Set;E.add(m),R.updateQueue=E}else J.add(m);if(!(R.mode&2)){if(R.effectTag|=64,u.effectTag&=-2981,u.tag===1)if(u.alternate===null)u.tag=17;else{var T=Or(1073741823,null);T.tag=2,Pr(u,T)}u.expirationTime=1073741823;break e}c=void 0,u=t;var D=o.pingCache;if(D===null?(D=o.pingCache=new ww,c=new Set,D.set(m,c)):(c=D.get(m),c===void 0&&(c=new Set,D.set(m,c))),!c.has(u)){c.add(u);var P=Fw.bind(null,o,m,u);m.then(P,P)}R.effectTag|=4096,R.expirationTime=t;break e}R=R.return}while(R!==null);c=Error((fr(u.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`+rh(u))}ft!==Oh&&(ft=g_),c=Dh(c,u),R=a;do{switch(R.tag){case 3:m=c,R.effectTag|=4096,R.expirationTime=t;var q=p_(R,m,t);am(R,q);break e;case 1:m=c;var B=R.type,Y=R.stateNode;if(!(R.effectTag&64)&&(typeof B.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Fr===null||!Fr.has(Y)))){R.effectTag|=4096,R.expirationTime=t;var ne=d_(R,m,t);am(R,ne);break e}}R=R.return}while(R!==null)}ge=T_(ge)}catch(ue){t=ue;continue}break}while(!0)}function R_(){var e=sl.current;return sl.current=il,e===null?il:e}function C_(e,t){e<lr&&2<e&&(lr=e),t!==null&&e<ro&&2<e&&(ro=e,ll=t)}function Il(e){e>io&&(io=e)}function bw(){for(;ge!==null;)ge=E_(ge)}function Dw(){for(;ge!==null&&!mw();)ge=E_(ge)}function E_(e){var t=A_(e.alternate,e,qt);return e.memoizedProps=e.pendingProps,t===null&&(t=T_(e)),m_.current=null,t}function T_(e){ge=e;do{var t=ge.alternate;if(e=ge.return,ge.effectTag&2048){if(t=Rw(ge),t!==null)return t.effectTag&=2047,t;e!==null&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}else{if(t=Sw(t,ge,qt),qt===1||ge.childExpirationTime!==1){for(var n=0,r=ge.child;r!==null;){var o=r.expirationTime,a=r.childExpirationTime;o>n&&(n=o),a>n&&(n=a),r=r.sibling}ge.childExpirationTime=n}if(t!==null)return t;e!==null&&!(e.effectTag&2048)&&(e.firstEffect===null&&(e.firstEffect=ge.firstEffect),ge.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=ge.firstEffect),e.lastEffect=ge.lastEffect),1<ge.effectTag&&(e.lastEffect!==null?e.lastEffect.nextEffect=ge:e.firstEffect=ge,e.lastEffect=ge))}if(t=ge.sibling,t!==null)return t;ge=e}while(ge!==null);return ft===ci&&(ft=Oh),null}function Cf(e){var t=e.expirationTime;return e=e.childExpirationTime,t>e?t:e}function ei(e){var t=Cl();return Ur(99,Nw.bind(null,e,t)),null}function Nw(e,t){do us();while(qs!==null);if((ce&(bn|$n))!==ht)throw Error(z(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(n===null)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var o=Cf(n);if(e.firstPendingTime=o,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===rn&&(ge=rn=null,qt=0),1<n.effectTag?n.lastEffect!==null?(n.lastEffect.nextEffect=n,o=n.firstEffect):o=n:o=n.firstEffect,o!==null){var a=ce;ce|=$n,m_.current=null,Zu=Ra;var u=qd();if(ef(u)){if("selectionStart"in u)var c={start:u.selectionStart,end:u.selectionEnd};else e:{c=(c=u.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var _=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var R=0,b=-1,L=-1,H=0,J=0,E=u,T=null;t:for(;;){for(var D;E!==c||_!==0&&E.nodeType!==3||(b=R+_),E!==v||m!==0&&E.nodeType!==3||(L=R+m),E.nodeType===3&&(R+=E.nodeValue.length),(D=E.firstChild)!==null;)T=E,E=D;for(;;){if(E===u)break t;if(T===c&&++H===_&&(b=R),T===v&&++J===m&&(L=R),(D=E.nextSibling)!==null)break;E=T,T=E.parentNode}E=D}c=b===-1||L===-1?null:{start:b,end:L}}else c=null}c=c||{start:0,end:0}}else c=null;Ju={activeElementDetached:null,focusedElem:u,selectionRange:c},Ra=!1,te=o;do try{Ow()}catch(re){if(te===null)throw Error(z(330));hi(te,re),te=te.nextEffect}while(te!==null);te=o;do try{for(u=e,c=t;te!==null;){var P=te.effectTag;if(P&16&&Ys(te.stateNode,""),P&128){var q=te.alternate;if(q!==null){var B=q.ref;B!==null&&(typeof B=="function"?B(null):B.current=null)}}switch(P&1038){case 2:Am(te),te.effectTag&=-3;break;case 6:Am(te),te.effectTag&=-3,sc(te.alternate,te);break;case 1024:te.effectTag&=-1025;break;case 1028:te.effectTag&=-1025,sc(te.alternate,te);break;case 4:sc(te.alternate,te);break;case 8:_=te,h_(u,_,c),f_(_)}te=te.nextEffect}}catch(re){if(te===null)throw Error(z(330));hi(te,re),te=te.nextEffect}while(te!==null);if(B=Ju,q=qd(),P=B.focusedElem,c=B.selectionRange,q!==P&&P&&P.ownerDocument&&S1(P.ownerDocument.documentElement,P)){for(c!==null&&ef(P)&&(q=c.start,B=c.end,B===void 0&&(B=q),"selectionStart"in P?(P.selectionStart=q,P.selectionEnd=Math.min(B,P.value.length)):(B=(q=P.ownerDocument||document)&&q.defaultView||window,B.getSelection&&(B=B.getSelection(),_=P.textContent.length,u=Math.min(c.start,_),c=c.end===void 0?u:Math.min(c.end,_),!B.extend&&u>c&&(_=c,c=u,u=_),_=zd(P,u),v=zd(P,c),_&&v&&(B.rangeCount!==1||B.anchorNode!==_.node||B.anchorOffset!==_.offset||B.focusNode!==v.node||B.focusOffset!==v.offset)&&(q=q.createRange(),q.setStart(_.node,_.offset),B.removeAllRanges(),u>c?(B.addRange(q),B.extend(v.node,v.offset)):(q.setEnd(v.node,v.offset),B.addRange(q)))))),q=[],B=P;B=B.parentNode;)B.nodeType===1&&q.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<q.length;P++)B=q[P],B.element.scrollLeft=B.left,B.element.scrollTop=B.top}Ra=!!Zu,Ju=Zu=null,e.current=n,te=o;do try{for(P=e;te!==null;){var Y=te.effectTag;if(Y&36&&Aw(P,te.alternate,te),Y&128){q=void 0;var ne=te.ref;if(ne!==null){var ue=te.stateNode;switch(te.tag){case 5:q=ue;break;default:q=ue}typeof ne=="function"?ne(q):ne.current=q}}te=te.nextEffect}}catch(re){if(te===null)throw Error(z(330));hi(te,re),te=te.nextEffect}while(te!==null);te=null,gw(),ce=a}else e.current=n;if(fl)fl=!1,qs=e,Bs=t;else for(te=o;te!==null;)t=te.nextEffect,te.nextEffect=null,te=t;if(t=e.firstPendingTime,t===0&&(Fr=null),t===1073741823?e===Sf?js++:(js=0,Sf=e):js=0,typeof Ef=="function"&&Ef(n.stateNode,r),sn(e),cl)throw cl=!1,e=vf,vf=null,e;return(ce&Nh)!==ht||zn(),null}function Ow(){for(;te!==null;){var e=te.effectTag;e&256&&Tw(te.alternate,te),!(e&512)||fl||(fl=!0,q1(97,function(){return us(),null})),te=te.nextEffect}}function us(){if(Bs!==90){var e=97<Bs?97:Bs;return Bs=90,Ur(e,Pw)}}function Pw(){if(qs===null)return!1;var e=qs;if(qs=null,(ce&(bn|$n))!==ht)throw Error(z(331));var t=ce;for(ce|=$n,e=e.current.firstEffect;e!==null;){try{var n=e;if(n.effectTag&512)switch(n.tag){case 0:case 11:case 15:case 22:u_(5,n),c_(5,n)}}catch(r){if(e===null)throw Error(z(330));hi(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return ce=t,zn(),!0}function Im(e,t,n){t=Dh(n,t),t=p_(e,t,1073741823),Pr(e,t),e=wl(e,1073741823),e!==null&&sn(e)}function hi(e,t){if(e.tag===3)Im(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){Im(n,e,t);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){e=Dh(t,e),e=d_(n,e,1073741823),Pr(n,e),n=wl(n,1073741823),n!==null&&sn(n);break}}n=n.return}}function Fw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),rn===e&&qt===n?ft===Tl||ft===al&&lr===1073741823&&xn()-Ph<__?oi(e,qt):ul=!0:w_(e,n)&&(t=e.lastPingedTime,t!==0&&t<n||(e.lastPingedTime=n,sn(e)))}function Mw(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=Vn(),t=fi(t,e,null)),e=wl(e,t),e!==null&&sn(e)}var A_;A_=function(e,t,n){var r=t.expirationTime;if(e!==null){var o=t.pendingProps;if(e.memoizedProps!==o||$t.current)Ln=!0;else{if(r<n){switch(Ln=!1,t.tag){case 3:xm(t),nc();break;case 5:if(fm(t),t.mode&4&&n!==1&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:zt(t.type)&&Aa(t);break;case 4:cf(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,o=t.type._context,et(Ka,o._currentValue),o._currentValue=r;break;case 13:if(t.memoizedState!==null)return r=t.child.childExpirationTime,r!==0&&r>=n?vm(e,t,n):(et(Ke,Ke.current&1),t=cr(e,t,n),t!==null?t.sibling:null);et(Ke,Ke.current&1);break;case 19:if(r=t.childExpirationTime>=n,e.effectTag&64){if(r)return Rm(e,t,n);t.effectTag|=64}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null),et(Ke,Ke.current),!r)return null}return cr(e,t,n)}Ln=!1}}else Ln=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=rs(t,wt.current),Zi(t,n),o=wh(null,t,r,e,o,n),t.effectTag|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,zt(r)){var a=!0;Aa(t)}else a=!1;t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Sh(t);var u=r.getDerivedStateFromProps;typeof u=="function"&&Qa(t,r,u,e),o.updater=El,t.stateNode=o,o._reactInternalFiber=t,uf(t,r,e,n),t=mf(null,t,r,!0,a,n)}else t.tag=0,nn(null,t,o,n),t=t.child;return t;case 16:e:{if(o=t.elementType,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,fA(o),o._status!==1)throw o._result;switch(o=o._result,t.type=o,a=t.tag=Uw(o),e=In(o,e),a){case 0:t=df(null,t,o,e,n);break e;case 1:t=ym(null,t,o,e,n);break e;case 11:t=gm(null,t,o,e,n);break e;case 14:t=_m(null,t,o,In(o.type,e),r,n);break e}throw Error(z(306,o,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:In(r,o),df(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:In(r,o),ym(e,t,r,o,n);case 3:if(xm(t),r=t.updateQueue,e===null||r===null)throw Error(z(282));if(r=t.pendingProps,o=t.memoizedState,o=o!==null?o.element:null,Rh(e,t),eo(t,r,null,n),r=t.memoizedState.element,r===o)nc(),t=cr(e,t,n);else{if((o=t.stateNode.hydrate)&&(Ir=Ki(t.stateNode.containerInfo.firstChild),ur=t,o=ui=!0),o)for(n=Ch(t,null,r,n),t.child=n;n;)n.effectTag=n.effectTag&-3|1024,n=n.sibling;else nn(e,t,r,n),nc();t=t.child}return t;case 5:return fm(t),e===null&&pf(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,u=o.children,tf(r,o)?u=null:a!==null&&tf(r,a)&&(t.effectTag|=16),s_(e,t),t.mode&4&&n!==1&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(nn(e,t,u,n),t=t.child),t;case 6:return e===null&&pf(t),null;case 13:return vm(e,t,n);case 4:return cf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=is(t,null,r,n):nn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:In(r,o),gm(e,t,r,o,n);case 7:return nn(e,t,t.pendingProps,n),t.child;case 8:return nn(e,t,t.pendingProps.children,n),t.child;case 12:return nn(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,o=t.pendingProps,u=t.memoizedProps,a=o.value;var c=t.type._context;if(et(Ka,c._currentValue),c._currentValue=a,u!==null)if(c=u.value,a=di(c,a)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(c,a):1073741823)|0,a===0){if(u.children===o.children&&!$t.current){t=cr(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var m=c.dependencies;if(m!==null){u=c.child;for(var _=m.firstContext;_!==null;){if(_.context===r&&_.observedBits&a){c.tag===1&&(_=Or(n,null),_.tag=2,Pr(c,_)),c.expirationTime<n&&(c.expirationTime=n),_=c.alternate,_!==null&&_.expirationTime<n&&(_.expirationTime=n),H1(c.return,n),m.expirationTime<n&&(m.expirationTime=n);break}_=_.next}}else u=c.tag===10&&c.type===t.type?null:c.child;if(u!==null)u.return=c;else for(u=c;u!==null;){if(u===t){u=null;break}if(c=u.sibling,c!==null){c.return=u.return,u=c;break}u=u.return}c=u}nn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps,r=a.children,Zi(t,n),o=Sn(o,a.unstable_observedBits),r=r(o),t.effectTag|=1,nn(e,t,r,n),t.child;case 14:return o=t.type,a=In(o,t.pendingProps),a=In(o.type,a),_m(e,t,o,a,r,n);case 15:return i_(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:In(r,o),e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,zt(r)?(e=!0,Aa(t)):e=!1,Zi(t,n),Y1(t,r,o),uf(t,r,o,n),mf(null,t,r,!0,e,n);case 19:return Rm(e,t,n)}throw Error(z(156,t.tag))};var Ef=null,Tf=null;function Lw(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ef=function(r){try{t.onCommitFiberRoot(n,r,void 0,(r.current.effectTag&64)===64)}catch{}},Tf=function(r){try{t.onCommitFiberUnmount(n,r)}catch{}}}catch{}return!0}function Bw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Bn(e,t,n,r){return new Bw(e,t,n,r)}function Fh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uw(e){if(typeof e=="function")return Fh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===th)return 11;if(e===nh)return 14}return 2}function gi(e,t){var n=e.alternate;return n===null?(n=Bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Na(e,t,n,r,o,a){var u=2;if(r=e,typeof e=="function")Fh(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case ti:return kr(n.children,o,a,t);case cA:u=8,o|=7;break;case qg:u=8,o|=1;break;case xa:return e=Bn(12,n,t,o|8),e.elementType=xa,e.type=xa,e.expirationTime=a,e;case va:return e=Bn(13,n,t,o),e.type=va,e.elementType=va,e.expirationTime=a,e;case Gc:return e=Bn(19,n,t,o),e.elementType=Gc,e.expirationTime=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jg:u=10;break e;case Hg:u=9;break e;case th:u=11;break e;case nh:u=14;break e;case Xg:u=16,r=null;break e;case Yg:u=22;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Bn(u,n,t,o),t.elementType=e,t.type=r,t.expirationTime=a,t}function kr(e,t,n,r){return e=Bn(7,e,r,t),e.expirationTime=n,e}function oc(e,t,n){return e=Bn(6,e,null,t),e.expirationTime=n,e}function ac(e,t,n){return t=Bn(4,e.children!==null?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gw(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function w_(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,n!==0&&n>=t&&e<=t}function ai(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||n===0)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function I_(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;n!==0&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Af(e,t){var n=e.lastExpiredTime;(n===0||n>t)&&(e.lastExpiredTime=t)}function hl(e,t,n,r){var o=t.current,a=Vn(),u=zs.suspense;a=fi(a,o,u);e:if(n){n=n._reactInternalFiber;t:{if(yi(n)!==n||n.tag!==1)throw Error(z(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(zt(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(z(171))}if(n.tag===1){var m=n.type;if(zt(m)){n=L1(n,m,c);break e}}n=c}else n=Br;return t.context===null?t.context=n:t.pendingContext=n,t=Or(a,u),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),Pr(o,t),Mr(o,a),a}function lc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function km(e,t){e=e.memoizedState,e!==null&&e.dehydrated!==null&&e.retryTime<t&&(e.retryTime=t)}function Mh(e,t){km(e,t),(e=e.alternate)&&km(e,t)}function Lh(e,t,n){n=n!=null&&n.hydrate===!0;var r=new Gw(e,t,n),o=Bn(3,null,null,t===2?7:t===1?3:0);r.current=o,o.stateNode=r,Sh(o),e[fo]=r.current,n&&t!==0&&_A(e,e.nodeType===9?e:e.ownerDocument),this._internalRoot=r}Lh.prototype.render=function(e){hl(e,this._internalRoot,null,null)};Lh.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;hl(null,e,null,function(){t[fo]=null})};function yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vw(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Lh(e,0,t?{hydrate:!0}:void 0)}function kl(e,t,n,r,o){var a=n._reactRootContainer;if(a){var u=a._internalRoot;if(typeof o=="function"){var c=o;o=function(){var _=lc(u);c.call(_)}}hl(t,u,e,o)}else{if(a=n._reactRootContainer=Vw(n,r),u=a._internalRoot,typeof o=="function"){var m=o;o=function(){var _=lc(u);m.call(_)}}v_(function(){hl(t,u,e,o)})}return lc(u)}function Ww(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}d1=function(e){if(e.tag===13){var t=Ia(Vn(),150,100);Mr(e,t),Mh(e,t)}};ah=function(e){e.tag===13&&(Mr(e,3),Mh(e,3))};m1=function(e){if(e.tag===13){var t=Vn();t=fi(t,e,null),Mr(e,t),Mh(e,t)}};Uc=function(e,t,n){switch(t){case"input":if(Wc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=dh(r);if(!o)throw Error(z(90));Zg(r),Wc(r,o)}}}break;case"textarea":Qg(e,n);break;case"select":t=n.value,t!=null&&Yi(e,!!n.multiple,t,!1)}};Yf=x_;Wg=function(e,t,n,r,o){var a=ce;ce|=4;try{return Ur(98,e.bind(null,t,n,r,o))}finally{ce=a,ce===ht&&zn()}};Kf=function(){(ce&(1|bn|$n))===ht&&(kw(),us())};$g=function(e,t){var n=ce;ce|=2;try{return e(t)}finally{ce=n,ce===ht&&zn()}};function k_(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yo(t))throw Error(z(200));return Ww(e,t,null,n)}var $w={Events:[po,pi,dh,Ug,Bc,ns,function(e){sh(e,bA)},Gg,Vg,vl,xl,us,{current:!1}]};(function(e){var t=e.findFiberByHostInstance;return Lw(Ot({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=u1(n),n===null?null:n.stateNode},findFiberByHostInstance:function(n){return t?t(n):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:ho,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$w;Rn.createPortal=k_;Rn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternalFiber;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):Error(z(268,Object.keys(e)));return e=u1(t),e=e===null?null:e.stateNode,e};Rn.flushSync=function(e,t){if((ce&(bn|$n))!==ht)throw Error(z(187));var n=ce;ce|=1;try{return Ur(99,e.bind(null,t))}finally{ce=n,zn()}};Rn.hydrate=function(e,t,n){if(!yo(t))throw Error(z(200));return kl(null,e,t,!0,n)};Rn.render=function(e,t,n){if(!yo(t))throw Error(z(200));return kl(null,e,t,!1,n)};Rn.unmountComponentAtNode=function(e){if(!yo(e))throw Error(z(40));return e._reactRootContainer?(v_(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[fo]=null})}),!0):!1};Rn.unstable_batchedUpdates=x_;Rn.unstable_createPortal=function(e,t){return k_(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Rn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!yo(n))throw Error(z(200));if(e==null||e._reactInternalFiber===void 0)throw Error(z(38));return kl(e,t,n,!1,r)};Rn.version="16.14.0";function b_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b_)}catch(e){console.error(e)}}b_(),Og.exports=Rn;var zw=Og.exports;const qw=_i(zw);var D_={},bl={};bl.byteLength=Xw;bl.toByteArray=Kw;bl.fromByteArray=Qw;var Fn=[],yn=[],jw=typeof Uint8Array<"u"?Uint8Array:Array,uc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Li=0,Hw=uc.length;Li<Hw;++Li)Fn[Li]=uc[Li],yn[uc.charCodeAt(Li)]=Li;yn[45]=62;yn[95]=63;function N_(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function Xw(e){var t=N_(e),n=t[0],r=t[1];return(n+r)*3/4-r}function Yw(e,t,n){return(t+n)*3/4-n}function Kw(e){var t,n=N_(e),r=n[0],o=n[1],a=new jw(Yw(e,r,o)),u=0,c=o>0?r-4:r,m;for(m=0;m<c;m+=4)t=yn[e.charCodeAt(m)]<<18|yn[e.charCodeAt(m+1)]<<12|yn[e.charCodeAt(m+2)]<<6|yn[e.charCodeAt(m+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=t&255;return o===2&&(t=yn[e.charCodeAt(m)]<<2|yn[e.charCodeAt(m+1)]>>4,a[u++]=t&255),o===1&&(t=yn[e.charCodeAt(m)]<<10|yn[e.charCodeAt(m+1)]<<4|yn[e.charCodeAt(m+2)]>>2,a[u++]=t>>8&255,a[u++]=t&255),a}function Zw(e){return Fn[e>>18&63]+Fn[e>>12&63]+Fn[e>>6&63]+Fn[e&63]}function Jw(e,t,n){for(var r,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),o.push(Zw(r));return o.join("")}function Qw(e){for(var t,n=e.length,r=n%3,o=[],a=16383,u=0,c=n-r;u<c;u+=a)o.push(Jw(e,u,u+a>c?c:u+a));return r===1?(t=e[n-1],o.push(Fn[t>>2]+Fn[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],o.push(Fn[t>>10]+Fn[t>>4&63]+Fn[t<<2&63]+"=")),o.join("")}var Bh={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Bh.read=function(e,t,n,r,o){var a,u,c=o*8-r-1,m=(1<<c)-1,_=m>>1,v=-7,R=n?o-1:0,b=n?-1:1,L=e[t+R];for(R+=b,a=L&(1<<-v)-1,L>>=-v,v+=c;v>0;a=a*256+e[t+R],R+=b,v-=8);for(u=a&(1<<-v)-1,a>>=-v,v+=r;v>0;u=u*256+e[t+R],R+=b,v-=8);if(a===0)a=1-_;else{if(a===m)return u?NaN:(L?-1:1)*(1/0);u=u+Math.pow(2,r),a=a-_}return(L?-1:1)*u*Math.pow(2,a-r)};Bh.write=function(e,t,n,r,o,a){var u,c,m,_=a*8-o-1,v=(1<<_)-1,R=v>>1,b=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=r?0:a-1,H=r?1:-1,J=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,u=v):(u=Math.floor(Math.log(t)/Math.LN2),t*(m=Math.pow(2,-u))<1&&(u--,m*=2),u+R>=1?t+=b/m:t+=b*Math.pow(2,1-R),t*m>=2&&(u++,m/=2),u+R>=v?(c=0,u=v):u+R>=1?(c=(t*m-1)*Math.pow(2,o),u=u+R):(c=t*Math.pow(2,R-1)*Math.pow(2,o),u=0));o>=8;e[n+L]=c&255,L+=H,c/=256,o-=8);for(u=u<<o|c,_+=o;_>0;e[n+L]=u&255,L+=H,u/=256,_-=8);e[n+L-H]|=J*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=bl,n=Bh,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=D,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=a(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const g=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(g,h),g.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(g){if(g>o)throw new RangeError('The value "'+g+'" is invalid for option "size"');const h=new Uint8Array(g);return Object.setPrototypeOf(h,c.prototype),h}function c(g,h,p){if(typeof g=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(g)}return m(g,h,p)}c.poolSize=8192;function m(g,h,p){if(typeof g=="string")return b(g,h);if(ArrayBuffer.isView(g))return H(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(St(g,ArrayBuffer)||g&&St(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(St(g,SharedArrayBuffer)||g&&St(g.buffer,SharedArrayBuffer)))return J(g,h,p);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=g.valueOf&&g.valueOf();if(S!=null&&S!==g)return c.from(S,h,p);const w=E(g);if(w)return w;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return c.from(g[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}c.from=function(g,h,p){return m(g,h,p)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function _(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function v(g,h,p){return _(g),g<=0?u(g):h!==void 0?typeof p=="string"?u(g).fill(h,p):u(g).fill(h):u(g)}c.alloc=function(g,h,p){return v(g,h,p)};function R(g){return _(g),u(g<0?0:T(g)|0)}c.allocUnsafe=function(g){return R(g)},c.allocUnsafeSlow=function(g){return R(g)};function b(g,h){if((typeof h!="string"||h==="")&&(h="utf8"),!c.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const p=P(g,h)|0;let S=u(p);const w=S.write(g,h);return w!==p&&(S=S.slice(0,w)),S}function L(g){const h=g.length<0?0:T(g.length)|0,p=u(h);for(let S=0;S<h;S+=1)p[S]=g[S]&255;return p}function H(g){if(St(g,Uint8Array)){const h=new Uint8Array(g);return J(h.buffer,h.byteOffset,h.byteLength)}return L(g)}function J(g,h,p){if(h<0||g.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');let S;return h===void 0&&p===void 0?S=new Uint8Array(g):p===void 0?S=new Uint8Array(g,h):S=new Uint8Array(g,h,p),Object.setPrototypeOf(S,c.prototype),S}function E(g){if(c.isBuffer(g)){const h=T(g.length)|0,p=u(h);return p.length===0||g.copy(p,0,0,h),p}if(g.length!==void 0)return typeof g.length!="number"||dr(g.length)?u(0):L(g);if(g.type==="Buffer"&&Array.isArray(g.data))return L(g.data)}function T(g){if(g>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return g|0}function D(g){return+g!=g&&(g=0),c.alloc(+g)}c.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==c.prototype},c.compare=function(h,p){if(St(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),St(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(h)||!c.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===p)return 0;let S=h.length,w=p.length;for(let N=0,M=Math.min(S,w);N<M;++N)if(h[N]!==p[N]){S=h[N],w=p[N];break}return S<w?-1:w<S?1:0},c.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(h,p){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return c.alloc(0);let S;if(p===void 0)for(p=0,S=0;S<h.length;++S)p+=h[S].length;const w=c.allocUnsafe(p);let N=0;for(S=0;S<h.length;++S){let M=h[S];if(St(M,Uint8Array))N+M.length>w.length?(c.isBuffer(M)||(M=c.from(M)),M.copy(w,N)):Uint8Array.prototype.set.call(w,M,N);else if(c.isBuffer(M))M.copy(w,N);else throw new TypeError('"list" argument must be an Array of Buffers');N+=M.length}return w};function P(g,h){if(c.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||St(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const p=g.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&p===0)return 0;let w=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Xt(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return pr(g).length;default:if(w)return S?-1:Xt(g).length;h=(""+h).toLowerCase(),w=!0}}c.byteLength=P;function q(g,h,p){let S=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(g||(g="utf8");;)switch(g){case"hex":return Cn(this,h,p);case"utf8":case"utf-8":return se(this,h,p);case"ascii":return le(this,h,p);case"latin1":case"binary":return st(this,h,p);case"base64":return Ue(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ht(this,h,p);default:if(S)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),S=!0}}c.prototype._isBuffer=!0;function B(g,h,p){const S=g[h];g[h]=g[p],g[p]=S}c.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<h;p+=2)B(this,p,p+1);return this},c.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<h;p+=4)B(this,p,p+3),B(this,p+1,p+2);return this},c.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<h;p+=8)B(this,p,p+7),B(this,p+1,p+6),B(this,p+2,p+5),B(this,p+3,p+4);return this},c.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?se(this,0,h):q.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(h){if(!c.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:c.compare(this,h)===0},c.prototype.inspect=function(){let h="";const p=e.INSPECT_MAX_BYTES;return h=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(h+=" ... "),"<Buffer "+h+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(h,p,S,w,N){if(St(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),!c.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(p===void 0&&(p=0),S===void 0&&(S=h?h.length:0),w===void 0&&(w=0),N===void 0&&(N=this.length),p<0||S>h.length||w<0||N>this.length)throw new RangeError("out of range index");if(w>=N&&p>=S)return 0;if(w>=N)return-1;if(p>=S)return 1;if(p>>>=0,S>>>=0,w>>>=0,N>>>=0,this===h)return 0;let M=N-w,de=S-p;const Me=Math.min(M,de),Ne=this.slice(w,N),Le=h.slice(p,S);for(let ke=0;ke<Me;++ke)if(Ne[ke]!==Le[ke]){M=Ne[ke],de=Le[ke];break}return M<de?-1:de<M?1:0};function Y(g,h,p,S,w){if(g.length===0)return-1;if(typeof p=="string"?(S=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,dr(p)&&(p=w?0:g.length-1),p<0&&(p=g.length+p),p>=g.length){if(w)return-1;p=g.length-1}else if(p<0)if(w)p=0;else return-1;if(typeof h=="string"&&(h=c.from(h,S)),c.isBuffer(h))return h.length===0?-1:ne(g,h,p,S,w);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?w?Uint8Array.prototype.indexOf.call(g,h,p):Uint8Array.prototype.lastIndexOf.call(g,h,p):ne(g,[h],p,S,w);throw new TypeError("val must be string, number or Buffer")}function ne(g,h,p,S,w){let N=1,M=g.length,de=h.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(g.length<2||h.length<2)return-1;N=2,M/=2,de/=2,p/=2}function Me(Le,ke){return N===1?Le[ke]:Le.readUInt16BE(ke*N)}let Ne;if(w){let Le=-1;for(Ne=p;Ne<M;Ne++)if(Me(g,Ne)===Me(h,Le===-1?0:Ne-Le)){if(Le===-1&&(Le=Ne),Ne-Le+1===de)return Le*N}else Le!==-1&&(Ne-=Ne-Le),Le=-1}else for(p+de>M&&(p=M-de),Ne=p;Ne>=0;Ne--){let Le=!0;for(let ke=0;ke<de;ke++)if(Me(g,Ne+ke)!==Me(h,ke)){Le=!1;break}if(Le)return Ne}return-1}c.prototype.includes=function(h,p,S){return this.indexOf(h,p,S)!==-1},c.prototype.indexOf=function(h,p,S){return Y(this,h,p,S,!0)},c.prototype.lastIndexOf=function(h,p,S){return Y(this,h,p,S,!1)};function ue(g,h,p,S){p=Number(p)||0;const w=g.length-p;S?(S=Number(S),S>w&&(S=w)):S=w;const N=h.length;S>N/2&&(S=N/2);let M;for(M=0;M<S;++M){const de=parseInt(h.substr(M*2,2),16);if(dr(de))return M;g[p+M]=de}return M}function re(g,h,p,S){return vt(Xt(h,g.length-p),g,p,S)}function tt(g,h,p,S){return vt(xo(h),g,p,S)}function it(g,h,p,S){return vt(pr(h),g,p,S)}function xt(g,h,p,S){return vt(Nl(h,g.length-p),g,p,S)}c.prototype.write=function(h,p,S,w){if(p===void 0)w="utf8",S=this.length,p=0;else if(S===void 0&&typeof p=="string")w=p,S=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(S)?(S=S>>>0,w===void 0&&(w="utf8")):(w=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const N=this.length-p;if((S===void 0||S>N)&&(S=N),h.length>0&&(S<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");w||(w="utf8");let M=!1;for(;;)switch(w){case"hex":return ue(this,h,p,S);case"utf8":case"utf-8":return re(this,h,p,S);case"ascii":case"latin1":case"binary":return tt(this,h,p,S);case"base64":return it(this,h,p,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,h,p,S);default:if(M)throw new TypeError("Unknown encoding: "+w);w=(""+w).toLowerCase(),M=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ue(g,h,p){return h===0&&p===g.length?t.fromByteArray(g):t.fromByteArray(g.slice(h,p))}function se(g,h,p){p=Math.min(g.length,p);const S=[];let w=h;for(;w<p;){const N=g[w];let M=null,de=N>239?4:N>223?3:N>191?2:1;if(w+de<=p){let Me,Ne,Le,ke;switch(de){case 1:N<128&&(M=N);break;case 2:Me=g[w+1],(Me&192)===128&&(ke=(N&31)<<6|Me&63,ke>127&&(M=ke));break;case 3:Me=g[w+1],Ne=g[w+2],(Me&192)===128&&(Ne&192)===128&&(ke=(N&15)<<12|(Me&63)<<6|Ne&63,ke>2047&&(ke<55296||ke>57343)&&(M=ke));break;case 4:Me=g[w+1],Ne=g[w+2],Le=g[w+3],(Me&192)===128&&(Ne&192)===128&&(Le&192)===128&&(ke=(N&15)<<18|(Me&63)<<12|(Ne&63)<<6|Le&63,ke>65535&&ke<1114112&&(M=ke))}}M===null?(M=65533,de=1):M>65535&&(M-=65536,S.push(M>>>10&1023|55296),M=56320|M&1023),S.push(M),w+=de}return nt(S)}const Ae=4096;function nt(g){const h=g.length;if(h<=Ae)return String.fromCharCode.apply(String,g);let p="",S=0;for(;S<h;)p+=String.fromCharCode.apply(String,g.slice(S,S+=Ae));return p}function le(g,h,p){let S="";p=Math.min(g.length,p);for(let w=h;w<p;++w)S+=String.fromCharCode(g[w]&127);return S}function st(g,h,p){let S="";p=Math.min(g.length,p);for(let w=h;w<p;++w)S+=String.fromCharCode(g[w]);return S}function Cn(g,h,p){const S=g.length;(!h||h<0)&&(h=0),(!p||p<0||p>S)&&(p=S);let w="";for(let N=h;N<p;++N)w+=Ol[g[N]];return w}function Ht(g,h,p){const S=g.slice(h,p);let w="";for(let N=0;N<S.length-1;N+=2)w+=String.fromCharCode(S[N]+S[N+1]*256);return w}c.prototype.slice=function(h,p){const S=this.length;h=~~h,p=p===void 0?S:~~p,h<0?(h+=S,h<0&&(h=0)):h>S&&(h=S),p<0?(p+=S,p<0&&(p=0)):p>S&&(p=S),p<h&&(p=h);const w=this.subarray(h,p);return Object.setPrototypeOf(w,c.prototype),w};function xe(g,h,p){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+h>p)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(h,p,S){h=h>>>0,p=p>>>0,S||xe(h,p,this.length);let w=this[h],N=1,M=0;for(;++M<p&&(N*=256);)w+=this[h+M]*N;return w},c.prototype.readUintBE=c.prototype.readUIntBE=function(h,p,S){h=h>>>0,p=p>>>0,S||xe(h,p,this.length);let w=this[h+--p],N=1;for(;p>0&&(N*=256);)w+=this[h+--p]*N;return w},c.prototype.readUint8=c.prototype.readUInt8=function(h,p){return h=h>>>0,p||xe(h,1,this.length),this[h]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(h,p){return h=h>>>0,p||xe(h,2,this.length),this[h]|this[h+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(h,p){return h=h>>>0,p||xe(h,2,this.length),this[h]<<8|this[h+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(h,p){return h=h>>>0,p||xe(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(h,p){return h=h>>>0,p||xe(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},c.prototype.readBigUInt64LE=Lt(function(h){h=h>>>0,jn(h,"offset");const p=this[h],S=this[h+7];(p===void 0||S===void 0)&&dt(h,this.length-8);const w=p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,N=this[++h]+this[++h]*2**8+this[++h]*2**16+S*2**24;return BigInt(w)+(BigInt(N)<<BigInt(32))}),c.prototype.readBigUInt64BE=Lt(function(h){h=h>>>0,jn(h,"offset");const p=this[h],S=this[h+7];(p===void 0||S===void 0)&&dt(h,this.length-8);const w=p*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],N=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+S;return(BigInt(w)<<BigInt(32))+BigInt(N)}),c.prototype.readIntLE=function(h,p,S){h=h>>>0,p=p>>>0,S||xe(h,p,this.length);let w=this[h],N=1,M=0;for(;++M<p&&(N*=256);)w+=this[h+M]*N;return N*=128,w>=N&&(w-=Math.pow(2,8*p)),w},c.prototype.readIntBE=function(h,p,S){h=h>>>0,p=p>>>0,S||xe(h,p,this.length);let w=p,N=1,M=this[h+--w];for(;w>0&&(N*=256);)M+=this[h+--w]*N;return N*=128,M>=N&&(M-=Math.pow(2,8*p)),M},c.prototype.readInt8=function(h,p){return h=h>>>0,p||xe(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},c.prototype.readInt16LE=function(h,p){h=h>>>0,p||xe(h,2,this.length);const S=this[h]|this[h+1]<<8;return S&32768?S|4294901760:S},c.prototype.readInt16BE=function(h,p){h=h>>>0,p||xe(h,2,this.length);const S=this[h+1]|this[h]<<8;return S&32768?S|4294901760:S},c.prototype.readInt32LE=function(h,p){return h=h>>>0,p||xe(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},c.prototype.readInt32BE=function(h,p){return h=h>>>0,p||xe(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},c.prototype.readBigInt64LE=Lt(function(h){h=h>>>0,jn(h,"offset");const p=this[h],S=this[h+7];(p===void 0||S===void 0)&&dt(h,this.length-8);const w=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(S<<24);return(BigInt(w)<<BigInt(32))+BigInt(p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),c.prototype.readBigInt64BE=Lt(function(h){h=h>>>0,jn(h,"offset");const p=this[h],S=this[h+7];(p===void 0||S===void 0)&&dt(h,this.length-8);const w=(p<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(w)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+S)}),c.prototype.readFloatLE=function(h,p){return h=h>>>0,p||xe(h,4,this.length),n.read(this,h,!0,23,4)},c.prototype.readFloatBE=function(h,p){return h=h>>>0,p||xe(h,4,this.length),n.read(this,h,!1,23,4)},c.prototype.readDoubleLE=function(h,p){return h=h>>>0,p||xe(h,8,this.length),n.read(this,h,!0,52,8)},c.prototype.readDoubleBE=function(h,p){return h=h>>>0,p||xe(h,8,this.length),n.read(this,h,!1,52,8)};function Ze(g,h,p,S,w,N){if(!c.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>w||h<N)throw new RangeError('"value" argument is out of bounds');if(p+S>g.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(h,p,S,w){if(h=+h,p=p>>>0,S=S>>>0,!w){const de=Math.pow(2,8*S)-1;Ze(this,h,p,S,de,0)}let N=1,M=0;for(this[p]=h&255;++M<S&&(N*=256);)this[p+M]=h/N&255;return p+S},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(h,p,S,w){if(h=+h,p=p>>>0,S=S>>>0,!w){const de=Math.pow(2,8*S)-1;Ze(this,h,p,S,de,0)}let N=S-1,M=1;for(this[p+N]=h&255;--N>=0&&(M*=256);)this[p+N]=h/M&255;return p+S},c.prototype.writeUint8=c.prototype.writeUInt8=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,1,255,0),this[p]=h&255,p+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,2,65535,0),this[p]=h&255,this[p+1]=h>>>8,p+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,2,65535,0),this[p]=h>>>8,this[p+1]=h&255,p+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,4,4294967295,0),this[p+3]=h>>>24,this[p+2]=h>>>16,this[p+1]=h>>>8,this[p]=h&255,p+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,4,4294967295,0),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4};function Ri(g,h,p,S,w){Mt(h,S,w,g,p,7);let N=Number(h&BigInt(4294967295));g[p++]=N,N=N>>8,g[p++]=N,N=N>>8,g[p++]=N,N=N>>8,g[p++]=N;let M=Number(h>>BigInt(32)&BigInt(4294967295));return g[p++]=M,M=M>>8,g[p++]=M,M=M>>8,g[p++]=M,M=M>>8,g[p++]=M,p}function j(g,h,p,S,w){Mt(h,S,w,g,p,7);let N=Number(h&BigInt(4294967295));g[p+7]=N,N=N>>8,g[p+6]=N,N=N>>8,g[p+5]=N,N=N>>8,g[p+4]=N;let M=Number(h>>BigInt(32)&BigInt(4294967295));return g[p+3]=M,M=M>>8,g[p+2]=M,M=M>>8,g[p+1]=M,M=M>>8,g[p]=M,p+8}c.prototype.writeBigUInt64LE=Lt(function(h,p=0){return Ri(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Lt(function(h,p=0){return j(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(h,p,S,w){if(h=+h,p=p>>>0,!w){const Me=Math.pow(2,8*S-1);Ze(this,h,p,S,Me-1,-Me)}let N=0,M=1,de=0;for(this[p]=h&255;++N<S&&(M*=256);)h<0&&de===0&&this[p+N-1]!==0&&(de=1),this[p+N]=(h/M>>0)-de&255;return p+S},c.prototype.writeIntBE=function(h,p,S,w){if(h=+h,p=p>>>0,!w){const Me=Math.pow(2,8*S-1);Ze(this,h,p,S,Me-1,-Me)}let N=S-1,M=1,de=0;for(this[p+N]=h&255;--N>=0&&(M*=256);)h<0&&de===0&&this[p+N+1]!==0&&(de=1),this[p+N]=(h/M>>0)-de&255;return p+S},c.prototype.writeInt8=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,1,127,-128),h<0&&(h=255+h+1),this[p]=h&255,p+1},c.prototype.writeInt16LE=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,2,32767,-32768),this[p]=h&255,this[p+1]=h>>>8,p+2},c.prototype.writeInt16BE=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,2,32767,-32768),this[p]=h>>>8,this[p+1]=h&255,p+2},c.prototype.writeInt32LE=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,4,2147483647,-2147483648),this[p]=h&255,this[p+1]=h>>>8,this[p+2]=h>>>16,this[p+3]=h>>>24,p+4},c.prototype.writeInt32BE=function(h,p,S){return h=+h,p=p>>>0,S||Ze(this,h,p,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4},c.prototype.writeBigInt64LE=Lt(function(h,p=0){return Ri(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Lt(function(h,p=0){return j(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(g,h,p,S,w,N){if(p+S>g.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function pe(g,h,p,S,w){return h=+h,p=p>>>0,w||Q(g,h,p,4),n.write(g,h,p,S,23,4),p+4}c.prototype.writeFloatLE=function(h,p,S){return pe(this,h,p,!0,S)},c.prototype.writeFloatBE=function(h,p,S){return pe(this,h,p,!1,S)};function Fe(g,h,p,S,w){return h=+h,p=p>>>0,w||Q(g,h,p,8),n.write(g,h,p,S,52,8),p+8}c.prototype.writeDoubleLE=function(h,p,S){return Fe(this,h,p,!0,S)},c.prototype.writeDoubleBE=function(h,p,S){return Fe(this,h,p,!1,S)},c.prototype.copy=function(h,p,S,w){if(!c.isBuffer(h))throw new TypeError("argument should be a Buffer");if(S||(S=0),!w&&w!==0&&(w=this.length),p>=h.length&&(p=h.length),p||(p=0),w>0&&w<S&&(w=S),w===S||h.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("sourceEnd out of bounds");w>this.length&&(w=this.length),h.length-p<w-S&&(w=h.length-p+S);const N=w-S;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,S,w):Uint8Array.prototype.set.call(h,this.subarray(S,w),p),N},c.prototype.fill=function(h,p,S,w){if(typeof h=="string"){if(typeof p=="string"?(w=p,p=0,S=this.length):typeof S=="string"&&(w=S,S=this.length),w!==void 0&&typeof w!="string")throw new TypeError("encoding must be a string");if(typeof w=="string"&&!c.isEncoding(w))throw new TypeError("Unknown encoding: "+w);if(h.length===1){const M=h.charCodeAt(0);(w==="utf8"&&M<128||w==="latin1")&&(h=M)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(p<0||this.length<p||this.length<S)throw new RangeError("Out of range index");if(S<=p)return this;p=p>>>0,S=S===void 0?this.length:S>>>0,h||(h=0);let N;if(typeof h=="number")for(N=p;N<S;++N)this[N]=h;else{const M=c.isBuffer(h)?h:c.from(h,w),de=M.length;if(de===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(N=0;N<S-p;++N)this[N+p]=M[N%de]}return this};const Te={};function pt(g,h,p){Te[g]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(w){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:w,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}pt("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pt("ERR_INVALID_ARG_TYPE",function(g,h){return`The "${g}" argument must be of type number. Received type ${typeof h}`},TypeError),pt("ERR_OUT_OF_RANGE",function(g,h,p){let S=`The value of "${g}" is out of range.`,w=p;return Number.isInteger(p)&&Math.abs(p)>2**32?w=an(String(p)):typeof p=="bigint"&&(w=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(w=an(w)),w+="n"),S+=` It must be ${h}. Received ${w}`,S},RangeError);function an(g){let h="",p=g.length;const S=g[0]==="-"?1:0;for(;p>=S+4;p-=3)h=`_${g.slice(p-3,p)}${h}`;return`${g.slice(0,p)}${h}`}function ln(g,h,p){jn(h,"offset"),(g[h]===void 0||g[h+p]===void 0)&&dt(h,g.length-(p+1))}function Mt(g,h,p,S,w,N){if(g>p||g<h){const M=typeof h=="bigint"?"n":"";let de;throw N>3?h===0||h===BigInt(0)?de=`>= 0${M} and < 2${M} ** ${(N+1)*8}${M}`:de=`>= -(2${M} ** ${(N+1)*8-1}${M}) and < 2 ** ${(N+1)*8-1}${M}`:de=`>= ${h}${M} and <= ${p}${M}`,new Te.ERR_OUT_OF_RANGE("value",de,g)}ln(S,w,N)}function jn(g,h){if(typeof g!="number")throw new Te.ERR_INVALID_ARG_TYPE(h,"number",g)}function dt(g,h,p){throw Math.floor(g)!==g?(jn(g,p),new Te.ERR_OUT_OF_RANGE(p||"offset","an integer",g)):h<0?new Te.ERR_BUFFER_OUT_OF_BOUNDS:new Te.ERR_OUT_OF_RANGE(p||"offset",`>= ${p?1:0} and <= ${h}`,g)}const Wr=/[^+/0-9A-Za-z-_]/g;function Dl(g){if(g=g.split("=")[0],g=g.trim().replace(Wr,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Xt(g,h){h=h||1/0;let p;const S=g.length;let w=null;const N=[];for(let M=0;M<S;++M){if(p=g.charCodeAt(M),p>55295&&p<57344){if(!w){if(p>56319){(h-=3)>-1&&N.push(239,191,189);continue}else if(M+1===S){(h-=3)>-1&&N.push(239,191,189);continue}w=p;continue}if(p<56320){(h-=3)>-1&&N.push(239,191,189),w=p;continue}p=(w-55296<<10|p-56320)+65536}else w&&(h-=3)>-1&&N.push(239,191,189);if(w=null,p<128){if((h-=1)<0)break;N.push(p)}else if(p<2048){if((h-=2)<0)break;N.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;N.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;N.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return N}function xo(g){const h=[];for(let p=0;p<g.length;++p)h.push(g.charCodeAt(p)&255);return h}function Nl(g,h){let p,S,w;const N=[];for(let M=0;M<g.length&&!((h-=2)<0);++M)p=g.charCodeAt(M),S=p>>8,w=p%256,N.push(w),N.push(S);return N}function pr(g){return t.toByteArray(Dl(g))}function vt(g,h,p,S){let w;for(w=0;w<S&&!(w+p>=h.length||w>=g.length);++w)h[w+p]=g[w];return w}function St(g,h){return g instanceof h||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===h.name}function dr(g){return g!==g}const Ol=function(){const g="0123456789abcdef",h=new Array(256);for(let p=0;p<16;++p){const S=p*16;for(let w=0;w<16;++w)h[S+w]=g[p]+g[w]}return h}();function Lt(g){return typeof BigInt>"u"?Pl:g}function Pl(){throw new Error("BigInt not supported")}})(D_);const eI="_screen_1ycb4_1",tI={screen:eI},Os=256,ya=240,bm=4278190080;class nI extends Ee.Component{constructor(t){super(t),this.setBuffer=this.setBuffer.bind(this),this.writeBuffer=this.writeBuffer.bind(this)}render(){return W.jsx("canvas",{className:tI.screen,width:Os,height:ya,ref:t=>{t&&this._initCanvas(t)}})}setBuffer(t){for(let n=0;n<ya;++n)for(let r=0;r<Os;++r){const o=n*Os+r;this.buf32[o]=bm|t[o]}}writeBuffer(){this.imageData.data.set(this.buf8),this.context.putImageData(this.imageData,0,0)}_initCanvas(t){this.context=t.getContext("2d"),this.imageData=this.context.getImageData(0,0,Os,ya),this.context.fillStyle="black",this.context.fillRect(0,0,Os,ya),this.buf=new ArrayBuffer(this.imageData.data.length),this.buf8=new Uint8ClampedArray(this.buf),this.buf32=new Uint32Array(this.buf);for(let n=0;n<this.buf32.length;++n)this.buf32[n]=bm}}const rI=60.098;class iI{constructor(t,n=rI){Oe(this,"_run",()=>{if(!this._isRunning)return;this._frameId=requestAnimationFrame(this._run);const t=Date.now(),n=t-this._lastTime;n>this._interval&&(this._lastTime=t-n%this._interval,this.onFrame())});this.onFrame=t,this._fps=n,this._interval=1e3/n,this._lastTime=Date.now(),this._startTime=this._lastTime,this._isRunning=!1}start(){this._isRunning=!0,this._run()}stop(){this._isRunning=!1,cancelAnimationFrame(this._frameId)}}const sI="/nestation/assets/audioWorklet-DK6lmU3E.js";var O_={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(m,_,v){this.fn=m,this.context=_,this.once=v||!1}function a(m,_,v,R,b){if(typeof v!="function")throw new TypeError("The listener must be a function");var L=new o(v,R||m,b),H=n?n+_:_;return m._events[H]?m._events[H].fn?m._events[H]=[m._events[H],L]:m._events[H].push(L):(m._events[H]=L,m._eventsCount++),m}function u(m,_){--m._eventsCount===0?m._events=new r:delete m._events[_]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var _=[],v,R;if(this._eventsCount===0)return _;for(R in v=this._events)t.call(v,R)&&_.push(n?R.slice(1):R);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(v)):_},c.prototype.listeners=function(_){var v=n?n+_:_,R=this._events[v];if(!R)return[];if(R.fn)return[R.fn];for(var b=0,L=R.length,H=new Array(L);b<L;b++)H[b]=R[b].fn;return H},c.prototype.listenerCount=function(_){var v=n?n+_:_,R=this._events[v];return R?R.fn?1:R.length:0},c.prototype.emit=function(_,v,R,b,L,H){var J=n?n+_:_;if(!this._events[J])return!1;var E=this._events[J],T=arguments.length,D,P;if(E.fn){switch(E.once&&this.removeListener(_,E.fn,void 0,!0),T){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,v),!0;case 3:return E.fn.call(E.context,v,R),!0;case 4:return E.fn.call(E.context,v,R,b),!0;case 5:return E.fn.call(E.context,v,R,b,L),!0;case 6:return E.fn.call(E.context,v,R,b,L,H),!0}for(P=1,D=new Array(T-1);P<T;P++)D[P-1]=arguments[P];E.fn.apply(E.context,D)}else{var q=E.length,B;for(P=0;P<q;P++)switch(E[P].once&&this.removeListener(_,E[P].fn,void 0,!0),T){case 1:E[P].fn.call(E[P].context);break;case 2:E[P].fn.call(E[P].context,v);break;case 3:E[P].fn.call(E[P].context,v,R);break;case 4:E[P].fn.call(E[P].context,v,R,b);break;default:if(!D)for(B=1,D=new Array(T-1);B<T;B++)D[B-1]=arguments[B];E[P].fn.apply(E[P].context,D)}}return!0},c.prototype.on=function(_,v,R){return a(this,_,v,R,!1)},c.prototype.once=function(_,v,R){return a(this,_,v,R,!0)},c.prototype.removeListener=function(_,v,R,b){var L=n?n+_:_;if(!this._events[L])return this;if(!v)return u(this,L),this;var H=this._events[L];if(H.fn)H.fn===v&&(!b||H.once)&&(!R||H.context===R)&&u(this,L);else{for(var J=0,E=[],T=H.length;J<T;J++)(H[J].fn!==v||b&&!H[J].once||R&&H[J].context!==R)&&E.push(H[J]);E.length?this._events[L]=E.length===1?E[0]:E:u(this,L)}return this},c.prototype.removeAllListeners=function(_){var v;return _?(v=n?n+_:_,this._events[v]&&u(this,v)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c})(O_);var oI=O_.exports;const Uh=_i(oI),ve=new Uh,aI="player-worklet",lI=1024,uI=44100,cI=1;class fI{constructor(t=1){Oe(this,"writeSample",t=>{this.playerWorklet&&this.playerWorklet.port.postMessage(t)});Oe(this,"setVolume",t=>{this.gainNode&&(this.gainNode.gain.value=t)});this.initialVolume=t}async start(){if(!this._audioCtx&&window.AudioContext){if(this.bufferSize=0,this._audioCtx=new window.AudioContext({sampleRate:uI}),this.gainNode=this._audioCtx.createGain(),this.gainNode.gain.value=this.initialVolume,this.gainNode.connect(this._audioCtx.destination),ve.on("volume",t=>this.gainNode&&(this.gainNode.gain.value=t)),await this._audioCtx.audioWorklet.addModule(sI),this._audioCtx==null){this.stop();return}this.playerWorklet=new AudioWorkletNode(this._audioCtx,aI,{outputChannelCount:[cI],processorOptions:{bufferSize:lI}}),this.playerWorklet.connect(this.gainNode),this.playerWorklet.port.onmessage=t=>{this.bufferSize=t.data}}}stop(){this.playerWorklet&&(this.playerWorklet.port.close(),this.playerWorklet.disconnect(),this.playerWorklet=null),this._audioCtx&&(this._audioCtx.close().catch(console.error),this._audioCtx=null),ve.removeListener("volume")}}var qn=function(){this.state=new Array(8);for(var e=0;e<this.state.length;e++)this.state[e]=64};qn.BUTTON_A=0;qn.BUTTON_B=1;qn.BUTTON_SELECT=2;qn.BUTTON_START=3;qn.BUTTON_UP=4;qn.BUTTON_DOWN=5;qn.BUTTON_LEFT=6;qn.BUTTON_RIGHT=7;qn.prototype={buttonDown:function(e){this.state[e]=65},buttonUp:function(e){this.state[e]=64}};var P_=qn,Gh={copyArrayElements:function(e,t,n,r,o){for(var a=0;a<o;++a)n[r+a]=e[t+a]},copyArray:function(e){return e.slice(0)},fromJSON:function(e,t){for(var n=0;n<e.JSON_PROPERTIES.length;n++)e[e.JSON_PROPERTIES[n]]=t[e.JSON_PROPERTIES[n]]},toJSON:function(e){for(var t={},n=0;n<e.JSON_PROPERTIES.length;n++)t[e.JSON_PROPERTIES[n]]=e[e.JSON_PROPERTIES[n]];return t}},Dm=Gh,F_=function(e){this.nes=e,this.mem=null,this.REG_ACC=null,this.REG_X=null,this.REG_Y=null,this.REG_SP=null,this.REG_PC=null,this.REG_PC_NEW=null,this.REG_STATUS=null,this.F_CARRY=null,this.F_DECIMAL=null,this.F_INTERRUPT=null,this.F_INTERRUPT_NEW=null,this.F_OVERFLOW=null,this.F_SIGN=null,this.F_ZERO=null,this.F_NOTUSED=null,this.F_NOTUSED_NEW=null,this.F_BRK=null,this.F_BRK_NEW=null,this.opdata=null,this.cyclesToHalt=null,this.crash=null,this.irqRequested=null,this.irqType=null,this.reset()};F_.prototype={IRQ_NORMAL:0,IRQ_NMI:1,IRQ_RESET:2,reset:function(){this.mem=new Array(65536);for(var e=0;e<8192;e++)this.mem[e]=255;for(var t=0;t<4;t++){var n=t*2048;this.mem[n+8]=247,this.mem[n+9]=239,this.mem[n+10]=223,this.mem[n+15]=191}for(var r=8193;r<this.mem.length;r++)this.mem[r]=0;this.REG_ACC=0,this.REG_X=0,this.REG_Y=0,this.REG_SP=511,this.REG_PC=32767,this.REG_PC_NEW=32767,this.REG_STATUS=40,this.setStatus(40),this.F_CARRY=0,this.F_DECIMAL=0,this.F_INTERRUPT=1,this.F_INTERRUPT_NEW=1,this.F_OVERFLOW=0,this.F_SIGN=0,this.F_ZERO=1,this.F_NOTUSED=1,this.F_NOTUSED_NEW=1,this.F_BRK=1,this.F_BRK_NEW=1,this.opdata=new M_().opdata,this.cyclesToHalt=0,this.crash=!1,this.irqRequested=!1,this.irqType=null},emulate:function(){var e,t;if(this.irqRequested){switch(e=this.F_CARRY|(this.F_ZERO===0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7,this.REG_PC_NEW=this.REG_PC,this.F_INTERRUPT_NEW=this.F_INTERRUPT,this.irqType){case 0:{if(this.F_INTERRUPT!==0)break;this.doIrq(e);break}case 1:{this.doNonMaskableInterrupt(e);break}case 2:{this.doResetInterrupt();break}}this.REG_PC=this.REG_PC_NEW,this.F_INTERRUPT=this.F_INTERRUPT_NEW,this.F_BRK=this.F_BRK_NEW,this.irqRequested=!1}var n=this.opdata[this.nes.mmap.load(this.REG_PC+1)],r=n>>24,o=0,a=n>>8&255,u=this.REG_PC;this.REG_PC+=n>>16&255;var c=0;switch(a){case 0:{c=this.load(u+2);break}case 1:{c=this.load(u+2),c<128?c+=this.REG_PC:c+=this.REG_PC-256;break}case 2:break;case 3:{c=this.load16bit(u+2);break}case 4:{c=this.REG_ACC;break}case 5:{c=this.REG_PC;break}case 6:{c=this.load(u+2)+this.REG_X&255;break}case 7:{c=this.load(u+2)+this.REG_Y&255;break}case 8:{c=this.load16bit(u+2),(c&65280)!==(c+this.REG_X&65280)&&(o=1),c+=this.REG_X;break}case 9:{c=this.load16bit(u+2),(c&65280)!==(c+this.REG_Y&65280)&&(o=1),c+=this.REG_Y;break}case 10:{c=this.load(u+2),(c&65280)!==(c+this.REG_X&65280)&&(o=1),c+=this.REG_X,c&=255,c=this.load16bit(c);break}case 11:{c=this.load16bit(this.load(u+2)),(c&65280)!==(c+this.REG_Y&65280)&&(o=1),c+=this.REG_Y;break}case 12:{c=this.load16bit(u+2),c<8191?c=this.mem[c]+(this.mem[c&65280|(c&255)+1&255]<<8):c=this.nes.mmap.load(c)+(this.nes.mmap.load(c&65280|(c&255)+1&255)<<8);break}}switch(c&=65535,n&255){case 0:{e=this.REG_ACC+this.load(c)+this.F_CARRY,!((this.REG_ACC^this.load(c))&128)&&(this.REG_ACC^e)&128?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=e>255?1:0,this.F_SIGN=e>>7&1,this.F_ZERO=e&255,this.REG_ACC=e&255,r+=o;break}case 1:{this.REG_ACC=this.REG_ACC&this.load(c),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,a!==11&&(r+=o);break}case 2:{a===4?(this.F_CARRY=this.REG_ACC>>7&1,this.REG_ACC=this.REG_ACC<<1&255,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC):(e=this.load(c),this.F_CARRY=e>>7&1,e=e<<1&255,this.F_SIGN=e>>7&1,this.F_ZERO=e,this.write(c,e));break}case 3:{this.F_CARRY===0&&(r+=(u&65280)!==(c&65280)?2:1,this.REG_PC=c);break}case 4:{this.F_CARRY===1&&(r+=(u&65280)!==(c&65280)?2:1,this.REG_PC=c);break}case 5:{this.F_ZERO===0&&(r+=(u&65280)!==(c&65280)?2:1,this.REG_PC=c);break}case 6:{e=this.load(c),this.F_SIGN=e>>7&1,this.F_OVERFLOW=e>>6&1,e&=this.REG_ACC,this.F_ZERO=e;break}case 7:{this.F_SIGN===1&&(r++,this.REG_PC=c);break}case 8:{this.F_ZERO!==0&&(r+=(u&65280)!==(c&65280)?2:1,this.REG_PC=c);break}case 9:{this.F_SIGN===0&&(r+=(u&65280)!==(c&65280)?2:1,this.REG_PC=c);break}case 10:{this.REG_PC+=2,this.push(this.REG_PC>>8&255),this.push(this.REG_PC&255),this.F_BRK=1,this.push(this.F_CARRY|(this.F_ZERO===0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7),this.F_INTERRUPT=1,this.REG_PC=this.load16bit(65534),this.REG_PC--;break}case 11:{this.F_OVERFLOW===0&&(r+=(u&65280)!==(c&65280)?2:1,this.REG_PC=c);break}case 12:{this.F_OVERFLOW===1&&(r+=(u&65280)!==(c&65280)?2:1,this.REG_PC=c);break}case 13:{this.F_CARRY=0;break}case 14:{this.F_DECIMAL=0;break}case 15:{this.F_INTERRUPT=0;break}case 16:{this.F_OVERFLOW=0;break}case 17:{e=this.REG_ACC-this.load(c),this.F_CARRY=e>=0?1:0,this.F_SIGN=e>>7&1,this.F_ZERO=e&255,r+=o;break}case 18:{e=this.REG_X-this.load(c),this.F_CARRY=e>=0?1:0,this.F_SIGN=e>>7&1,this.F_ZERO=e&255;break}case 19:{e=this.REG_Y-this.load(c),this.F_CARRY=e>=0?1:0,this.F_SIGN=e>>7&1,this.F_ZERO=e&255;break}case 20:{e=this.load(c)-1&255,this.F_SIGN=e>>7&1,this.F_ZERO=e,this.write(c,e);break}case 21:{this.REG_X=this.REG_X-1&255,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break}case 22:{this.REG_Y=this.REG_Y-1&255,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break}case 23:{this.REG_ACC=(this.load(c)^this.REG_ACC)&255,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,r+=o;break}case 24:{e=this.load(c)+1&255,this.F_SIGN=e>>7&1,this.F_ZERO=e,this.write(c,e&255);break}case 25:{this.REG_X=this.REG_X+1&255,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break}case 26:{this.REG_Y++,this.REG_Y&=255,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break}case 27:{this.REG_PC=c-1;break}case 28:{this.push(this.REG_PC>>8&255),this.push(this.REG_PC&255),this.REG_PC=c-1;break}case 29:{this.REG_ACC=this.load(c),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,r+=o;break}case 30:{this.REG_X=this.load(c),this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X,r+=o;break}case 31:{this.REG_Y=this.load(c),this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y,r+=o;break}case 32:{a===4?(e=this.REG_ACC&255,this.F_CARRY=e&1,e>>=1,this.REG_ACC=e):(e=this.load(c)&255,this.F_CARRY=e&1,e>>=1,this.write(c,e)),this.F_SIGN=0,this.F_ZERO=e;break}case 33:break;case 34:{e=(this.load(c)|this.REG_ACC)&255,this.F_SIGN=e>>7&1,this.F_ZERO=e,this.REG_ACC=e,a!==11&&(r+=o);break}case 35:{this.push(this.REG_ACC);break}case 36:{this.F_BRK=1,this.push(this.F_CARRY|(this.F_ZERO===0?1:0)<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7);break}case 37:{this.REG_ACC=this.pull(),this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break}case 38:{e=this.pull(),this.F_CARRY=e&1,this.F_ZERO=(e>>1&1)===1?0:1,this.F_INTERRUPT=e>>2&1,this.F_DECIMAL=e>>3&1,this.F_BRK=e>>4&1,this.F_NOTUSED=e>>5&1,this.F_OVERFLOW=e>>6&1,this.F_SIGN=e>>7&1,this.F_NOTUSED=1;break}case 39:{a===4?(e=this.REG_ACC,t=this.F_CARRY,this.F_CARRY=e>>7&1,e=(e<<1&255)+t,this.REG_ACC=e):(e=this.load(c),t=this.F_CARRY,this.F_CARRY=e>>7&1,e=(e<<1&255)+t,this.write(c,e)),this.F_SIGN=e>>7&1,this.F_ZERO=e;break}case 40:{a===4?(t=this.F_CARRY<<7,this.F_CARRY=this.REG_ACC&1,e=(this.REG_ACC>>1)+t,this.REG_ACC=e):(e=this.load(c),t=this.F_CARRY<<7,this.F_CARRY=e&1,e=(e>>1)+t,this.write(c,e)),this.F_SIGN=e>>7&1,this.F_ZERO=e;break}case 41:{if(e=this.pull(),this.F_CARRY=e&1,this.F_ZERO=e>>1&1?0:1,this.F_INTERRUPT=e>>2&1,this.F_DECIMAL=e>>3&1,this.F_BRK=e>>4&1,this.F_NOTUSED=e>>5&1,this.F_OVERFLOW=e>>6&1,this.F_SIGN=e>>7&1,this.REG_PC=this.pull(),this.REG_PC+=this.pull()<<8,this.REG_PC===65535)return;this.REG_PC--,this.F_NOTUSED=1;break}case 42:{if(this.REG_PC=this.pull(),this.REG_PC+=this.pull()<<8,this.REG_PC===65535)return;break}case 43:{e=this.REG_ACC-this.load(c)-(1-this.F_CARRY),this.F_SIGN=e>>7&1,this.F_ZERO=e&255,(this.REG_ACC^e)&128&&(this.REG_ACC^this.load(c))&128?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=e<0?0:1,this.REG_ACC=e&255,a!==11&&(r+=o);break}case 44:{this.F_CARRY=1;break}case 45:{this.F_DECIMAL=1;break}case 46:{this.F_INTERRUPT=1;break}case 47:{this.write(c,this.REG_ACC);break}case 48:{this.write(c,this.REG_X);break}case 49:{this.write(c,this.REG_Y);break}case 50:{this.REG_X=this.REG_ACC,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break}case 51:{this.REG_Y=this.REG_ACC,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC;break}case 52:{this.REG_X=this.REG_SP-256,this.F_SIGN=this.REG_SP>>7&1,this.F_ZERO=this.REG_X;break}case 53:{this.REG_ACC=this.REG_X,this.F_SIGN=this.REG_X>>7&1,this.F_ZERO=this.REG_X;break}case 54:{this.REG_SP=this.REG_X+256,this.stackWrap();break}case 55:{this.REG_ACC=this.REG_Y,this.F_SIGN=this.REG_Y>>7&1,this.F_ZERO=this.REG_Y;break}case 56:{e=this.REG_ACC&this.load(c),this.F_CARRY=e&1,this.REG_ACC=this.F_ZERO=e>>1,this.F_SIGN=0;break}case 57:{this.REG_ACC=this.F_ZERO=this.REG_ACC&this.load(c),this.F_CARRY=this.F_SIGN=this.REG_ACC>>7&1;break}case 58:{e=this.REG_ACC&this.load(c),this.REG_ACC=this.F_ZERO=(e>>1)+(this.F_CARRY<<7),this.F_SIGN=this.F_CARRY,this.F_CARRY=e>>7&1,this.F_OVERFLOW=(e>>7^e>>6)&1;break}case 59:{e=(this.REG_X&this.REG_ACC)-this.load(c),this.F_SIGN=e>>7&1,this.F_ZERO=e&255,(this.REG_X^e)&128&&(this.REG_X^this.load(c))&128?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=e<0?0:1,this.REG_X=e&255;break}case 60:{this.REG_ACC=this.REG_X=this.F_ZERO=this.load(c),this.F_SIGN=this.REG_ACC>>7&1,r+=o;break}case 61:{this.write(c,this.REG_ACC&this.REG_X);break}case 62:{e=this.load(c)-1&255,this.write(c,e),e=this.REG_ACC-e,this.F_CARRY=e>=0?1:0,this.F_SIGN=e>>7&1,this.F_ZERO=e&255,a!==11&&(r+=o);break}case 63:{e=this.load(c)+1&255,this.write(c,e),e=this.REG_ACC-e-(1-this.F_CARRY),this.F_SIGN=e>>7&1,this.F_ZERO=e&255,(this.REG_ACC^e)&128&&(this.REG_ACC^this.load(c))&128?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=e<0?0:1,this.REG_ACC=e&255,a!==11&&(r+=o);break}case 64:{e=this.load(c),t=this.F_CARRY,this.F_CARRY=e>>7&1,e=(e<<1&255)+t,this.write(c,e),this.REG_ACC=this.REG_ACC&e,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,a!==11&&(r+=o);break}case 65:{e=this.load(c),t=this.F_CARRY<<7,this.F_CARRY=e&1,e=(e>>1)+t,this.write(c,e),e=this.REG_ACC+this.load(c)+this.F_CARRY,!((this.REG_ACC^this.load(c))&128)&&(this.REG_ACC^e)&128?this.F_OVERFLOW=1:this.F_OVERFLOW=0,this.F_CARRY=e>255?1:0,this.F_SIGN=e>>7&1,this.F_ZERO=e&255,this.REG_ACC=e&255,a!==11&&(r+=o);break}case 66:{e=this.load(c),this.F_CARRY=e>>7&1,e=e<<1&255,this.write(c,e),this.REG_ACC=this.REG_ACC|e,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,a!==11&&(r+=o);break}case 67:{e=this.load(c)&255,this.F_CARRY=e&1,e>>=1,this.write(c,e),this.REG_ACC=this.REG_ACC^e,this.F_SIGN=this.REG_ACC>>7&1,this.F_ZERO=this.REG_ACC,a!==11&&(r+=o);break}case 68:break;case 69:{this.load(c),a!==11&&(r+=o);break}default:{this.nes.stop(),this.nes.crashMessage="Game crashed, invalid opcode at address $"+u.toString(16);break}}return r},load:function(e){return e<8192?this.mem[e&2047]:this.nes.mmap.load(e)},load16bit:function(e){return e<8191?this.mem[e&2047]|this.mem[e+1&2047]<<8:this.nes.mmap.load(e)|this.nes.mmap.load(e+1)<<8},write:function(e,t){e<8192?this.mem[e&2047]=t:this.nes.mmap.write(e,t)},requestIrq:function(e){this.irqRequested&&e===this.IRQ_NORMAL||(this.irqRequested=!0,this.irqType=e)},push:function(e){this.nes.mmap.write(this.REG_SP,e),this.REG_SP--,this.REG_SP=256|this.REG_SP&255},stackWrap:function(){this.REG_SP=256|this.REG_SP&255},pull:function(){return this.REG_SP++,this.REG_SP=256|this.REG_SP&255,this.nes.mmap.load(this.REG_SP)},pageCrossed:function(e,t){return(e&65280)!==(t&65280)},haltCycles:function(e){this.cyclesToHalt+=e},doNonMaskableInterrupt:function(e){this.nes.mmap.load(8192)&128&&(this.REG_PC_NEW++,this.push(this.REG_PC_NEW>>8&255),this.push(this.REG_PC_NEW&255),this.push(e),this.REG_PC_NEW=this.nes.mmap.load(65530)|this.nes.mmap.load(65531)<<8,this.REG_PC_NEW--)},doResetInterrupt:function(){this.REG_PC_NEW=this.nes.mmap.load(65532)|this.nes.mmap.load(65533)<<8,this.REG_PC_NEW--},doIrq:function(e){this.REG_PC_NEW++,this.push(this.REG_PC_NEW>>8&255),this.push(this.REG_PC_NEW&255),this.push(e),this.F_INTERRUPT_NEW=1,this.F_BRK_NEW=0,this.REG_PC_NEW=this.nes.mmap.load(65534)|this.nes.mmap.load(65535)<<8,this.REG_PC_NEW--},getStatus:function(){return this.F_CARRY|this.F_ZERO<<1|this.F_INTERRUPT<<2|this.F_DECIMAL<<3|this.F_BRK<<4|this.F_NOTUSED<<5|this.F_OVERFLOW<<6|this.F_SIGN<<7},setStatus:function(e){this.F_CARRY=e&1,this.F_ZERO=e>>1&1,this.F_INTERRUPT=e>>2&1,this.F_DECIMAL=e>>3&1,this.F_BRK=e>>4&1,this.F_NOTUSED=e>>5&1,this.F_OVERFLOW=e>>6&1,this.F_SIGN=e>>7&1},JSON_PROPERTIES:["mem","cyclesToHalt","irqRequested","irqType","REG_ACC","REG_X","REG_Y","REG_SP","REG_PC","REG_PC_NEW","REG_STATUS","F_CARRY","F_DECIMAL","F_INTERRUPT","F_INTERRUPT_NEW","F_OVERFLOW","F_SIGN","F_ZERO","F_NOTUSED","F_NOTUSED_NEW","F_BRK","F_BRK_NEW"],toJSON:function(){return Dm.toJSON(this)},fromJSON:function(e){Dm.fromJSON(this,e)}};var M_=function(){this.opdata=new Array(256);for(var e=0;e<256;e++)this.opdata[e]=255;this.setOp(this.INS_ADC,105,this.ADDR_IMM,2,2),this.setOp(this.INS_ADC,101,this.ADDR_ZP,2,3),this.setOp(this.INS_ADC,117,this.ADDR_ZPX,2,4),this.setOp(this.INS_ADC,109,this.ADDR_ABS,3,4),this.setOp(this.INS_ADC,125,this.ADDR_ABSX,3,4),this.setOp(this.INS_ADC,121,this.ADDR_ABSY,3,4),this.setOp(this.INS_ADC,97,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_ADC,113,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_AND,41,this.ADDR_IMM,2,2),this.setOp(this.INS_AND,37,this.ADDR_ZP,2,3),this.setOp(this.INS_AND,53,this.ADDR_ZPX,2,4),this.setOp(this.INS_AND,45,this.ADDR_ABS,3,4),this.setOp(this.INS_AND,61,this.ADDR_ABSX,3,4),this.setOp(this.INS_AND,57,this.ADDR_ABSY,3,4),this.setOp(this.INS_AND,33,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_AND,49,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_ASL,10,this.ADDR_ACC,1,2),this.setOp(this.INS_ASL,6,this.ADDR_ZP,2,5),this.setOp(this.INS_ASL,22,this.ADDR_ZPX,2,6),this.setOp(this.INS_ASL,14,this.ADDR_ABS,3,6),this.setOp(this.INS_ASL,30,this.ADDR_ABSX,3,7),this.setOp(this.INS_BCC,144,this.ADDR_REL,2,2),this.setOp(this.INS_BCS,176,this.ADDR_REL,2,2),this.setOp(this.INS_BEQ,240,this.ADDR_REL,2,2),this.setOp(this.INS_BIT,36,this.ADDR_ZP,2,3),this.setOp(this.INS_BIT,44,this.ADDR_ABS,3,4),this.setOp(this.INS_BMI,48,this.ADDR_REL,2,2),this.setOp(this.INS_BNE,208,this.ADDR_REL,2,2),this.setOp(this.INS_BPL,16,this.ADDR_REL,2,2),this.setOp(this.INS_BRK,0,this.ADDR_IMP,1,7),this.setOp(this.INS_BVC,80,this.ADDR_REL,2,2),this.setOp(this.INS_BVS,112,this.ADDR_REL,2,2),this.setOp(this.INS_CLC,24,this.ADDR_IMP,1,2),this.setOp(this.INS_CLD,216,this.ADDR_IMP,1,2),this.setOp(this.INS_CLI,88,this.ADDR_IMP,1,2),this.setOp(this.INS_CLV,184,this.ADDR_IMP,1,2),this.setOp(this.INS_CMP,201,this.ADDR_IMM,2,2),this.setOp(this.INS_CMP,197,this.ADDR_ZP,2,3),this.setOp(this.INS_CMP,213,this.ADDR_ZPX,2,4),this.setOp(this.INS_CMP,205,this.ADDR_ABS,3,4),this.setOp(this.INS_CMP,221,this.ADDR_ABSX,3,4),this.setOp(this.INS_CMP,217,this.ADDR_ABSY,3,4),this.setOp(this.INS_CMP,193,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_CMP,209,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_CPX,224,this.ADDR_IMM,2,2),this.setOp(this.INS_CPX,228,this.ADDR_ZP,2,3),this.setOp(this.INS_CPX,236,this.ADDR_ABS,3,4),this.setOp(this.INS_CPY,192,this.ADDR_IMM,2,2),this.setOp(this.INS_CPY,196,this.ADDR_ZP,2,3),this.setOp(this.INS_CPY,204,this.ADDR_ABS,3,4),this.setOp(this.INS_DEC,198,this.ADDR_ZP,2,5),this.setOp(this.INS_DEC,214,this.ADDR_ZPX,2,6),this.setOp(this.INS_DEC,206,this.ADDR_ABS,3,6),this.setOp(this.INS_DEC,222,this.ADDR_ABSX,3,7),this.setOp(this.INS_DEX,202,this.ADDR_IMP,1,2),this.setOp(this.INS_DEY,136,this.ADDR_IMP,1,2),this.setOp(this.INS_EOR,73,this.ADDR_IMM,2,2),this.setOp(this.INS_EOR,69,this.ADDR_ZP,2,3),this.setOp(this.INS_EOR,85,this.ADDR_ZPX,2,4),this.setOp(this.INS_EOR,77,this.ADDR_ABS,3,4),this.setOp(this.INS_EOR,93,this.ADDR_ABSX,3,4),this.setOp(this.INS_EOR,89,this.ADDR_ABSY,3,4),this.setOp(this.INS_EOR,65,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_EOR,81,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_INC,230,this.ADDR_ZP,2,5),this.setOp(this.INS_INC,246,this.ADDR_ZPX,2,6),this.setOp(this.INS_INC,238,this.ADDR_ABS,3,6),this.setOp(this.INS_INC,254,this.ADDR_ABSX,3,7),this.setOp(this.INS_INX,232,this.ADDR_IMP,1,2),this.setOp(this.INS_INY,200,this.ADDR_IMP,1,2),this.setOp(this.INS_JMP,76,this.ADDR_ABS,3,3),this.setOp(this.INS_JMP,108,this.ADDR_INDABS,3,5),this.setOp(this.INS_JSR,32,this.ADDR_ABS,3,6),this.setOp(this.INS_LDA,169,this.ADDR_IMM,2,2),this.setOp(this.INS_LDA,165,this.ADDR_ZP,2,3),this.setOp(this.INS_LDA,181,this.ADDR_ZPX,2,4),this.setOp(this.INS_LDA,173,this.ADDR_ABS,3,4),this.setOp(this.INS_LDA,189,this.ADDR_ABSX,3,4),this.setOp(this.INS_LDA,185,this.ADDR_ABSY,3,4),this.setOp(this.INS_LDA,161,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_LDA,177,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_LDX,162,this.ADDR_IMM,2,2),this.setOp(this.INS_LDX,166,this.ADDR_ZP,2,3),this.setOp(this.INS_LDX,182,this.ADDR_ZPY,2,4),this.setOp(this.INS_LDX,174,this.ADDR_ABS,3,4),this.setOp(this.INS_LDX,190,this.ADDR_ABSY,3,4),this.setOp(this.INS_LDY,160,this.ADDR_IMM,2,2),this.setOp(this.INS_LDY,164,this.ADDR_ZP,2,3),this.setOp(this.INS_LDY,180,this.ADDR_ZPX,2,4),this.setOp(this.INS_LDY,172,this.ADDR_ABS,3,4),this.setOp(this.INS_LDY,188,this.ADDR_ABSX,3,4),this.setOp(this.INS_LSR,74,this.ADDR_ACC,1,2),this.setOp(this.INS_LSR,70,this.ADDR_ZP,2,5),this.setOp(this.INS_LSR,86,this.ADDR_ZPX,2,6),this.setOp(this.INS_LSR,78,this.ADDR_ABS,3,6),this.setOp(this.INS_LSR,94,this.ADDR_ABSX,3,7),this.setOp(this.INS_NOP,26,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,58,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,90,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,122,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,218,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,234,this.ADDR_IMP,1,2),this.setOp(this.INS_NOP,250,this.ADDR_IMP,1,2),this.setOp(this.INS_ORA,9,this.ADDR_IMM,2,2),this.setOp(this.INS_ORA,5,this.ADDR_ZP,2,3),this.setOp(this.INS_ORA,21,this.ADDR_ZPX,2,4),this.setOp(this.INS_ORA,13,this.ADDR_ABS,3,4),this.setOp(this.INS_ORA,29,this.ADDR_ABSX,3,4),this.setOp(this.INS_ORA,25,this.ADDR_ABSY,3,4),this.setOp(this.INS_ORA,1,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_ORA,17,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_PHA,72,this.ADDR_IMP,1,3),this.setOp(this.INS_PHP,8,this.ADDR_IMP,1,3),this.setOp(this.INS_PLA,104,this.ADDR_IMP,1,4),this.setOp(this.INS_PLP,40,this.ADDR_IMP,1,4),this.setOp(this.INS_ROL,42,this.ADDR_ACC,1,2),this.setOp(this.INS_ROL,38,this.ADDR_ZP,2,5),this.setOp(this.INS_ROL,54,this.ADDR_ZPX,2,6),this.setOp(this.INS_ROL,46,this.ADDR_ABS,3,6),this.setOp(this.INS_ROL,62,this.ADDR_ABSX,3,7),this.setOp(this.INS_ROR,106,this.ADDR_ACC,1,2),this.setOp(this.INS_ROR,102,this.ADDR_ZP,2,5),this.setOp(this.INS_ROR,118,this.ADDR_ZPX,2,6),this.setOp(this.INS_ROR,110,this.ADDR_ABS,3,6),this.setOp(this.INS_ROR,126,this.ADDR_ABSX,3,7),this.setOp(this.INS_RTI,64,this.ADDR_IMP,1,6),this.setOp(this.INS_RTS,96,this.ADDR_IMP,1,6),this.setOp(this.INS_SBC,233,this.ADDR_IMM,2,2),this.setOp(this.INS_SBC,229,this.ADDR_ZP,2,3),this.setOp(this.INS_SBC,245,this.ADDR_ZPX,2,4),this.setOp(this.INS_SBC,237,this.ADDR_ABS,3,4),this.setOp(this.INS_SBC,253,this.ADDR_ABSX,3,4),this.setOp(this.INS_SBC,249,this.ADDR_ABSY,3,4),this.setOp(this.INS_SBC,225,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_SBC,241,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_SEC,56,this.ADDR_IMP,1,2),this.setOp(this.INS_SED,248,this.ADDR_IMP,1,2),this.setOp(this.INS_SEI,120,this.ADDR_IMP,1,2),this.setOp(this.INS_STA,133,this.ADDR_ZP,2,3),this.setOp(this.INS_STA,149,this.ADDR_ZPX,2,4),this.setOp(this.INS_STA,141,this.ADDR_ABS,3,4),this.setOp(this.INS_STA,157,this.ADDR_ABSX,3,5),this.setOp(this.INS_STA,153,this.ADDR_ABSY,3,5),this.setOp(this.INS_STA,129,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_STA,145,this.ADDR_POSTIDXIND,2,6),this.setOp(this.INS_STX,134,this.ADDR_ZP,2,3),this.setOp(this.INS_STX,150,this.ADDR_ZPY,2,4),this.setOp(this.INS_STX,142,this.ADDR_ABS,3,4),this.setOp(this.INS_STY,132,this.ADDR_ZP,2,3),this.setOp(this.INS_STY,148,this.ADDR_ZPX,2,4),this.setOp(this.INS_STY,140,this.ADDR_ABS,3,4),this.setOp(this.INS_TAX,170,this.ADDR_IMP,1,2),this.setOp(this.INS_TAY,168,this.ADDR_IMP,1,2),this.setOp(this.INS_TSX,186,this.ADDR_IMP,1,2),this.setOp(this.INS_TXA,138,this.ADDR_IMP,1,2),this.setOp(this.INS_TXS,154,this.ADDR_IMP,1,2),this.setOp(this.INS_TYA,152,this.ADDR_IMP,1,2),this.setOp(this.INS_ALR,75,this.ADDR_IMM,2,2),this.setOp(this.INS_ANC,11,this.ADDR_IMM,2,2),this.setOp(this.INS_ANC,43,this.ADDR_IMM,2,2),this.setOp(this.INS_ARR,107,this.ADDR_IMM,2,2),this.setOp(this.INS_AXS,203,this.ADDR_IMM,2,2),this.setOp(this.INS_LAX,163,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_LAX,167,this.ADDR_ZP,2,3),this.setOp(this.INS_LAX,175,this.ADDR_ABS,3,4),this.setOp(this.INS_LAX,179,this.ADDR_POSTIDXIND,2,5),this.setOp(this.INS_LAX,183,this.ADDR_ZPY,2,4),this.setOp(this.INS_LAX,191,this.ADDR_ABSY,3,4),this.setOp(this.INS_SAX,131,this.ADDR_PREIDXIND,2,6),this.setOp(this.INS_SAX,135,this.ADDR_ZP,2,3),this.setOp(this.INS_SAX,143,this.ADDR_ABS,3,4),this.setOp(this.INS_SAX,151,this.ADDR_ZPY,2,4),this.setOp(this.INS_DCP,195,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_DCP,199,this.ADDR_ZP,2,5),this.setOp(this.INS_DCP,207,this.ADDR_ABS,3,6),this.setOp(this.INS_DCP,211,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_DCP,215,this.ADDR_ZPX,2,6),this.setOp(this.INS_DCP,219,this.ADDR_ABSY,3,7),this.setOp(this.INS_DCP,223,this.ADDR_ABSX,3,7),this.setOp(this.INS_ISC,227,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_ISC,231,this.ADDR_ZP,2,5),this.setOp(this.INS_ISC,239,this.ADDR_ABS,3,6),this.setOp(this.INS_ISC,243,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_ISC,247,this.ADDR_ZPX,2,6),this.setOp(this.INS_ISC,251,this.ADDR_ABSY,3,7),this.setOp(this.INS_ISC,255,this.ADDR_ABSX,3,7),this.setOp(this.INS_RLA,35,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_RLA,39,this.ADDR_ZP,2,5),this.setOp(this.INS_RLA,47,this.ADDR_ABS,3,6),this.setOp(this.INS_RLA,51,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_RLA,55,this.ADDR_ZPX,2,6),this.setOp(this.INS_RLA,59,this.ADDR_ABSY,3,7),this.setOp(this.INS_RLA,63,this.ADDR_ABSX,3,7),this.setOp(this.INS_RRA,99,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_RRA,103,this.ADDR_ZP,2,5),this.setOp(this.INS_RRA,111,this.ADDR_ABS,3,6),this.setOp(this.INS_RRA,115,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_RRA,119,this.ADDR_ZPX,2,6),this.setOp(this.INS_RRA,123,this.ADDR_ABSY,3,7),this.setOp(this.INS_RRA,127,this.ADDR_ABSX,3,7),this.setOp(this.INS_SLO,3,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_SLO,7,this.ADDR_ZP,2,5),this.setOp(this.INS_SLO,15,this.ADDR_ABS,3,6),this.setOp(this.INS_SLO,19,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_SLO,23,this.ADDR_ZPX,2,6),this.setOp(this.INS_SLO,27,this.ADDR_ABSY,3,7),this.setOp(this.INS_SLO,31,this.ADDR_ABSX,3,7),this.setOp(this.INS_SRE,67,this.ADDR_PREIDXIND,2,8),this.setOp(this.INS_SRE,71,this.ADDR_ZP,2,5),this.setOp(this.INS_SRE,79,this.ADDR_ABS,3,6),this.setOp(this.INS_SRE,83,this.ADDR_POSTIDXIND,2,8),this.setOp(this.INS_SRE,87,this.ADDR_ZPX,2,6),this.setOp(this.INS_SRE,91,this.ADDR_ABSY,3,7),this.setOp(this.INS_SRE,95,this.ADDR_ABSX,3,7),this.setOp(this.INS_SKB,128,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,130,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,137,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,194,this.ADDR_IMM,2,2),this.setOp(this.INS_SKB,226,this.ADDR_IMM,2,2),this.setOp(this.INS_IGN,12,this.ADDR_ABS,3,4),this.setOp(this.INS_IGN,28,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,60,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,92,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,124,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,220,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,252,this.ADDR_ABSX,3,4),this.setOp(this.INS_IGN,4,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,68,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,100,this.ADDR_ZP,2,3),this.setOp(this.INS_IGN,20,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,52,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,84,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,116,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,212,this.ADDR_ZPX,2,4),this.setOp(this.INS_IGN,244,this.ADDR_ZPX,2,4),this.cycTable=new Array(7,6,2,8,3,3,5,5,3,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,3,2,2,2,3,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,6,6,2,8,3,3,5,5,4,2,2,2,5,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,6,2,6,4,4,4,4,2,5,2,5,5,5,5,5,2,6,2,6,3,3,3,3,2,2,2,2,4,4,4,4,2,5,2,5,4,4,4,4,2,4,2,4,4,4,4,4,2,6,2,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7,2,6,3,8,3,3,5,5,2,2,2,2,4,4,6,6,2,5,2,8,4,4,6,6,2,4,2,7,4,4,7,7),this.instname=new Array(70),this.instname[0]="ADC",this.instname[1]="AND",this.instname[2]="ASL",this.instname[3]="BCC",this.instname[4]="BCS",this.instname[5]="BEQ",this.instname[6]="BIT",this.instname[7]="BMI",this.instname[8]="BNE",this.instname[9]="BPL",this.instname[10]="BRK",this.instname[11]="BVC",this.instname[12]="BVS",this.instname[13]="CLC",this.instname[14]="CLD",this.instname[15]="CLI",this.instname[16]="CLV",this.instname[17]="CMP",this.instname[18]="CPX",this.instname[19]="CPY",this.instname[20]="DEC",this.instname[21]="DEX",this.instname[22]="DEY",this.instname[23]="EOR",this.instname[24]="INC",this.instname[25]="INX",this.instname[26]="INY",this.instname[27]="JMP",this.instname[28]="JSR",this.instname[29]="LDA",this.instname[30]="LDX",this.instname[31]="LDY",this.instname[32]="LSR",this.instname[33]="NOP",this.instname[34]="ORA",this.instname[35]="PHA",this.instname[36]="PHP",this.instname[37]="PLA",this.instname[38]="PLP",this.instname[39]="ROL",this.instname[40]="ROR",this.instname[41]="RTI",this.instname[42]="RTS",this.instname[43]="SBC",this.instname[44]="SEC",this.instname[45]="SED",this.instname[46]="SEI",this.instname[47]="STA",this.instname[48]="STX",this.instname[49]="STY",this.instname[50]="TAX",this.instname[51]="TAY",this.instname[52]="TSX",this.instname[53]="TXA",this.instname[54]="TXS",this.instname[55]="TYA",this.instname[56]="ALR",this.instname[57]="ANC",this.instname[58]="ARR",this.instname[59]="AXS",this.instname[60]="LAX",this.instname[61]="SAX",this.instname[62]="DCP",this.instname[63]="ISC",this.instname[64]="RLA",this.instname[65]="RRA",this.instname[66]="SLO",this.instname[67]="SRE",this.instname[68]="SKB",this.instname[69]="IGN",this.addrDesc=new Array("Zero Page           ","Relative            ","Implied             ","Absolute            ","Accumulator         ","Immediate           ","Zero Page,X         ","Zero Page,Y         ","Absolute,X          ","Absolute,Y          ","Preindexed Indirect ","Postindexed Indirect","Indirect Absolute   ")};M_.prototype={INS_ADC:0,INS_AND:1,INS_ASL:2,INS_BCC:3,INS_BCS:4,INS_BEQ:5,INS_BIT:6,INS_BMI:7,INS_BNE:8,INS_BPL:9,INS_BRK:10,INS_BVC:11,INS_BVS:12,INS_CLC:13,INS_CLD:14,INS_CLI:15,INS_CLV:16,INS_CMP:17,INS_CPX:18,INS_CPY:19,INS_DEC:20,INS_DEX:21,INS_DEY:22,INS_EOR:23,INS_INC:24,INS_INX:25,INS_INY:26,INS_JMP:27,INS_JSR:28,INS_LDA:29,INS_LDX:30,INS_LDY:31,INS_LSR:32,INS_NOP:33,INS_ORA:34,INS_PHA:35,INS_PHP:36,INS_PLA:37,INS_PLP:38,INS_ROL:39,INS_ROR:40,INS_RTI:41,INS_RTS:42,INS_SBC:43,INS_SEC:44,INS_SED:45,INS_SEI:46,INS_STA:47,INS_STX:48,INS_STY:49,INS_TAX:50,INS_TAY:51,INS_TSX:52,INS_TXA:53,INS_TXS:54,INS_TYA:55,INS_ALR:56,INS_ANC:57,INS_ARR:58,INS_AXS:59,INS_LAX:60,INS_SAX:61,INS_DCP:62,INS_ISC:63,INS_RLA:64,INS_RRA:65,INS_SLO:66,INS_SRE:67,INS_SKB:68,INS_IGN:69,INS_DUMMY:70,ADDR_ZP:0,ADDR_REL:1,ADDR_IMP:2,ADDR_ABS:3,ADDR_ACC:4,ADDR_IMM:5,ADDR_ZPX:6,ADDR_ZPY:7,ADDR_ABSX:8,ADDR_ABSY:9,ADDR_PREIDXIND:10,ADDR_POSTIDXIND:11,ADDR_INDABS:12,setOp:function(e,t,n,r,o){this.opdata[t]=e&255|(n&255)<<8|(r&255)<<16|(o&255)<<24}};var hI=F_,L_=function(){this.pix=new Array(64),this.fbIndex=null,this.tIndex=null,this.x=null,this.y=null,this.w=null,this.h=null,this.incX=null,this.incY=null,this.palIndex=null,this.tpri=null,this.c=null,this.initialized=!1,this.opaque=new Array(8)};L_.prototype={setBuffer:function(e){for(this.y=0;this.y<8;this.y++)this.setScanline(this.y,e[this.y],e[this.y+8])},setScanline:function(e,t,n){for(this.initialized=!0,this.tIndex=e<<3,this.x=0;this.x<8;this.x++)this.pix[this.tIndex+this.x]=(t>>7-this.x&1)+((n>>7-this.x&1)<<1),this.pix[this.tIndex+this.x]===0&&(this.opaque[e]=!1)},render:function(e,t,n,r,o,a,u,c,m,_,v,R,b){if(!(a<-7||a>=256||u<-7||u>=240))if(this.w=r-t,this.h=o-n,a<0&&(t-=a),a+r>=256&&(r=256-a),u<0&&(n-=u),u+o>=240&&(o=240-u),!_&&!v)for(this.fbIndex=(u<<8)+a,this.tIndex=0,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=t&&this.x<r&&this.y>=n&&this.y<o&&(this.palIndex=this.pix[this.tIndex],this.tpri=b[this.fbIndex],this.palIndex!==0&&R<=(this.tpri&255)&&(e[this.fbIndex]=m[this.palIndex+c],this.tpri=this.tpri&3840|R,b[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex++;this.fbIndex-=8,this.fbIndex+=256}else if(_&&!v)for(this.fbIndex=(u<<8)+a,this.tIndex=7,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=t&&this.x<r&&this.y>=n&&this.y<o&&(this.palIndex=this.pix[this.tIndex],this.tpri=b[this.fbIndex],this.palIndex!==0&&R<=(this.tpri&255)&&(e[this.fbIndex]=m[this.palIndex+c],this.tpri=this.tpri&3840|R,b[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex--;this.fbIndex-=8,this.fbIndex+=256,this.tIndex+=16}else if(v&&!_)for(this.fbIndex=(u<<8)+a,this.tIndex=56,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=t&&this.x<r&&this.y>=n&&this.y<o&&(this.palIndex=this.pix[this.tIndex],this.tpri=b[this.fbIndex],this.palIndex!==0&&R<=(this.tpri&255)&&(e[this.fbIndex]=m[this.palIndex+c],this.tpri=this.tpri&3840|R,b[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex++;this.fbIndex-=8,this.fbIndex+=256,this.tIndex-=16}else for(this.fbIndex=(u<<8)+a,this.tIndex=63,this.y=0;this.y<8;this.y++){for(this.x=0;this.x<8;this.x++)this.x>=t&&this.x<r&&this.y>=n&&this.y<o&&(this.palIndex=this.pix[this.tIndex],this.tpri=b[this.fbIndex],this.palIndex!==0&&R<=(this.tpri&255)&&(e[this.fbIndex]=m[this.palIndex+c],this.tpri=this.tpri&3840|R,b[this.fbIndex]=this.tpri)),this.fbIndex++,this.tIndex--;this.fbIndex-=8,this.fbIndex+=256}},isTransparent:function(e,t){return this.pix[(t<<3)+e]===0},toJSON:function(){return{opaque:this.opaque,pix:this.pix}},fromJSON:function(e){this.opaque=e.opaque,this.pix=e.pix}};var B_=L_,pI=B_,Nm=Gh,U_=function(e){this.nes=e,this.vramMem=null,this.spriteMem=null,this.vramAddress=null,this.vramTmpAddress=null,this.vramBufferedReadValue=null,this.firstWrite=null,this.sramAddress=null,this.currentMirroring=null,this.requestEndFrame=null,this.nmiOk=null,this.dummyCycleToggle=null,this.validTileData=null,this.nmiCounter=null,this.scanlineAlreadyRendered=null,this.f_nmiOnVblank=null,this.f_spriteSize=null,this.f_bgPatternTable=null,this.f_spPatternTable=null,this.f_addrInc=null,this.f_nTblAddress=null,this.f_color=null,this.f_spVisibility=null,this.f_bgVisibility=null,this.f_spClipping=null,this.f_bgClipping=null,this.f_dispType=null,this.cntFV=null,this.cntV=null,this.cntH=null,this.cntVT=null,this.cntHT=null,this.regFV=null,this.regV=null,this.regH=null,this.regVT=null,this.regHT=null,this.regFH=null,this.regS=null,this.curNt=null,this.attrib=null,this.buffer=null,this.bgbuffer=null,this.pixrendered=null,this.validTileData=null,this.scantile=null,this.scanline=null,this.lastRenderedScanline=null,this.curX=null,this.sprX=null,this.sprY=null,this.sprTile=null,this.sprCol=null,this.vertFlip=null,this.horiFlip=null,this.bgPriority=null,this.spr0HitX=null,this.spr0HitY=null,this.hitSpr0=null,this.sprPalette=null,this.imgPalette=null,this.ptTile=null,this.ntable1=null,this.currentMirroring=null,this.nameTable=null,this.vramMirrorTable=null,this.palTable=null,this.showSpr0Hit=!1,this.clipToTvSize=!0,this.reset()};U_.prototype={STATUS_VRAMWRITE:4,STATUS_SLSPRITECOUNT:5,STATUS_SPRITE0HIT:6,STATUS_VBLANK:7,reset:function(){var e;for(this.vramMem=new Array(32768),this.spriteMem=new Array(256),e=0;e<this.vramMem.length;e++)this.vramMem[e]=0;for(e=0;e<this.spriteMem.length;e++)this.spriteMem[e]=0;for(this.vramAddress=null,this.vramTmpAddress=null,this.vramBufferedReadValue=0,this.firstWrite=!0,this.sramAddress=0,this.currentMirroring=-1,this.requestEndFrame=!1,this.nmiOk=!1,this.dummyCycleToggle=!1,this.validTileData=!1,this.nmiCounter=0,this.scanlineAlreadyRendered=null,this.f_nmiOnVblank=0,this.f_spriteSize=0,this.f_bgPatternTable=0,this.f_spPatternTable=0,this.f_addrInc=0,this.f_nTblAddress=0,this.f_color=0,this.f_spVisibility=0,this.f_bgVisibility=0,this.f_spClipping=0,this.f_bgClipping=0,this.f_dispType=0,this.cntFV=0,this.cntV=0,this.cntH=0,this.cntVT=0,this.cntHT=0,this.regFV=0,this.regV=0,this.regH=0,this.regVT=0,this.regHT=0,this.regFH=0,this.regS=0,this.curNt=null,this.attrib=new Array(32),this.buffer=new Array(256*240),this.bgbuffer=new Array(256*240),this.pixrendered=new Array(256*240),this.validTileData=null,this.scantile=new Array(32),this.scanline=0,this.lastRenderedScanline=-1,this.curX=0,this.sprX=new Array(64),this.sprY=new Array(64),this.sprTile=new Array(64),this.sprCol=new Array(64),this.vertFlip=new Array(64),this.horiFlip=new Array(64),this.bgPriority=new Array(64),this.spr0HitX=0,this.spr0HitY=0,this.hitSpr0=!1,this.sprPalette=new Array(16),this.imgPalette=new Array(16),this.ptTile=new Array(512),e=0;e<512;e++)this.ptTile[e]=new pI;for(this.ntable1=new Array(4),this.currentMirroring=-1,this.nameTable=new Array(4),e=0;e<4;e++)this.nameTable[e]=new G_(32,32,"Nt"+e);for(this.vramMirrorTable=new Array(32768),e=0;e<32768;e++)this.vramMirrorTable[e]=e;this.palTable=new V_,this.palTable.loadNTSCPalette(),this.updateControlReg1(0),this.updateControlReg2(0)},setMirroring:function(e){if(e!==this.currentMirroring){this.currentMirroring=e,this.triggerRendering(),this.vramMirrorTable===null&&(this.vramMirrorTable=new Array(32768));for(var t=0;t<32768;t++)this.vramMirrorTable[t]=t;this.defineMirrorRegion(16160,16128,32),this.defineMirrorRegion(16192,16128,32),this.defineMirrorRegion(16256,16128,32),this.defineMirrorRegion(16320,16128,32),this.defineMirrorRegion(12288,8192,3840),this.defineMirrorRegion(16384,0,16384),e===this.nes.rom.HORIZONTAL_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=1,this.ntable1[3]=1,this.defineMirrorRegion(9216,8192,1024),this.defineMirrorRegion(11264,10240,1024)):e===this.nes.rom.VERTICAL_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=0,this.ntable1[3]=1,this.defineMirrorRegion(10240,8192,1024),this.defineMirrorRegion(11264,9216,1024)):e===this.nes.rom.SINGLESCREEN_MIRRORING?(this.ntable1[0]=0,this.ntable1[1]=0,this.ntable1[2]=0,this.ntable1[3]=0,this.defineMirrorRegion(9216,8192,1024),this.defineMirrorRegion(10240,8192,1024),this.defineMirrorRegion(11264,8192,1024)):e===this.nes.rom.SINGLESCREEN_MIRRORING2?(this.ntable1[0]=1,this.ntable1[1]=1,this.ntable1[2]=1,this.ntable1[3]=1,this.defineMirrorRegion(9216,9216,1024),this.defineMirrorRegion(10240,9216,1024),this.defineMirrorRegion(11264,9216,1024)):(this.ntable1[0]=0,this.ntable1[1]=1,this.ntable1[2]=2,this.ntable1[3]=3)}},defineMirrorRegion:function(e,t,n){for(var r=0;r<n;r++)this.vramMirrorTable[e+r]=t+r},startVBlank:function(){this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NMI),this.lastRenderedScanline<239&&this.renderFramePartially(this.lastRenderedScanline+1,240-this.lastRenderedScanline),this.endFrame(),this.lastRenderedScanline=-1},endScanline:function(){switch(this.scanline){case 19:this.dummyCycleToggle&&(this.curX=1,this.dummyCycleToggle=!this.dummyCycleToggle);break;case 20:this.setStatusFlag(this.STATUS_VBLANK,!1),this.setStatusFlag(this.STATUS_SPRITE0HIT,!1),this.hitSpr0=!1,this.spr0HitX=-1,this.spr0HitY=-1,(this.f_bgVisibility===1||this.f_spVisibility===1)&&(this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,this.f_bgVisibility===1&&this.renderBgScanline(!1,0)),this.f_bgVisibility===1&&this.f_spVisibility===1&&this.checkSprite0(0),(this.f_bgVisibility===1||this.f_spVisibility===1)&&this.nes.mmap.clockIrqCounter();break;case 261:this.setStatusFlag(this.STATUS_VBLANK,!0),this.requestEndFrame=!0,this.nmiCounter=9,this.scanline=-1;break;default:this.scanline>=21&&this.scanline<=260&&(this.f_bgVisibility===1&&(this.scanlineAlreadyRendered||(this.cntHT=this.regHT,this.cntH=this.regH,this.renderBgScanline(!0,this.scanline+1-21)),this.scanlineAlreadyRendered=!1,!this.hitSpr0&&this.f_spVisibility===1&&this.sprX[0]>=-7&&this.sprX[0]<256&&this.sprY[0]+1<=this.scanline-20&&this.sprY[0]+1+(this.f_spriteSize===0?8:16)>=this.scanline-20&&this.checkSprite0(this.scanline-20)&&(this.hitSpr0=!0)),(this.f_bgVisibility===1||this.f_spVisibility===1)&&this.nes.mmap.clockIrqCounter())}this.scanline++,this.regsToAddress(),this.cntsToAddress()},startFrame:function(){var e=0;if(this.f_dispType===0)e=this.imgPalette[0];else switch(this.f_color){case 0:e=0;break;case 1:e=65280;break;case 2:e=16711680;break;case 3:e=0;break;case 4:e=255;break;default:e=0}var t=this.buffer,n;for(n=0;n<256*240;n++)t[n]=e;var r=this.pixrendered;for(n=0;n<r.length;n++)r[n]=65},endFrame:function(){var e,t,n,r=this.buffer;if(this.showSpr0Hit){if(this.sprX[0]>=0&&this.sprX[0]<256&&this.sprY[0]>=0&&this.sprY[0]<240){for(e=0;e<256;e++)r[(this.sprY[0]<<8)+e]=16733525;for(e=0;e<240;e++)r[(e<<8)+this.sprX[0]]=16733525}if(this.spr0HitX>=0&&this.spr0HitX<256&&this.spr0HitY>=0&&this.spr0HitY<240){for(e=0;e<256;e++)r[(this.spr0HitY<<8)+e]=5635925;for(e=0;e<240;e++)r[(e<<8)+this.spr0HitX]=5635925}}if(this.clipToTvSize||this.f_bgClipping===0||this.f_spClipping===0)for(n=0;n<240;n++)for(t=0;t<8;t++)r[(n<<8)+t]=0;if(this.clipToTvSize)for(n=0;n<240;n++)for(t=0;t<8;t++)r[(n<<8)+255-t]=0;if(this.clipToTvSize)for(n=0;n<8;n++)for(t=0;t<256;t++)r[(n<<8)+t]=0,r[(239-n<<8)+t]=0;this.nes.ui.writeFrame(r)},updateControlReg1:function(e){this.triggerRendering(),this.f_nmiOnVblank=e>>7&1,this.f_spriteSize=e>>5&1,this.f_bgPatternTable=e>>4&1,this.f_spPatternTable=e>>3&1,this.f_addrInc=e>>2&1,this.f_nTblAddress=e&3,this.regV=e>>1&1,this.regH=e&1,this.regS=e>>4&1},updateControlReg2:function(e){this.triggerRendering(),this.f_color=e>>5&7,this.f_spVisibility=e>>4&1,this.f_bgVisibility=e>>3&1,this.f_spClipping=e>>2&1,this.f_bgClipping=e>>1&1,this.f_dispType=e&1,this.f_dispType===0&&this.palTable.setEmphasis(this.f_color),this.updatePalettes()},setStatusFlag:function(e,t){var n=1<<e;this.nes.cpu.mem[8194]=this.nes.cpu.mem[8194]&255-n|(t?n:0)},readStatusRegister:function(){var e=this.nes.cpu.mem[8194];return this.firstWrite=!0,this.setStatusFlag(this.STATUS_VBLANK,!1),e},writeSRAMAddress:function(e){this.sramAddress=e},sramLoad:function(){return this.spriteMem[this.sramAddress]},sramWrite:function(e){this.spriteMem[this.sramAddress]=e,this.spriteRamWriteUpdate(this.sramAddress,e),this.sramAddress++,this.sramAddress%=256},scrollWrite:function(e){this.triggerRendering(),this.firstWrite?(this.regHT=e>>3&31,this.regFH=e&7):(this.regFV=e&7,this.regVT=e>>3&31),this.firstWrite=!this.firstWrite},writeVRAMAddress:function(e){this.firstWrite?(this.regFV=e>>4&3,this.regV=e>>3&1,this.regH=e>>2&1,this.regVT=this.regVT&7|(e&3)<<3):(this.triggerRendering(),this.regVT=this.regVT&24|e>>5&7,this.regHT=e&31,this.cntFV=this.regFV,this.cntV=this.regV,this.cntH=this.regH,this.cntVT=this.regVT,this.cntHT=this.regHT,this.checkSprite0(this.scanline-20)),this.firstWrite=!this.firstWrite,this.cntsToAddress(),this.vramAddress<8192&&this.nes.mmap.latchAccess(this.vramAddress)},vramLoad:function(){var e;return this.cntsToAddress(),this.regsToAddress(),this.vramAddress<=16127?(e=this.vramBufferedReadValue,this.vramAddress<8192?this.vramBufferedReadValue=this.vramMem[this.vramAddress]:this.vramBufferedReadValue=this.mirroredLoad(this.vramAddress),this.vramAddress<8192&&this.nes.mmap.latchAccess(this.vramAddress),this.vramAddress+=this.f_addrInc===1?32:1,this.cntsFromAddress(),this.regsFromAddress(),e):(e=this.mirroredLoad(this.vramAddress),this.vramAddress+=this.f_addrInc===1?32:1,this.cntsFromAddress(),this.regsFromAddress(),e)},vramWrite:function(e){this.triggerRendering(),this.cntsToAddress(),this.regsToAddress(),this.vramAddress>=8192?this.mirroredWrite(this.vramAddress,e):(this.writeMem(this.vramAddress,e),this.nes.mmap.latchAccess(this.vramAddress)),this.vramAddress+=this.f_addrInc===1?32:1,this.regsFromAddress(),this.cntsFromAddress()},sramDMA:function(e){for(var t=e*256,n,r=this.sramAddress;r<256;r++)n=this.nes.cpu.mem[t+r],this.spriteMem[r]=n,this.spriteRamWriteUpdate(r,n);this.nes.cpu.haltCycles(513)},regsFromAddress:function(){var e=this.vramTmpAddress>>8&255;this.regFV=e>>4&7,this.regV=e>>3&1,this.regH=e>>2&1,this.regVT=this.regVT&7|(e&3)<<3,e=this.vramTmpAddress&255,this.regVT=this.regVT&24|e>>5&7,this.regHT=e&31},cntsFromAddress:function(){var e=this.vramAddress>>8&255;this.cntFV=e>>4&3,this.cntV=e>>3&1,this.cntH=e>>2&1,this.cntVT=this.cntVT&7|(e&3)<<3,e=this.vramAddress&255,this.cntVT=this.cntVT&24|e>>5&7,this.cntHT=e&31},regsToAddress:function(){var e=(this.regFV&7)<<4;e|=(this.regV&1)<<3,e|=(this.regH&1)<<2,e|=this.regVT>>3&3;var t=(this.regVT&7)<<5;t|=this.regHT&31,this.vramTmpAddress=(e<<8|t)&32767},cntsToAddress:function(){var e=(this.cntFV&7)<<4;e|=(this.cntV&1)<<3,e|=(this.cntH&1)<<2,e|=this.cntVT>>3&3;var t=(this.cntVT&7)<<5;t|=this.cntHT&31,this.vramAddress=(e<<8|t)&32767},incTileCounter:function(e){for(var t=e;t!==0;t--)this.cntHT++,this.cntHT===32&&(this.cntHT=0,this.cntVT++,this.cntVT>=30&&(this.cntH++,this.cntH===2&&(this.cntH=0,this.cntV++,this.cntV===2&&(this.cntV=0,this.cntFV++,this.cntFV&=7))))},mirroredLoad:function(e){return this.vramMem[this.vramMirrorTable[e]]},mirroredWrite:function(e,t){if(e>=16128&&e<16160)e===16128||e===16144?(this.writeMem(16128,t),this.writeMem(16144,t)):e===16132||e===16148?(this.writeMem(16132,t),this.writeMem(16148,t)):e===16136||e===16152?(this.writeMem(16136,t),this.writeMem(16152,t)):e===16140||e===16156?(this.writeMem(16140,t),this.writeMem(16156,t)):this.writeMem(e,t);else if(e<this.vramMirrorTable.length)this.writeMem(this.vramMirrorTable[e],t);else throw new Error("Invalid VRAM address: "+e.toString(16))},triggerRendering:function(){this.scanline>=21&&this.scanline<=260&&(this.renderFramePartially(this.lastRenderedScanline+1,this.scanline-21-this.lastRenderedScanline),this.lastRenderedScanline=this.scanline-21)},renderFramePartially:function(e,t){if(this.f_spVisibility===1&&this.renderSpritesPartially(e,t,!0),this.f_bgVisibility===1){var n=e<<8,r=e+t<<8;r>61440&&(r=61440);for(var o=this.buffer,a=this.bgbuffer,u=this.pixrendered,c=n;c<r;c++)u[c]>255&&(o[c]=a[c])}this.f_spVisibility===1&&this.renderSpritesPartially(e,t,!1),this.validTileData=!1},renderBgScanline:function(e,t){var n=this.regS===0?0:256,r=(t<<8)-this.regFH;if(this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH],this.cntHT=this.regHT,this.cntH=this.regH,this.curNt=this.ntable1[this.cntV+this.cntV+this.cntH],t<240&&t-this.cntFV>=0){for(var o=this.cntFV<<3,a=this.scantile,u=this.attrib,c=this.ptTile,m=this.nameTable,_=this.imgPalette,v=this.pixrendered,R=e?this.bgbuffer:this.buffer,b,L,H,J,E=0;E<32;E++){if(t>=0){if(this.validTileData){if(b=a[E],typeof b>"u")continue;L=b.pix,H=u[E]}else{if(b=c[n+m[this.curNt].getTileIndex(this.cntHT,this.cntVT)],typeof b>"u")continue;L=b.pix,H=m[this.curNt].getAttrib(this.cntHT,this.cntVT),a[E]=b,u[E]=H}var T=0,D=(E<<3)-this.regFH;if(D>-8)if(D<0&&(r-=D,T=-D),b.opaque[this.cntFV])for(;T<8;T++)R[r]=_[L[o+T]+H],v[r]|=256,r++;else for(;T<8;T++)J=L[o+T],J!==0&&(R[r]=_[J+H],v[r]|=256),r++}++this.cntHT===32&&(this.cntHT=0,this.cntH++,this.cntH%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH])}this.validTileData=!0}this.cntFV++,this.cntFV===8&&(this.cntFV=0,this.cntVT++,this.cntVT===30?(this.cntVT=0,this.cntV++,this.cntV%=2,this.curNt=this.ntable1[(this.cntV<<1)+this.cntH]):this.cntVT===32&&(this.cntVT=0),this.validTileData=!1)},renderSpritesPartially:function(e,t,n){if(this.f_spVisibility===1){for(var r=0;r<64;r++)if(this.bgPriority[r]===n&&this.sprX[r]>=0&&this.sprX[r]<256&&this.sprY[r]+8>=e&&this.sprY[r]<e+t)if(this.f_spriteSize===0)this.srcy1=0,this.srcy2=8,this.sprY[r]<e&&(this.srcy1=e-this.sprY[r]-1),this.sprY[r]+8>e+t&&(this.srcy2=e+t-this.sprY[r]+1),this.f_spPatternTable===0?this.ptTile[this.sprTile[r]].render(this.buffer,0,this.srcy1,8,this.srcy2,this.sprX[r],this.sprY[r]+1,this.sprCol[r],this.sprPalette,this.horiFlip[r],this.vertFlip[r],r,this.pixrendered):this.ptTile[this.sprTile[r]+256].render(this.buffer,0,this.srcy1,8,this.srcy2,this.sprX[r],this.sprY[r]+1,this.sprCol[r],this.sprPalette,this.horiFlip[r],this.vertFlip[r],r,this.pixrendered);else{var o=this.sprTile[r];o&1&&(o=this.sprTile[r]-1+256);var a=0,u=8;this.sprY[r]<e&&(a=e-this.sprY[r]-1),this.sprY[r]+8>e+t&&(u=e+t-this.sprY[r]),this.ptTile[o+(this.vertFlip[r]?1:0)].render(this.buffer,0,a,8,u,this.sprX[r],this.sprY[r]+1,this.sprCol[r],this.sprPalette,this.horiFlip[r],this.vertFlip[r],r,this.pixrendered),a=0,u=8,this.sprY[r]+8<e&&(a=e-(this.sprY[r]+8+1)),this.sprY[r]+16>e+t&&(u=e+t-(this.sprY[r]+8)),this.ptTile[o+(this.vertFlip[r]?0:1)].render(this.buffer,0,a,8,u,this.sprX[r],this.sprY[r]+1+8,this.sprCol[r],this.sprPalette,this.horiFlip[r],this.vertFlip[r],r,this.pixrendered)}}},checkSprite0:function(e){this.spr0HitX=-1,this.spr0HitY=-1;var t,n=this.f_spPatternTable===0?0:256,r,o,a,u,c;if(r=this.sprX[0],o=this.sprY[0]+1,this.f_spriteSize===0){if(o<=e&&o+8>e&&r>=-7&&r<256)if(a=this.ptTile[this.sprTile[0]+n],this.vertFlip[0]?t=7-(e-o):t=e-o,t*=8,c=e*256+r,this.horiFlip[0])for(u=7;u>=0;u--){if(r>=0&&r<256&&c>=0&&c<61440&&this.pixrendered[c]!==0&&a.pix[t+u]!==0)return this.spr0HitX=c%256,this.spr0HitY=e,!0;r++,c++}else for(u=0;u<8;u++){if(r>=0&&r<256&&c>=0&&c<61440&&this.pixrendered[c]!==0&&a.pix[t+u]!==0)return this.spr0HitX=c%256,this.spr0HitY=e,!0;r++,c++}}else if(o<=e&&o+16>e&&r>=-7&&r<256)if(this.vertFlip[0]?t=15-(e-o):t=e-o,t<8?a=this.ptTile[this.sprTile[0]+(this.vertFlip[0]?1:0)+(this.sprTile[0]&1?255:0)]:(a=this.ptTile[this.sprTile[0]+(this.vertFlip[0]?0:1)+(this.sprTile[0]&1?255:0)],this.vertFlip[0]?t=15-t:t-=8),t*=8,c=e*256+r,this.horiFlip[0])for(u=7;u>=0;u--){if(r>=0&&r<256&&c>=0&&c<61440&&this.pixrendered[c]!==0&&a.pix[t+u]!==0)return this.spr0HitX=c%256,this.spr0HitY=e,!0;r++,c++}else for(u=0;u<8;u++){if(r>=0&&r<256&&c>=0&&c<61440&&this.pixrendered[c]!==0&&a.pix[t+u]!==0)return this.spr0HitX=c%256,this.spr0HitY=e,!0;r++,c++}return!1},writeMem:function(e,t){this.vramMem[e]=t,e<8192?(this.vramMem[e]=t,this.patternWrite(e,t)):e>=8192&&e<9152?this.nameTableWrite(this.ntable1[0],e-8192,t):e>=9152&&e<9216?this.attribTableWrite(this.ntable1[0],e-9152,t):e>=9216&&e<10176?this.nameTableWrite(this.ntable1[1],e-9216,t):e>=10176&&e<10240?this.attribTableWrite(this.ntable1[1],e-10176,t):e>=10240&&e<11200?this.nameTableWrite(this.ntable1[2],e-10240,t):e>=11200&&e<11264?this.attribTableWrite(this.ntable1[2],e-11200,t):e>=11264&&e<12224?this.nameTableWrite(this.ntable1[3],e-11264,t):e>=12224&&e<12288?this.attribTableWrite(this.ntable1[3],e-12224,t):e>=16128&&e<16160&&this.updatePalettes()},updatePalettes:function(){var e;for(e=0;e<16;e++)this.f_dispType===0?this.imgPalette[e]=this.palTable.getEntry(this.vramMem[16128+e]&63):this.imgPalette[e]=this.palTable.getEntry(this.vramMem[16128+e]&32);for(e=0;e<16;e++)this.f_dispType===0?this.sprPalette[e]=this.palTable.getEntry(this.vramMem[16144+e]&63):this.sprPalette[e]=this.palTable.getEntry(this.vramMem[16144+e]&32)},patternWrite:function(e,t){var n=Math.floor(e/16),r=e%16;r<8?this.ptTile[n].setScanline(r,t,this.vramMem[e+8]):this.ptTile[n].setScanline(r-8,this.vramMem[e-8],t)},nameTableWrite:function(e,t,n){this.nameTable[e].tile[t]=n,this.checkSprite0(this.scanline-20)},attribTableWrite:function(e,t,n){this.nameTable[e].writeAttrib(t,n)},spriteRamWriteUpdate:function(e,t){var n=Math.floor(e/4);n===0&&this.checkSprite0(this.scanline-20),e%4===0?this.sprY[n]=t:e%4===1?this.sprTile[n]=t:e%4===2?(this.vertFlip[n]=(t&128)!==0,this.horiFlip[n]=(t&64)!==0,this.bgPriority[n]=(t&32)!==0,this.sprCol[n]=(t&3)<<2):e%4===3&&(this.sprX[n]=t)},doNMI:function(){this.setStatusFlag(this.STATUS_VBLANK,!0),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NMI)},isPixelWhite:function(e,t){return this.triggerRendering(),this.nes.ppu.buffer[(t<<8)+e]===16777215},JSON_PROPERTIES:["vramMem","spriteMem","cntFV","cntV","cntH","cntVT","cntHT","regFV","regV","regH","regVT","regHT","regFH","regS","vramAddress","vramTmpAddress","f_nmiOnVblank","f_spriteSize","f_bgPatternTable","f_spPatternTable","f_addrInc","f_nTblAddress","f_color","f_spVisibility","f_bgVisibility","f_spClipping","f_bgClipping","f_dispType","vramBufferedReadValue","firstWrite","currentMirroring","vramMirrorTable","ntable1","sramAddress","hitSpr0","sprPalette","imgPalette","curX","scanline","lastRenderedScanline","curNt","scantile","attrib","buffer","bgbuffer","pixrendered","requestEndFrame","nmiOk","dummyCycleToggle","nmiCounter","validTileData","scanlineAlreadyRendered"],toJSON:function(){var e,t=Nm.toJSON(this);for(t.nameTable=[],e=0;e<this.nameTable.length;e++)t.nameTable[e]=this.nameTable[e].toJSON();for(t.ptTile=[],e=0;e<this.ptTile.length;e++)t.ptTile[e]=this.ptTile[e].toJSON();return t},fromJSON:function(e){var t;for(Nm.fromJSON(this,e),t=0;t<this.nameTable.length;t++)this.nameTable[t].fromJSON(e.nameTable[t]);for(t=0;t<this.ptTile.length;t++)this.ptTile[t].fromJSON(e.ptTile[t]);for(t=0;t<this.spriteMem.length;t++)this.spriteRamWriteUpdate(t,this.spriteMem[t])}};var G_=function(e,t,n){this.width=e,this.height=t,this.name=n,this.tile=new Array(e*t),this.attrib=new Array(e*t);for(var r=0;r<e*t;r++)this.tile[r]=0,this.attrib[r]=0};G_.prototype={getTileIndex:function(e,t){return this.tile[t*this.width+e]},getAttrib:function(e,t){return this.attrib[t*this.width+e]},writeAttrib:function(e,t){for(var n=e%8*4,r=Math.floor(e/8)*4,o,a,u,c,m=0;m<2;m++)for(var _=0;_<2;_++){o=t>>2*(m*2+_)&3;for(var v=0;v<2;v++)for(var R=0;R<2;R++)a=n+_*2+R,u=r+m*2+v,c=u*this.width+a,this.attrib[c]=o<<2&12}},toJSON:function(){return{tile:this.tile,attrib:this.attrib}},fromJSON:function(e){this.tile=e.tile,this.attrib=e.attrib}};var V_=function(){this.curTable=new Array(64),this.emphTable=new Array(8),this.currentEmph=-1};V_.prototype={reset:function(){this.setEmphasis(0)},loadNTSCPalette:function(){this.curTable=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],this.makeTables(),this.setEmphasis(0)},loadPALPalette:function(){this.curTable=[5395026,11796480,10485760,11599933,7602281,91,95,6208,12048,543240,26368,1196544,7153664,0,0,0,12899815,16728064,14421538,16729963,14090399,6818519,6588,21681,27227,35843,43776,2918400,10777088,0,0,0,16316664,16755516,16742785,16735173,16730354,14633471,4681215,46327,57599,58229,259115,7911470,15065624,7895160,0,0,16777215,16773822,16300216,16300248,16758527,16761855,13095423,10148607,8973816,8650717,12122296,16119980,16777136,16308472,0,0],this.makeTables(),this.setEmphasis(0)},makeTables:function(){for(var e,t,n,r,o,a,u,c,m=0;m<8;m++)for(a=1,u=1,c=1,m&1&&(a=.75,c=.75),m&2&&(a=.75,u=.75),m&4&&(u=.75,c=.75),this.emphTable[m]=new Array(64),o=0;o<64;o++)r=this.curTable[o],e=Math.floor(this.getRed(r)*a),t=Math.floor(this.getGreen(r)*u),n=Math.floor(this.getBlue(r)*c),this.emphTable[m][o]=this.getRgb(e,t,n)},setEmphasis:function(e){if(e!==this.currentEmph){this.currentEmph=e;for(var t=0;t<64;t++)this.curTable[t]=this.emphTable[e][t]}},getEntry:function(e){return this.curTable[e]},getRed:function(e){return e>>16&255},getGreen:function(e){return e>>8&255},getBlue:function(e){return e&255},getRgb:function(e,t,n){return e<<16|t<<8|n},loadDefaultPalette:function(){this.curTable[0]=this.getRgb(117,117,117),this.curTable[1]=this.getRgb(39,27,143),this.curTable[2]=this.getRgb(0,0,171),this.curTable[3]=this.getRgb(71,0,159),this.curTable[4]=this.getRgb(143,0,119),this.curTable[5]=this.getRgb(171,0,19),this.curTable[6]=this.getRgb(167,0,0),this.curTable[7]=this.getRgb(127,11,0),this.curTable[8]=this.getRgb(67,47,0),this.curTable[9]=this.getRgb(0,71,0),this.curTable[10]=this.getRgb(0,81,0),this.curTable[11]=this.getRgb(0,63,23),this.curTable[12]=this.getRgb(27,63,95),this.curTable[13]=this.getRgb(0,0,0),this.curTable[14]=this.getRgb(0,0,0),this.curTable[15]=this.getRgb(0,0,0),this.curTable[16]=this.getRgb(188,188,188),this.curTable[17]=this.getRgb(0,115,239),this.curTable[18]=this.getRgb(35,59,239),this.curTable[19]=this.getRgb(131,0,243),this.curTable[20]=this.getRgb(191,0,191),this.curTable[21]=this.getRgb(231,0,91),this.curTable[22]=this.getRgb(219,43,0),this.curTable[23]=this.getRgb(203,79,15),this.curTable[24]=this.getRgb(139,115,0),this.curTable[25]=this.getRgb(0,151,0),this.curTable[26]=this.getRgb(0,171,0),this.curTable[27]=this.getRgb(0,147,59),this.curTable[28]=this.getRgb(0,131,139),this.curTable[29]=this.getRgb(0,0,0),this.curTable[30]=this.getRgb(0,0,0),this.curTable[31]=this.getRgb(0,0,0),this.curTable[32]=this.getRgb(255,255,255),this.curTable[33]=this.getRgb(63,191,255),this.curTable[34]=this.getRgb(95,151,255),this.curTable[35]=this.getRgb(167,139,253),this.curTable[36]=this.getRgb(247,123,255),this.curTable[37]=this.getRgb(255,119,183),this.curTable[38]=this.getRgb(255,119,99),this.curTable[39]=this.getRgb(255,155,59),this.curTable[40]=this.getRgb(243,191,63),this.curTable[41]=this.getRgb(131,211,19),this.curTable[42]=this.getRgb(79,223,75),this.curTable[43]=this.getRgb(88,248,152),this.curTable[44]=this.getRgb(0,235,219),this.curTable[45]=this.getRgb(0,0,0),this.curTable[46]=this.getRgb(0,0,0),this.curTable[47]=this.getRgb(0,0,0),this.curTable[48]=this.getRgb(255,255,255),this.curTable[49]=this.getRgb(171,231,255),this.curTable[50]=this.getRgb(199,215,255),this.curTable[51]=this.getRgb(215,203,255),this.curTable[52]=this.getRgb(255,199,255),this.curTable[53]=this.getRgb(255,199,219),this.curTable[54]=this.getRgb(255,191,179),this.curTable[55]=this.getRgb(255,219,171),this.curTable[56]=this.getRgb(255,231,163),this.curTable[57]=this.getRgb(227,255,163),this.curTable[58]=this.getRgb(171,243,191),this.curTable[59]=this.getRgb(179,255,207),this.curTable[60]=this.getRgb(159,255,243),this.curTable[61]=this.getRgb(0,0,0),this.curTable[62]=this.getRgb(0,0,0),this.curTable[63]=this.getRgb(0,0,0),this.makeTables(),this.setEmphasis(0)}};var dI=U_,mI=17897725e-1,W_=function(e){this.nes=e,this.square1=new wf(this,!0),this.square2=new wf(this,!1),this.triangle=new q_(this),this.noise=new z_(this),this.dmc=new $_(this),this.frameIrqCounter=null,this.frameIrqCounterMax=4,this.initCounter=2048,this.channelEnableValue=null,this.sampleRate=44100,this.lengthLookup=null,this.dmcFreqLookup=null,this.noiseWavelengthLookup=null,this.square_table=null,this.tnd_table=null,this.frameIrqEnabled=!1,this.frameIrqActive=null,this.frameClockNow=null,this.startedPlaying=!1,this.recordOutput=!1,this.initingHardware=!1,this.masterFrameCounter=null,this.derivedFrameCounter=null,this.countSequence=null,this.sampleTimer=null,this.frameTime=null,this.sampleTimerMax=null,this.sampleCount=null,this.triValue=0,this.smpSquare1=null,this.smpSquare2=null,this.smpTriangle=null,this.smpDmc=null,this.accCount=null,this.prevSampleL=0,this.prevSampleR=0,this.smpAccumL=0,this.smpAccumR=0,this.dacRange=0,this.dcValue=0,this.masterVolume=256,this.stereoPosLSquare1=null,this.stereoPosLSquare2=null,this.stereoPosLTriangle=null,this.stereoPosLNoise=null,this.stereoPosLDMC=null,this.stereoPosRSquare1=null,this.stereoPosRSquare2=null,this.stereoPosRTriangle=null,this.stereoPosRNoise=null,this.stereoPosRDMC=null,this.extraCycles=null,this.maxSample=null,this.minSample=null,this.panning=[80,170,100,150,128],this.setPanning(this.panning),this.initLengthLookup(),this.initDmcFrequencyLookup(),this.initNoiseWavelengthLookup(),this.initDACtables();for(var t=0;t<20;t++)t===16?this.writeReg(16400,16):this.writeReg(16384+t,0);this.reset()};W_.prototype={reset:function(){this.sampleRate=this.nes.opts.sampleRate,this.sampleTimerMax=Math.floor(1024*mI*this.nes.opts.preferredFrameRate/(this.sampleRate*60)),this.frameTime=Math.floor(14915*this.nes.opts.preferredFrameRate/60),this.sampleTimer=0,this.updateChannelEnable(0),this.masterFrameCounter=0,this.derivedFrameCounter=0,this.countSequence=0,this.sampleCount=0,this.initCounter=2048,this.frameIrqEnabled=!1,this.initingHardware=!1,this.resetCounter(),this.square1.reset(),this.square2.reset(),this.triangle.reset(),this.noise.reset(),this.dmc.reset(),this.accCount=0,this.smpSquare1=0,this.smpSquare2=0,this.smpTriangle=0,this.smpDmc=0,this.frameIrqEnabled=!1,this.frameIrqCounterMax=4,this.channelEnableValue=255,this.startedPlaying=!1,this.prevSampleL=0,this.prevSampleR=0,this.smpAccumL=0,this.smpAccumR=0,this.maxSample=-5e5,this.minSample=5e5},readReg:function(e){var t=0;return t|=this.square1.getLengthStatus(),t|=this.square2.getLengthStatus()<<1,t|=this.triangle.getLengthStatus()<<2,t|=this.noise.getLengthStatus()<<3,t|=this.dmc.getLengthStatus()<<4,t|=(this.frameIrqActive&&this.frameIrqEnabled?1:0)<<6,t|=this.dmc.getIrqStatus()<<7,this.frameIrqActive=!1,this.dmc.irqGenerated=!1,t&65535},writeReg:function(e,t){e>=16384&&e<16388?this.square1.writeReg(e,t):e>=16388&&e<16392?this.square2.writeReg(e,t):e>=16392&&e<16396?this.triangle.writeReg(e,t):e>=16396&&e<=16399?this.noise.writeReg(e,t):e===16400?this.dmc.writeReg(e,t):e===16401?this.dmc.writeReg(e,t):e===16402?this.dmc.writeReg(e,t):e===16403?this.dmc.writeReg(e,t):e===16405?(this.updateChannelEnable(t),t!==0&&this.initCounter>0&&(this.initingHardware=!0),this.dmc.writeReg(e,t)):e===16407&&(this.countSequence=t>>7&1,this.masterFrameCounter=0,this.frameIrqActive=!1,t>>6&1?this.frameIrqEnabled=!1:this.frameIrqEnabled=!0,this.countSequence===0?(this.frameIrqCounterMax=4,this.derivedFrameCounter=4):(this.frameIrqCounterMax=5,this.derivedFrameCounter=0,this.frameCounterTick()))},resetCounter:function(){this.countSequence===0?this.derivedFrameCounter=4:this.derivedFrameCounter=0},updateChannelEnable:function(e){this.channelEnableValue=e&65535,this.square1.setEnabled((e&1)!==0),this.square2.setEnabled((e&2)!==0),this.triangle.setEnabled((e&4)!==0),this.noise.setEnabled((e&8)!==0),this.dmc.setEnabled((e&16)!==0)},clockFrameCounter:function(e){if(this.initCounter>0&&this.initingHardware){this.initCounter-=e,this.initCounter<=0&&(this.initingHardware=!1);return}e+=this.extraCycles;var t=this.sampleTimerMax-this.sampleTimer;e<<10>t?(this.extraCycles=(e<<10)-t>>10,e-=this.extraCycles):this.extraCycles=0;var n=this.dmc,r=this.triangle,o=this.square1,a=this.square2,u=this.noise;if(n.isEnabled)for(n.shiftCounter-=e<<3;n.shiftCounter<=0&&n.dmaFrequency>0;)n.shiftCounter+=n.dmaFrequency,n.clockDmc();if(r.progTimerMax>0)for(r.progTimerCount-=e;r.progTimerCount<=0;)r.progTimerCount+=r.progTimerMax+1,r.linearCounter>0&&r.lengthCounter>0&&(r.triangleCounter++,r.triangleCounter&=31,r.isEnabled&&(r.triangleCounter>=16?r.sampleValue=r.triangleCounter&15:r.sampleValue=15-(r.triangleCounter&15),r.sampleValue<<=4));o.progTimerCount-=e,o.progTimerCount<=0&&(o.progTimerCount+=o.progTimerMax+1<<1,o.squareCounter++,o.squareCounter&=7,o.updateSampleValue()),a.progTimerCount-=e,a.progTimerCount<=0&&(a.progTimerCount+=a.progTimerMax+1<<1,a.squareCounter++,a.squareCounter&=7,a.updateSampleValue());var c=e;if(u.progTimerCount-c>0)u.progTimerCount-=c,u.accCount+=c,u.accValue+=c*u.sampleValue;else for(;c-- >0;)--u.progTimerCount<=0&&u.progTimerMax>0&&(u.shiftReg<<=1,u.tmp=(u.shiftReg<<(u.randomMode===0?1:6)^u.shiftReg)&32768,u.tmp!==0?(u.shiftReg|=1,u.randomBit=0,u.sampleValue=0):(u.randomBit=1,u.isEnabled&&u.lengthCounter>0?u.sampleValue=u.masterVolume:u.sampleValue=0),u.progTimerCount+=u.progTimerMax),u.accValue+=u.sampleValue,u.accCount++;this.frameIrqEnabled&&this.frameIrqActive&&this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NORMAL),this.masterFrameCounter+=e<<1,this.masterFrameCounter>=this.frameTime&&(this.masterFrameCounter-=this.frameTime,this.frameCounterTick()),this.accSample(e),this.sampleTimer+=e<<10,this.sampleTimer>=this.sampleTimerMax&&(this.sample(),this.sampleTimer-=this.sampleTimerMax)},accSample:function(e){this.triangle.sampleCondition&&(this.triValue=Math.floor((this.triangle.progTimerCount<<4)/(this.triangle.progTimerMax+1)),this.triValue>16&&(this.triValue=16),this.triangle.triangleCounter>=16&&(this.triValue=16-this.triValue),this.triValue+=this.triangle.sampleValue),e===2?(this.smpTriangle+=this.triValue<<1,this.smpDmc+=this.dmc.sample<<1,this.smpSquare1+=this.square1.sampleValue<<1,this.smpSquare2+=this.square2.sampleValue<<1,this.accCount+=2):e===4?(this.smpTriangle+=this.triValue<<2,this.smpDmc+=this.dmc.sample<<2,this.smpSquare1+=this.square1.sampleValue<<2,this.smpSquare2+=this.square2.sampleValue<<2,this.accCount+=4):(this.smpTriangle+=e*this.triValue,this.smpDmc+=e*this.dmc.sample,this.smpSquare1+=e*this.square1.sampleValue,this.smpSquare2+=e*this.square2.sampleValue,this.accCount+=e)},frameCounterTick:function(){this.derivedFrameCounter++,this.derivedFrameCounter>=this.frameIrqCounterMax&&(this.derivedFrameCounter=0),(this.derivedFrameCounter===1||this.derivedFrameCounter===3)&&(this.triangle.clockLengthCounter(),this.square1.clockLengthCounter(),this.square2.clockLengthCounter(),this.noise.clockLengthCounter(),this.square1.clockSweep(),this.square2.clockSweep()),this.derivedFrameCounter>=0&&this.derivedFrameCounter<4&&(this.square1.clockEnvDecay(),this.square2.clockEnvDecay(),this.noise.clockEnvDecay(),this.triangle.clockLinearCounter()),this.derivedFrameCounter===3&&this.countSequence===0&&(this.frameIrqActive=!0)},sample:function(){var e,t;this.accCount>0?(this.smpSquare1<<=4,this.smpSquare1=Math.floor(this.smpSquare1/this.accCount),this.smpSquare2<<=4,this.smpSquare2=Math.floor(this.smpSquare2/this.accCount),this.smpTriangle=Math.floor(this.smpTriangle/this.accCount),this.smpDmc<<=4,this.smpDmc=Math.floor(this.smpDmc/this.accCount),this.accCount=0):(this.smpSquare1=this.square1.sampleValue<<4,this.smpSquare2=this.square2.sampleValue<<4,this.smpTriangle=this.triangle.sampleValue,this.smpDmc=this.dmc.sample<<4);var n=Math.floor((this.noise.accValue<<4)/this.noise.accCount);this.noise.accValue=n>>4,this.noise.accCount=1,e=this.smpSquare1*this.stereoPosLSquare1+this.smpSquare2*this.stereoPosLSquare2>>8,t=3*this.smpTriangle*this.stereoPosLTriangle+(n<<1)*this.stereoPosLNoise+this.smpDmc*this.stereoPosLDMC>>8,e>=this.square_table.length&&(e=this.square_table.length-1),t>=this.tnd_table.length&&(t=this.tnd_table.length-1);var r=this.square_table[e]+this.tnd_table[t]-this.dcValue;e=this.smpSquare1*this.stereoPosRSquare1+this.smpSquare2*this.stereoPosRSquare2>>8,t=3*this.smpTriangle*this.stereoPosRTriangle+(n<<1)*this.stereoPosRNoise+this.smpDmc*this.stereoPosRDMC>>8,e>=this.square_table.length&&(e=this.square_table.length-1),t>=this.tnd_table.length&&(t=this.tnd_table.length-1);var o=this.square_table[e]+this.tnd_table[t]-this.dcValue,a=r-this.prevSampleL;this.prevSampleL+=a,this.smpAccumL+=a-(this.smpAccumL>>10),r=this.smpAccumL;var u=o-this.prevSampleR;this.prevSampleR+=u,this.smpAccumR+=u-(this.smpAccumR>>10),o=this.smpAccumR,r>this.maxSample&&(this.maxSample=r),r<this.minSample&&(this.minSample=r),this.nes.opts.onAudioSample&&this.nes.opts.onAudioSample(r/32768,o/32768),this.smpSquare1=0,this.smpSquare2=0,this.smpTriangle=0,this.smpDmc=0},getLengthMax:function(e){return this.lengthLookup[e>>3]},getDmcFrequency:function(e){return e>=0&&e<16?this.dmcFreqLookup[e]:0},getNoiseWaveLength:function(e){return e>=0&&e<16?this.noiseWavelengthLookup[e]:0},setPanning:function(e){for(var t=0;t<5;t++)this.panning[t]=e[t];this.updateStereoPos()},setMasterVolume:function(e){e<0&&(e=0),e>256&&(e=256),this.masterVolume=e,this.updateStereoPos()},updateStereoPos:function(){this.stereoPosLSquare1=this.panning[0]*this.masterVolume>>8,this.stereoPosLSquare2=this.panning[1]*this.masterVolume>>8,this.stereoPosLTriangle=this.panning[2]*this.masterVolume>>8,this.stereoPosLNoise=this.panning[3]*this.masterVolume>>8,this.stereoPosLDMC=this.panning[4]*this.masterVolume>>8,this.stereoPosRSquare1=this.masterVolume-this.stereoPosLSquare1,this.stereoPosRSquare2=this.masterVolume-this.stereoPosLSquare2,this.stereoPosRTriangle=this.masterVolume-this.stereoPosLTriangle,this.stereoPosRNoise=this.masterVolume-this.stereoPosLNoise,this.stereoPosRDMC=this.masterVolume-this.stereoPosLDMC},initLengthLookup:function(){this.lengthLookup=[10,254,20,2,40,4,80,6,160,8,60,10,14,12,26,14,12,16,24,18,48,20,96,22,192,24,72,26,16,28,32,30]},initDmcFrequencyLookup:function(){this.dmcFreqLookup=new Array(16),this.dmcFreqLookup[0]=3424,this.dmcFreqLookup[1]=3040,this.dmcFreqLookup[2]=2720,this.dmcFreqLookup[3]=2560,this.dmcFreqLookup[4]=2288,this.dmcFreqLookup[5]=2032,this.dmcFreqLookup[6]=1808,this.dmcFreqLookup[7]=1712,this.dmcFreqLookup[8]=1520,this.dmcFreqLookup[9]=1280,this.dmcFreqLookup[10]=1136,this.dmcFreqLookup[11]=1024,this.dmcFreqLookup[12]=848,this.dmcFreqLookup[13]=672,this.dmcFreqLookup[14]=576,this.dmcFreqLookup[15]=432},initNoiseWavelengthLookup:function(){this.noiseWavelengthLookup=new Array(16),this.noiseWavelengthLookup[0]=4,this.noiseWavelengthLookup[1]=8,this.noiseWavelengthLookup[2]=16,this.noiseWavelengthLookup[3]=32,this.noiseWavelengthLookup[4]=64,this.noiseWavelengthLookup[5]=96,this.noiseWavelengthLookup[6]=128,this.noiseWavelengthLookup[7]=160,this.noiseWavelengthLookup[8]=202,this.noiseWavelengthLookup[9]=254,this.noiseWavelengthLookup[10]=380,this.noiseWavelengthLookup[11]=508,this.noiseWavelengthLookup[12]=762,this.noiseWavelengthLookup[13]=1016,this.noiseWavelengthLookup[14]=2034,this.noiseWavelengthLookup[15]=4068},initDACtables:function(){var e,t,n,r=0,o=0;for(this.square_table=new Array(32*16),this.tnd_table=new Array(204*16),n=0;n<32*16;n++)e=95.52/(8128/(n/16)+100),e*=.98411,e*=5e4,t=Math.floor(e),this.square_table[n]=t,t>r&&(r=t);for(n=0;n<204*16;n++)e=163.67/(24329/(n/16)+100),e*=.98411,e*=5e4,t=Math.floor(e),this.tnd_table[n]=t,t>o&&(o=t);this.dacRange=r+o,this.dcValue=this.dacRange/2}};var $_=function(e){this.papu=e,this.MODE_NORMAL=0,this.MODE_LOOP=1,this.MODE_IRQ=2,this.isEnabled=null,this.hasSample=null,this.irqGenerated=!1,this.playMode=null,this.dmaFrequency=null,this.dmaCounter=null,this.deltaCounter=null,this.playStartAddress=null,this.playAddress=null,this.playLength=null,this.playLengthCounter=null,this.shiftCounter=null,this.reg4012=null,this.reg4013=null,this.sample=null,this.dacLsb=null,this.data=null,this.reset()};$_.prototype={clockDmc:function(){this.hasSample&&(this.data&1?this.deltaCounter<63&&this.deltaCounter++:this.deltaCounter>0&&this.deltaCounter--,this.sample=this.isEnabled?(this.deltaCounter<<1)+this.dacLsb:0,this.data>>=1),this.dmaCounter--,this.dmaCounter<=0&&(this.hasSample=!1,this.endOfSample(),this.dmaCounter=8),this.irqGenerated&&this.papu.nes.cpu.requestIrq(this.papu.nes.cpu.IRQ_NORMAL)},endOfSample:function(){this.playLengthCounter===0&&this.playMode===this.MODE_LOOP&&(this.playAddress=this.playStartAddress,this.playLengthCounter=this.playLength),this.playLengthCounter>0&&(this.nextSample(),this.playLengthCounter===0&&this.playMode===this.MODE_IRQ&&(this.irqGenerated=!0))},nextSample:function(){this.data=this.papu.nes.mmap.load(this.playAddress),this.papu.nes.cpu.haltCycles(4),this.playLengthCounter--,this.playAddress++,this.playAddress>65535&&(this.playAddress=32768),this.hasSample=!0},writeReg:function(e,t){e===16400?(t>>6?(t>>6&1)===1?this.playMode=this.MODE_LOOP:t>>6===2&&(this.playMode=this.MODE_IRQ):this.playMode=this.MODE_NORMAL,t&128||(this.irqGenerated=!1),this.dmaFrequency=this.papu.getDmcFrequency(t&15)):e===16401?(this.deltaCounter=t>>1&63,this.dacLsb=t&1,this.sample=(this.deltaCounter<<1)+this.dacLsb):e===16402?(this.playStartAddress=t<<6|49152,this.playAddress=this.playStartAddress,this.reg4012=t):e===16403?(this.playLength=(t<<4)+1,this.playLengthCounter=this.playLength,this.reg4013=t):e===16405&&(t>>4&1?(this.playAddress=this.playStartAddress,this.playLengthCounter=this.playLength):this.playLengthCounter=0,this.irqGenerated=!1)},setEnabled:function(e){!this.isEnabled&&e&&(this.playLengthCounter=this.playLength),this.isEnabled=e},getLengthStatus:function(){return this.playLengthCounter===0||!this.isEnabled?0:1},getIrqStatus:function(){return this.irqGenerated?1:0},reset:function(){this.isEnabled=!1,this.irqGenerated=!1,this.playMode=this.MODE_NORMAL,this.dmaFrequency=0,this.dmaCounter=0,this.deltaCounter=0,this.playStartAddress=0,this.playAddress=0,this.playLength=0,this.playLengthCounter=0,this.sample=0,this.dacLsb=0,this.shiftCounter=0,this.reg4012=0,this.reg4013=0,this.data=0}};var z_=function(e){this.papu=e,this.isEnabled=null,this.envDecayDisable=null,this.envDecayLoopEnable=null,this.lengthCounterEnable=null,this.envReset=null,this.shiftNow=null,this.lengthCounter=null,this.progTimerCount=null,this.progTimerMax=null,this.envDecayRate=null,this.envDecayCounter=null,this.envVolume=null,this.masterVolume=null,this.shiftReg=16384,this.randomBit=null,this.randomMode=null,this.sampleValue=null,this.accValue=0,this.accCount=1,this.tmp=null,this.reset()};z_.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.isEnabled=!1,this.lengthCounter=0,this.lengthCounterEnable=!1,this.envDecayDisable=!1,this.envDecayLoopEnable=!1,this.shiftNow=!1,this.envDecayRate=0,this.envDecayCounter=0,this.envVolume=0,this.masterVolume=0,this.shiftReg=1,this.randomBit=0,this.randomMode=0,this.sampleValue=0,this.tmp=0},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,this.lengthCounter===0&&this.updateSampleValue())},clockEnvDecay:function(){this.envReset?(this.envReset=!1,this.envDecayCounter=this.envDecayRate+1,this.envVolume=15):--this.envDecayCounter<=0&&(this.envDecayCounter=this.envDecayRate+1,this.envVolume>0?this.envVolume--:this.envVolume=this.envDecayLoopEnable?15:0),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()},updateSampleValue:function(){this.isEnabled&&this.lengthCounter>0&&(this.sampleValue=this.randomBit*this.masterVolume)},writeReg:function(e,t){e===16396?(this.envDecayDisable=(t&16)!==0,this.envDecayRate=t&15,this.envDecayLoopEnable=(t&32)!==0,this.lengthCounterEnable=(t&32)===0,this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume):e===16398?(this.progTimerMax=this.papu.getNoiseWaveLength(t&15),this.randomMode=t>>7):e===16399&&(this.lengthCounter=this.papu.getLengthMax(t&248),this.envReset=!0)},setEnabled:function(e){this.isEnabled=e,e||(this.lengthCounter=0),this.updateSampleValue()},getLengthStatus:function(){return this.lengthCounter===0||!this.isEnabled?0:1}};var wf=function(e,t){this.papu=e,this.dutyLookup=[0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,0,0,1,1,1,1,1],this.impLookup=[1,-1,0,0,0,0,0,0,1,0,-1,0,0,0,0,0,1,0,0,0,-1,0,0,0,-1,0,1,0,0,0,0,0],this.sqr1=t,this.isEnabled=null,this.lengthCounterEnable=null,this.sweepActive=null,this.envDecayDisable=null,this.envDecayLoopEnable=null,this.envReset=null,this.sweepCarry=null,this.updateSweepPeriod=null,this.progTimerCount=null,this.progTimerMax=null,this.lengthCounter=null,this.squareCounter=null,this.sweepCounter=null,this.sweepCounterMax=null,this.sweepMode=null,this.sweepShiftAmount=null,this.envDecayRate=null,this.envDecayCounter=null,this.envVolume=null,this.masterVolume=null,this.dutyMode=null,this.sweepResult=null,this.sampleValue=null,this.vol=null,this.reset()};wf.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.lengthCounter=0,this.squareCounter=0,this.sweepCounter=0,this.sweepCounterMax=0,this.sweepMode=0,this.sweepShiftAmount=0,this.envDecayRate=0,this.envDecayCounter=0,this.envVolume=0,this.masterVolume=0,this.dutyMode=0,this.vol=0,this.isEnabled=!1,this.lengthCounterEnable=!1,this.sweepActive=!1,this.sweepCarry=!1,this.envDecayDisable=!1,this.envDecayLoopEnable=!1},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,this.lengthCounter===0&&this.updateSampleValue())},clockEnvDecay:function(){this.envReset?(this.envReset=!1,this.envDecayCounter=this.envDecayRate+1,this.envVolume=15):--this.envDecayCounter<=0&&(this.envDecayCounter=this.envDecayRate+1,this.envVolume>0?this.envVolume--:this.envVolume=this.envDecayLoopEnable?15:0),this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()},clockSweep:function(){--this.sweepCounter<=0&&(this.sweepCounter=this.sweepCounterMax+1,this.sweepActive&&this.sweepShiftAmount>0&&this.progTimerMax>7&&(this.sweepCarry=!1,this.sweepMode===0?(this.progTimerMax+=this.progTimerMax>>this.sweepShiftAmount,this.progTimerMax>4095&&(this.progTimerMax=4095,this.sweepCarry=!0)):this.progTimerMax=this.progTimerMax-((this.progTimerMax>>this.sweepShiftAmount)-(this.sqr1?1:0)))),this.updateSweepPeriod&&(this.updateSweepPeriod=!1,this.sweepCounter=this.sweepCounterMax+1)},updateSampleValue:function(){this.isEnabled&&this.lengthCounter>0&&this.progTimerMax>7?this.sweepMode===0&&this.progTimerMax+(this.progTimerMax>>this.sweepShiftAmount)>4095?this.sampleValue=0:this.sampleValue=this.masterVolume*this.dutyLookup[(this.dutyMode<<3)+this.squareCounter]:this.sampleValue=0},writeReg:function(e,t){var n=this.sqr1?0:4;e===16384+n?(this.envDecayDisable=(t&16)!==0,this.envDecayRate=t&15,this.envDecayLoopEnable=(t&32)!==0,this.dutyMode=t>>6&3,this.lengthCounterEnable=(t&32)===0,this.envDecayDisable?this.masterVolume=this.envDecayRate:this.masterVolume=this.envVolume,this.updateSampleValue()):e===16385+n?(this.sweepActive=(t&128)!==0,this.sweepCounterMax=t>>4&7,this.sweepMode=t>>3&1,this.sweepShiftAmount=t&7,this.updateSweepPeriod=!0):e===16386+n?(this.progTimerMax&=1792,this.progTimerMax|=t):e===16387+n&&(this.progTimerMax&=255,this.progTimerMax|=(t&7)<<8,this.isEnabled&&(this.lengthCounter=this.papu.getLengthMax(t&248)),this.envReset=!0)},setEnabled:function(e){this.isEnabled=e,e||(this.lengthCounter=0),this.updateSampleValue()},getLengthStatus:function(){return this.lengthCounter===0||!this.isEnabled?0:1}};var q_=function(e){this.papu=e,this.isEnabled=null,this.sampleCondition=null,this.lengthCounterEnable=null,this.lcHalt=null,this.lcControl=null,this.progTimerCount=null,this.progTimerMax=null,this.triangleCounter=null,this.lengthCounter=null,this.linearCounter=null,this.lcLoadValue=null,this.sampleValue=null,this.tmp=null,this.reset()};q_.prototype={reset:function(){this.progTimerCount=0,this.progTimerMax=0,this.triangleCounter=0,this.isEnabled=!1,this.sampleCondition=!1,this.lengthCounter=0,this.lengthCounterEnable=!1,this.linearCounter=0,this.lcLoadValue=0,this.lcHalt=!0,this.lcControl=!1,this.tmp=0,this.sampleValue=15},clockLengthCounter:function(){this.lengthCounterEnable&&this.lengthCounter>0&&(this.lengthCounter--,this.lengthCounter===0&&this.updateSampleCondition())},clockLinearCounter:function(){this.lcHalt?(this.linearCounter=this.lcLoadValue,this.updateSampleCondition()):this.linearCounter>0&&(this.linearCounter--,this.updateSampleCondition()),this.lcControl||(this.lcHalt=!1)},getLengthStatus:function(){return this.lengthCounter===0||!this.isEnabled?0:1},readReg:function(e){return 0},writeReg:function(e,t){e===16392?(this.lcControl=(t&128)!==0,this.lcLoadValue=t&127,this.lengthCounterEnable=!this.lcControl):e===16394?(this.progTimerMax&=1792,this.progTimerMax|=t):e===16395&&(this.progTimerMax&=255,this.progTimerMax|=(t&7)<<8,this.lengthCounter=this.papu.getLengthMax(t&248),this.lcHalt=!0),this.updateSampleCondition()},clockProgrammableTimer:function(e){if(this.progTimerMax>0)for(this.progTimerCount+=e;this.progTimerMax>0&&this.progTimerCount>=this.progTimerMax;)this.progTimerCount-=this.progTimerMax,this.isEnabled&&this.lengthCounter>0&&this.linearCounter>0&&this.clockTriangleGenerator()},clockTriangleGenerator:function(){this.triangleCounter++,this.triangleCounter&=31},setEnabled:function(e){this.isEnabled=e,e||(this.lengthCounter=0),this.updateSampleCondition()},updateSampleCondition:function(){this.sampleCondition=this.isEnabled&&this.progTimerMax>7&&this.linearCounter>0&&this.lengthCounter>0}};var gI=W_,Jr=Gh,$={};$[0]=function(e){this.nes=e};$[0].prototype={reset:function(){this.joy1StrobeState=0,this.joy2StrobeState=0,this.joypadLastWrite=0,this.zapperFired=!1,this.zapperX=null,this.zapperY=null},write:function(e,t){e<8192?this.nes.cpu.mem[e&2047]=t:e>16407?(this.nes.cpu.mem[e]=t,e>=24576&&e<32768&&this.nes.opts.onBatteryRamWrite(e,t)):e>8199&&e<16384?this.regWrite(8192+(e&7),t):this.regWrite(e,t)},writelow:function(e,t){e<8192?this.nes.cpu.mem[e&2047]=t:e>16407?this.nes.cpu.mem[e]=t:e>8199&&e<16384?this.regWrite(8192+(e&7),t):this.regWrite(e,t)},load:function(e){return e&=65535,e>16407?this.nes.cpu.mem[e]:e>=8192?this.regLoad(e):this.nes.cpu.mem[e&2047]},regLoad:function(e){switch(e>>12){case 0:break;case 1:break;case 2:case 3:switch(e&7){case 0:return this.nes.cpu.mem[8192];case 1:return this.nes.cpu.mem[8193];case 2:return this.nes.ppu.readStatusRegister();case 3:return 0;case 4:return this.nes.ppu.sramLoad();case 5:return 0;case 6:return 0;case 7:return this.nes.ppu.vramLoad()}break;case 4:switch(e-16405){case 0:return this.nes.papu.readReg(e);case 1:return this.joy1Read();case 2:var t;return this.zapperX!==null&&this.zapperY!==null&&this.nes.ppu.isPixelWhite(this.zapperX,this.zapperY)?t=0:t=8,this.zapperFired&&(t|=16),(this.joy2Read()|t)&65535}break}return 0},regWrite:function(e,t){switch(e){case 8192:this.nes.cpu.mem[e]=t,this.nes.ppu.updateControlReg1(t);break;case 8193:this.nes.cpu.mem[e]=t,this.nes.ppu.updateControlReg2(t);break;case 8195:this.nes.ppu.writeSRAMAddress(t);break;case 8196:this.nes.ppu.sramWrite(t);break;case 8197:this.nes.ppu.scrollWrite(t);break;case 8198:this.nes.ppu.writeVRAMAddress(t);break;case 8199:this.nes.ppu.vramWrite(t);break;case 16404:this.nes.ppu.sramDMA(t);break;case 16405:this.nes.papu.writeReg(e,t);break;case 16406:!(t&1)&&(this.joypadLastWrite&1)===1&&(this.joy1StrobeState=0,this.joy2StrobeState=0),this.joypadLastWrite=t;break;case 16407:this.nes.papu.writeReg(e,t);break;default:e>=16384&&e<=16407&&this.nes.papu.writeReg(e,t)}},joy1Read:function(){var e;switch(this.joy1StrobeState){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e=this.nes.controllers[1].state[this.joy1StrobeState];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:e=0;break;case 19:e=1;break;default:e=0}return this.joy1StrobeState++,this.joy1StrobeState===24&&(this.joy1StrobeState=0),e},joy2Read:function(){var e;switch(this.joy2StrobeState){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e=this.nes.controllers[2].state[this.joy2StrobeState];break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:e=0;break;case 19:e=1;break;default:e=0}return this.joy2StrobeState++,this.joy2StrobeState===24&&(this.joy2StrobeState=0),e},loadROM:function(){if(!this.nes.rom.valid||this.nes.rom.romCount<1)throw new Error("NoMapper: Invalid ROM! Unable to load.");this.loadPRGROM(),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)},loadPRGROM:function(){this.nes.rom.romCount>1?(this.loadRomBank(0,32768),this.loadRomBank(1,49152)):(this.loadRomBank(0,32768),this.loadRomBank(0,49152))},loadCHRROM:function(){this.nes.rom.vromCount>0&&(this.nes.rom.vromCount===1?(this.loadVromBank(0,0),this.loadVromBank(0,4096)):(this.loadVromBank(0,0),this.loadVromBank(1,4096)))},loadBatteryRam:function(){if(this.nes.rom.batteryRam){var e=this.nes.rom.batteryRam;e!==null&&e.length===8192&&Jr.copyArrayElements(e,0,this.nes.cpu.mem,24576,8192)}},loadRomBank:function(e,t){e%=this.nes.rom.romCount,Jr.copyArrayElements(this.nes.rom.rom[e],0,this.nes.cpu.mem,t,16384)},loadVromBank:function(e,t){if(this.nes.rom.vromCount!==0){this.nes.ppu.triggerRendering(),Jr.copyArrayElements(this.nes.rom.vrom[e%this.nes.rom.vromCount],0,this.nes.ppu.vramMem,t,4096);var n=this.nes.rom.vromTile[e%this.nes.rom.vromCount];Jr.copyArrayElements(n,0,this.nes.ppu.ptTile,t>>4,256)}},load32kRomBank:function(e,t){this.loadRomBank(e*2%this.nes.rom.romCount,t),this.loadRomBank((e*2+1)%this.nes.rom.romCount,t+16384)},load8kVromBank:function(e,t){this.nes.rom.vromCount!==0&&(this.nes.ppu.triggerRendering(),this.loadVromBank(e%this.nes.rom.vromCount,t),this.loadVromBank((e+1)%this.nes.rom.vromCount,t+4096))},load1kVromBank:function(e,t){if(this.nes.rom.vromCount!==0){this.nes.ppu.triggerRendering();var n=Math.floor(e/4)%this.nes.rom.vromCount,r=e%4*1024;Jr.copyArrayElements(this.nes.rom.vrom[n],r,this.nes.ppu.vramMem,t,1024);for(var o=this.nes.rom.vromTile[n],a=t>>4,u=0;u<64;u++)this.nes.ppu.ptTile[a+u]=o[(e%4<<6)+u]}},load2kVromBank:function(e,t){if(this.nes.rom.vromCount!==0){this.nes.ppu.triggerRendering();var n=Math.floor(e/2)%this.nes.rom.vromCount,r=e%2*2048;Jr.copyArrayElements(this.nes.rom.vrom[n],r,this.nes.ppu.vramMem,t,2048);for(var o=this.nes.rom.vromTile[n],a=t>>4,u=0;u<128;u++)this.nes.ppu.ptTile[a+u]=o[(e%2<<7)+u]}},load8kRomBank:function(e,t){var n=Math.floor(e/2)%this.nes.rom.romCount,r=e%2*8192;Jr.copyArrayElements(this.nes.rom.rom[n],r,this.nes.cpu.mem,t,8192)},clockIrqCounter:function(){},latchAccess:function(e){},toJSON:function(){return{joy1StrobeState:this.joy1StrobeState,joy2StrobeState:this.joy2StrobeState,joypadLastWrite:this.joypadLastWrite}},fromJSON:function(e){this.joy1StrobeState=e.joy1StrobeState,this.joy2StrobeState=e.joy2StrobeState,this.joypadLastWrite=e.joypadLastWrite}};$[1]=function(e){this.nes=e};$[1].prototype=new $[0];$[1].prototype.reset=function(){$[0].prototype.reset.apply(this),this.regBuffer=0,this.regBufferCounter=0,this.mirroring=0,this.oneScreenMirroring=0,this.prgSwitchingArea=1,this.prgSwitchingSize=1,this.vromSwitchingSize=0,this.romSelectionReg0=0,this.romSelectionReg1=0,this.romBankSelect=0};$[1].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}t&128?(this.regBufferCounter=0,this.regBuffer=0,this.getRegNumber(e)===0&&(this.prgSwitchingArea=1,this.prgSwitchingSize=1)):(this.regBuffer=this.regBuffer&255-(1<<this.regBufferCounter)|(t&1)<<this.regBufferCounter,this.regBufferCounter++,this.regBufferCounter===5&&(this.setReg(this.getRegNumber(e),this.regBuffer),this.regBuffer=0,this.regBufferCounter=0))};$[1].prototype.setReg=function(e,t){var n;switch(e){case 0:n=t&3,n!==this.mirroring&&(this.mirroring=n,this.mirroring&2?this.mirroring&1?this.nes.ppu.setMirroring(this.nes.rom.HORIZONTAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.VERTICAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING)),this.prgSwitchingArea=t>>2&1,this.prgSwitchingSize=t>>3&1,this.vromSwitchingSize=t>>4&1;break;case 1:this.romSelectionReg0=t>>4&1,this.nes.rom.vromCount>0&&(this.vromSwitchingSize===0?this.romSelectionReg0===0?this.load8kVromBank(t&15,0):this.load8kVromBank(Math.floor(this.nes.rom.vromCount/2)+(t&15),0):this.romSelectionReg0===0?this.loadVromBank(t&15,0):this.loadVromBank(Math.floor(this.nes.rom.vromCount/2)+(t&15),0));break;case 2:this.romSelectionReg1=t>>4&1,this.nes.rom.vromCount>0&&this.vromSwitchingSize===1&&(this.romSelectionReg1===0?this.loadVromBank(t&15,4096):this.loadVromBank(Math.floor(this.nes.rom.vromCount/2)+(t&15),4096));break;default:n=t&15;var r,o=0;this.nes.rom.romCount>=32?this.vromSwitchingSize===0?this.romSelectionReg0===1&&(o=16):o=(this.romSelectionReg0|this.romSelectionReg1<<1)<<3:this.nes.rom.romCount>=16&&this.romSelectionReg0===1&&(o=8),this.prgSwitchingSize===0?(r=o+(t&15),this.load32kRomBank(r,32768)):(r=o*2+(t&15),this.prgSwitchingArea===0?this.loadRomBank(r,49152):this.loadRomBank(r,32768))}};$[1].prototype.getRegNumber=function(e){return e>=32768&&e<=40959?0:e>=40960&&e<=49151?1:e>=49152&&e<=57343?2:3};$[1].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("MMC1: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};$[1].prototype.switchLowHighPrgRom=function(e){};$[1].prototype.switch16to32=function(){};$[1].prototype.switch32to16=function(){};$[1].prototype.toJSON=function(){var e=$[0].prototype.toJSON.apply(this);return e.mirroring=this.mirroring,e.oneScreenMirroring=this.oneScreenMirroring,e.prgSwitchingArea=this.prgSwitchingArea,e.prgSwitchingSize=this.prgSwitchingSize,e.vromSwitchingSize=this.vromSwitchingSize,e.romSelectionReg0=this.romSelectionReg0,e.romSelectionReg1=this.romSelectionReg1,e.romBankSelect=this.romBankSelect,e.regBuffer=this.regBuffer,e.regBufferCounter=this.regBufferCounter,e};$[1].prototype.fromJSON=function(e){$[0].prototype.fromJSON.apply(this,arguments),this.mirroring=e.mirroring,this.oneScreenMirroring=e.oneScreenMirroring,this.prgSwitchingArea=e.prgSwitchingArea,this.prgSwitchingSize=e.prgSwitchingSize,this.vromSwitchingSize=e.vromSwitchingSize,this.romSelectionReg0=e.romSelectionReg0,this.romSelectionReg1=e.romSelectionReg1,this.romBankSelect=e.romBankSelect,this.regBuffer=e.regBuffer,this.regBufferCounter=e.regBufferCounter};$[2]=function(e){this.nes=e};$[2].prototype=new $[0];$[2].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}else this.loadRomBank(t,32768)};$[2].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UNROM: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};$[3]=function(e){this.nes=e};$[3].prototype=new $[0];$[3].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}else{var n=t%(this.nes.rom.vromCount/2)*2;this.loadVromBank(n,0),this.loadVromBank(n+1,4096),this.load8kVromBank(t*2,0)}};$[4]=function(e){this.nes=e,this.CMD_SEL_2_1K_VROM_0000=0,this.CMD_SEL_2_1K_VROM_0800=1,this.CMD_SEL_1K_VROM_1000=2,this.CMD_SEL_1K_VROM_1400=3,this.CMD_SEL_1K_VROM_1800=4,this.CMD_SEL_1K_VROM_1C00=5,this.CMD_SEL_ROM_PAGE1=6,this.CMD_SEL_ROM_PAGE2=7,this.command=null,this.prgAddressSelect=null,this.chrAddressSelect=null,this.pageNumber=null,this.irqCounter=null,this.irqLatchValue=null,this.irqEnable=null,this.prgAddressChanged=!1};$[4].prototype=new $[0];$[4].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}switch(e){case 32768:this.command=t&7;var n=t>>6&1;n!==this.prgAddressSelect&&(this.prgAddressChanged=!0),this.prgAddressSelect=n,this.chrAddressSelect=t>>7&1;break;case 32769:this.executeCommand(this.command,t);break;case 40960:t&1?this.nes.ppu.setMirroring(this.nes.rom.HORIZONTAL_MIRRORING):this.nes.ppu.setMirroring(this.nes.rom.VERTICAL_MIRRORING);break;case 40961:break;case 49152:this.irqCounter=t;break;case 49153:this.irqLatchValue=t;break;case 57344:this.irqEnable=0;break;case 57345:this.irqEnable=1;break}};$[4].prototype.executeCommand=function(e,t){switch(e){case this.CMD_SEL_2_1K_VROM_0000:this.chrAddressSelect===0?(this.load1kVromBank(t,0),this.load1kVromBank(t+1,1024)):(this.load1kVromBank(t,4096),this.load1kVromBank(t+1,5120));break;case this.CMD_SEL_2_1K_VROM_0800:this.chrAddressSelect===0?(this.load1kVromBank(t,2048),this.load1kVromBank(t+1,3072)):(this.load1kVromBank(t,6144),this.load1kVromBank(t+1,7168));break;case this.CMD_SEL_1K_VROM_1000:this.chrAddressSelect===0?this.load1kVromBank(t,4096):this.load1kVromBank(t,0);break;case this.CMD_SEL_1K_VROM_1400:this.chrAddressSelect===0?this.load1kVromBank(t,5120):this.load1kVromBank(t,1024);break;case this.CMD_SEL_1K_VROM_1800:this.chrAddressSelect===0?this.load1kVromBank(t,6144):this.load1kVromBank(t,2048);break;case this.CMD_SEL_1K_VROM_1C00:this.chrAddressSelect===0?this.load1kVromBank(t,7168):this.load1kVromBank(t,3072);break;case this.CMD_SEL_ROM_PAGE1:this.prgAddressChanged&&(this.prgAddressSelect===0?this.load8kRomBank((this.nes.rom.romCount-1)*2,49152):this.load8kRomBank((this.nes.rom.romCount-1)*2,32768),this.prgAddressChanged=!1),this.prgAddressSelect===0?this.load8kRomBank(t,32768):this.load8kRomBank(t,49152);break;case this.CMD_SEL_ROM_PAGE2:this.load8kRomBank(t,40960),this.prgAddressChanged&&(this.prgAddressSelect===0?this.load8kRomBank((this.nes.rom.romCount-1)*2,49152):this.load8kRomBank((this.nes.rom.romCount-1)*2,32768),this.prgAddressChanged=!1)}};$[4].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("MMC3: Invalid ROM! Unable to load.");this.load8kRomBank((this.nes.rom.romCount-1)*2,49152),this.load8kRomBank((this.nes.rom.romCount-1)*2+1,57344),this.load8kRomBank(0,32768),this.load8kRomBank(1,40960),this.loadCHRROM(),this.loadBatteryRam(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};$[4].prototype.clockIrqCounter=function(){this.irqEnable===1&&(this.irqCounter--,this.irqCounter<0&&(this.nes.cpu.requestIrq(this.nes.cpu.IRQ_NORMAL),this.irqCounter=this.irqLatchValue))};$[4].prototype.toJSON=function(){var e=$[0].prototype.toJSON.apply(this);return e.command=this.command,e.prgAddressSelect=this.prgAddressSelect,e.chrAddressSelect=this.chrAddressSelect,e.pageNumber=this.pageNumber,e.irqCounter=this.irqCounter,e.irqLatchValue=this.irqLatchValue,e.irqEnable=this.irqEnable,e.prgAddressChanged=this.prgAddressChanged,e};$[4].prototype.fromJSON=function(e){$[0].prototype.fromJSON.apply(this,arguments),this.command=e.command,this.prgAddressSelect=e.prgAddressSelect,this.chrAddressSelect=e.chrAddressSelect,this.pageNumber=e.pageNumber,this.irqCounter=e.irqCounter,this.irqLatchValue=e.irqLatchValue,this.irqEnable=e.irqEnable,this.prgAddressChanged=e.prgAddressChanged};$[5]=function(e){this.nes=e};$[5].prototype=new $[0];$[5].prototype.write=function(e,t){e<32768?$[0].prototype.write.apply(this,arguments):this.load8kVromBank(t,0)};$[5].prototype.write=function(e,t){if(e<20480){$[0].prototype.write.apply(this,arguments);return}switch(e){case 20736:this.prg_size=t&3;break;case 20737:this.chr_size=t&3;break;case 20738:this.sram_we_a=t&3;break;case 20739:this.sram_we_b=t&3;break;case 20740:this.graphic_mode=t&3;break;case 20741:this.nametable_mode=t,this.nametable_type[0]=t&3,this.load1kVromBank(t&3,8192),t>>=2,this.nametable_type[1]=t&3,this.load1kVromBank(t&3,9216),t>>=2,this.nametable_type[2]=t&3,this.load1kVromBank(t&3,10240),t>>=2,this.nametable_type[3]=t&3,this.load1kVromBank(t&3,11264);break;case 20742:this.fill_chr=t;break;case 20743:this.fill_pal=t&3;break;case 20755:this.SetBank_SRAM(3,t&3);break;case 20756:case 20757:case 20758:case 20759:this.SetBank_CPU(e,t);break;case 20768:case 20769:case 20770:case 20771:case 20772:case 20773:case 20774:case 20775:this.chr_mode=0,this.chr_page[0][e&7]=t,this.SetBank_PPU();break;case 20776:case 20777:case 20778:case 20779:this.chr_mode=1,this.chr_page[1][(e&3)+0]=t,this.chr_page[1][(e&3)+4]=t,this.SetBank_PPU();break;case 20992:this.split_control=t;break;case 20993:this.split_scroll=t;break;case 20994:this.split_page=t&63;break;case 20995:this.irq_line=t,this.nes.cpu.ClearIRQ();break;case 20996:this.irq_enable=t,this.nes.cpu.ClearIRQ();break;case 20997:this.mult_a=t;break;case 20998:this.mult_b=t;break;default:e>=20480&&e<=20501?this.nes.papu.exWrite(e,t):e>=23552&&e<=24575?this.graphic_mode===2||this.graphic_mode!==3&&this.irq_status&64:e>=24576&&e<=32767&&this.sram_we_a===2&&this.sram_we_b;break}};$[5].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UNROM: Invalid ROM! Unable to load.");this.load8kRomBank(this.nes.rom.romCount*2-1,32768),this.load8kRomBank(this.nes.rom.romCount*2-1,40960),this.load8kRomBank(this.nes.rom.romCount*2-1,49152),this.load8kRomBank(this.nes.rom.romCount*2-1,57344),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};$[7]=function(e){this.nes=e};$[7].prototype=new $[0];$[7].prototype.write=function(e,t){e<32768?$[0].prototype.write.apply(this,arguments):(this.load32kRomBank(t&7,32768),t&16?this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING2):this.nes.ppu.setMirroring(this.nes.rom.SINGLESCREEN_MIRRORING))};$[7].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("AOROM: Invalid ROM! Unable to load.");this.loadPRGROM(),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};$[11]=function(e){this.nes=e};$[11].prototype=new $[0];$[11].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}else{var n=(t&15)*2%this.nes.rom.romCount,r=((t&15)*2+1)%this.nes.rom.romCount;if(this.loadRomBank(n,32768),this.loadRomBank(r,49152),this.nes.rom.vromCount>0){var o=(t>>4)*2%this.nes.rom.vromCount;this.loadVromBank(o,0),this.loadVromBank(o+1,4096)}}};$[34]=function(e){this.nes=e};$[34].prototype=new $[0];$[34].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}else this.load32kRomBank(t,32768)};$[38]=function(e){this.nes=e};$[38].prototype=new $[0];$[38].prototype.write=function(e,t){if(e<28672||e>32767){$[0].prototype.write.apply(this,arguments);return}else this.load32kRomBank(t&3,32768),this.load8kVromBank((t>>2&3)*2,0)};$[66]=function(e){this.nes=e};$[66].prototype=new $[0];$[66].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}else this.load32kRomBank(t>>4&3,32768),this.load8kVromBank((t&3)*2,0)};$[94]=function(e){this.nes=e};$[94].prototype=new $[0];$[94].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}else this.loadRomBank(t>>2,32768)};$[94].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("UN1ROM: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};$[140]=function(e){this.nes=e};$[140].prototype=new $[0];$[140].prototype.write=function(e,t){if(e<24576||e>32767){$[0].prototype.write.apply(this,arguments);return}else this.load32kRomBank(t>>4&3,32768),this.load8kVromBank((t&15)*2,0)};$[180]=function(e){this.nes=e};$[180].prototype=new $[0];$[180].prototype.write=function(e,t){if(e<32768){$[0].prototype.write.apply(this,arguments);return}else this.loadRomBank(t,49152)};$[180].prototype.loadROM=function(){if(!this.nes.rom.valid)throw new Error("Mapper 180: Invalid ROM! Unable to load.");this.loadRomBank(0,32768),this.loadRomBank(this.nes.rom.romCount-1,49152),this.loadCHRROM(),this.nes.cpu.requestIrq(this.nes.cpu.IRQ_RESET)};var _I=$,Om=_I,yI=B_,j_=function(e){this.nes=e,this.mapperName=new Array(92);for(var t=0;t<92;t++)this.mapperName[t]="Unknown Mapper";this.mapperName[0]="Direct Access",this.mapperName[1]="Nintendo MMC1",this.mapperName[2]="UNROM",this.mapperName[3]="CNROM",this.mapperName[4]="Nintendo MMC3",this.mapperName[5]="Nintendo MMC5",this.mapperName[6]="FFE F4xxx",this.mapperName[7]="AOROM",this.mapperName[8]="FFE F3xxx",this.mapperName[9]="Nintendo MMC2",this.mapperName[10]="Nintendo MMC4",this.mapperName[11]="Color Dreams Chip",this.mapperName[12]="FFE F6xxx",this.mapperName[15]="100-in-1 switch",this.mapperName[16]="Bandai chip",this.mapperName[17]="FFE F8xxx",this.mapperName[18]="Jaleco SS8806 chip",this.mapperName[19]="Namcot 106 chip",this.mapperName[20]="Famicom Disk System",this.mapperName[21]="Konami VRC4a",this.mapperName[22]="Konami VRC2a",this.mapperName[23]="Konami VRC2a",this.mapperName[24]="Konami VRC6",this.mapperName[25]="Konami VRC4b",this.mapperName[32]="Irem G-101 chip",this.mapperName[33]="Taito TC0190/TC0350",this.mapperName[34]="32kB ROM switch",this.mapperName[64]="Tengen RAMBO-1 chip",this.mapperName[65]="Irem H-3001 chip",this.mapperName[66]="GNROM switch",this.mapperName[67]="SunSoft3 chip",this.mapperName[68]="SunSoft4 chip",this.mapperName[69]="SunSoft5 FME-7 chip",this.mapperName[71]="Camerica chip",this.mapperName[78]="Irem 74HC161/32-based",this.mapperName[91]="Pirate HK-SF3 chip"};j_.prototype={VERTICAL_MIRRORING:0,HORIZONTAL_MIRRORING:1,FOURSCREEN_MIRRORING:2,SINGLESCREEN_MIRRORING:3,SINGLESCREEN_MIRRORING2:4,SINGLESCREEN_MIRRORING3:5,SINGLESCREEN_MIRRORING4:6,CHRROM_MIRRORING:7,header:null,rom:null,vrom:null,vromTile:null,romCount:null,vromCount:null,mirroring:null,batteryRam:null,trainer:null,fourScreen:null,mapperType:null,valid:!1,load:function(e){var t,n,r;if(e.indexOf("NES")===-1)throw new Error("Not a valid NES ROM.");for(this.header=new Array(16),t=0;t<16;t++)this.header[t]=e.charCodeAt(t)&255;this.romCount=this.header[4],this.vromCount=this.header[5]*2,this.mirroring=this.header[6]&1?1:0,this.batteryRam=(this.header[6]&2)!==0,this.trainer=(this.header[6]&4)!==0,this.fourScreen=(this.header[6]&8)!==0,this.mapperType=this.header[6]>>4|this.header[7]&240;var o=!1;for(t=8;t<16;t++)if(this.header[t]!==0){o=!0;break}o&&(this.mapperType&=15),this.rom=new Array(this.romCount);var a=16;for(t=0;t<this.romCount;t++){for(this.rom[t]=new Array(16384),n=0;n<16384&&!(a+n>=e.length);n++)this.rom[t][n]=e.charCodeAt(a+n)&255;a+=16384}for(this.vrom=new Array(this.vromCount),t=0;t<this.vromCount;t++){for(this.vrom[t]=new Array(4096),n=0;n<4096&&!(a+n>=e.length);n++)this.vrom[t][n]=e.charCodeAt(a+n)&255;a+=4096}for(this.vromTile=new Array(this.vromCount),t=0;t<this.vromCount;t++)for(this.vromTile[t]=new Array(256),n=0;n<256;n++)this.vromTile[t][n]=new yI;var u,c;for(r=0;r<this.vromCount;r++)for(t=0;t<4096;t++)u=t>>4,c=t%16,c<8?this.vromTile[r][u].setScanline(c,this.vrom[r][t],this.vrom[r][t+8]):this.vromTile[r][u].setScanline(c-8,this.vrom[r][t-8],this.vrom[r][t]);this.valid=!0},getMirroringType:function(){return this.fourScreen?this.FOURSCREEN_MIRRORING:this.mirroring===0?this.HORIZONTAL_MIRRORING:this.VERTICAL_MIRRORING},getMapperName:function(){return this.mapperType>=0&&this.mapperType<this.mapperName.length?this.mapperName[this.mapperType]:"Unknown Mapper, "+this.mapperType},mapperSupported:function(){return typeof Om[this.mapperType]<"u"},createMapper:function(){if(this.mapperSupported())return new Om[this.mapperType](this.nes);throw new Error("This ROM uses a mapper not supported by JSNES: "+this.getMapperName()+"("+this.mapperType+")")}};var xI=j_,vI=hI,Pm=P_,SI=dI,RI=gI,CI=xI,H_=function(e){if(this.opts={onFrame:function(){},onAudioSample:null,onStatusUpdate:function(){},onBatteryRamWrite:function(){},preferredFrameRate:60,emulateSound:!0,sampleRate:48e3},typeof e<"u"){var t;for(t in this.opts)typeof e[t]<"u"&&(this.opts[t]=e[t])}this.frameTime=1e3/this.opts.preferredFrameRate,this.ui={writeFrame:this.opts.onFrame,updateStatus:this.opts.onStatusUpdate},this.cpu=new vI(this),this.ppu=new SI(this),this.papu=new RI(this),this.mmap=null,this.controllers={1:new Pm,2:new Pm},this.ui.updateStatus("Ready to load a ROM."),this.frame=this.frame.bind(this),this.buttonDown=this.buttonDown.bind(this),this.buttonUp=this.buttonUp.bind(this),this.zapperMove=this.zapperMove.bind(this),this.zapperFireDown=this.zapperFireDown.bind(this),this.zapperFireUp=this.zapperFireUp.bind(this)};H_.prototype={fpsFrameCount:0,romData:null,reset:function(){this.mmap!==null&&this.mmap.reset(),this.cpu.reset(),this.ppu.reset(),this.papu.reset(),this.lastFpsTime=null,this.fpsFrameCount=0},frame:function(){this.ppu.startFrame();var e=0,t=this.opts.emulateSound,n=this.cpu,r=this.ppu,o=this.papu;e:for(;;)for(n.cyclesToHalt===0?(e=n.emulate(),t&&o.clockFrameCounter(e),e*=3):n.cyclesToHalt>8?(e=24,t&&o.clockFrameCounter(8),n.cyclesToHalt-=8):(e=n.cyclesToHalt*3,t&&o.clockFrameCounter(n.cyclesToHalt),n.cyclesToHalt=0);e>0;e--){if(r.curX===r.spr0HitX&&r.f_spVisibility===1&&r.scanline-21===r.spr0HitY&&r.setStatusFlag(r.STATUS_SPRITE0HIT,!0),r.requestEndFrame&&(r.nmiCounter--,r.nmiCounter===0)){r.requestEndFrame=!1,r.startVBlank();break e}r.curX++,r.curX===341&&(r.curX=0,r.endScanline())}this.fpsFrameCount++},buttonDown:function(e,t){this.controllers[e].buttonDown(t)},buttonUp:function(e,t){this.controllers[e].buttonUp(t)},zapperMove:function(e,t){this.mmap&&(this.mmap.zapperX=e,this.mmap.zapperY=t)},zapperFireDown:function(){this.mmap&&(this.mmap.zapperFired=!0)},zapperFireUp:function(){this.mmap&&(this.mmap.zapperFired=!1)},getFPS:function(){var e=+new Date,t=null;return this.lastFpsTime&&(t=this.fpsFrameCount/((e-this.lastFpsTime)/1e3)),this.fpsFrameCount=0,this.lastFpsTime=e,t},reloadROM:function(){this.romData!==null&&this.loadROM(this.romData)},loadROM:function(e){this.rom=new CI(this),this.rom.load(e),this.reset(),this.mmap=this.rom.createMapper(),this.mmap.loadROM(),this.ppu.setMirroring(this.rom.getMirroringType()),this.romData=e},setFramerate:function(e){this.opts.preferredFrameRate=e,this.frameTime=1e3/e,this.papu.setSampleRate(this.opts.sampleRate,!1)},toJSON:function(){return{romData:this.romData,cpu:this.cpu.toJSON(),mmap:this.mmap.toJSON(),ppu:this.ppu.toJSON()}},fromJSON:function(e){this.reset(),this.romData=e.romData,this.cpu.fromJSON(e.cpu),this.mmap.fromJSON(e.mmap),this.ppu.fromJSON(e.ppu)}};var EI=H_,X_={Controller:P_,NES:EI};const If=_i(X_),Et=[1,2,4,8,16,32,64,128];class Y_{constructor(t=1,n){this.player=t,this.getNes=n,this.buttons={BUTTON_A:!1,BUTTON_B:!1,BUTTON_SELECT:!1,BUTTON_START:!1,BUTTON_UP:!1,BUTTON_DOWN:!1,BUTTON_LEFT:!1,BUTTON_RIGHT:!1}}syncAll(t){this.sync("BUTTON_A",!!(t&Et[0])),this.sync("BUTTON_B",!!(t&Et[1])),this.sync("BUTTON_SELECT",!!(t&Et[2])),this.sync("BUTTON_START",!!(t&Et[3])),this.sync("BUTTON_UP",!!(t&Et[4])),this.sync("BUTTON_DOWN",!!(t&Et[5])),this.sync("BUTTON_LEFT",!!(t&Et[6])),this.sync("BUTTON_RIGHT",!!(t&Et[7]))}sync(t,n){const r=this.getNes();this.buttons[t]=n,n?r.buttonDown(this.player,If.Controller[t]):r.buttonUp(this.player,If.Controller[t])}resync(){this.syncAll(this.toByte())}toByte(t=this.buttons){return(t.BUTTON_A&&Et[0])|(t.BUTTON_B&&Et[1])|(t.BUTTON_SELECT&&Et[2])|(t.BUTTON_START&&Et[3])|(t.BUTTON_UP&&Et[4])|(t.BUTTON_DOWN&&Et[5])|(t.BUTTON_LEFT&&Et[6])|(t.BUTTON_RIGHT&&Et[7])}}const Fm="options",Mm="50%",Lm="Low";class TI{constructor(){this.options=this.defaultOptions,this.load()}save(){localStorage.setItem(Fm,JSON.stringify(this.options))}load(){try{this.options=JSON.parse(localStorage.getItem(Fm))||this.defaultOptions}catch{this.reset()}}reset(){this.options=this.defaultOptions,this.save()}get sound(){return this.soundOptions.find(t=>t.name===this.options.sound)}get buffering(){return this.bufferingOptions.find(t=>t.name===this.options.buffering)}get defaultOptions(){return{sound:Mm,buffering:Lm,crt:!0,input:{" ":"BUTTON_A",d:"BUTTON_B",backspace:"BUTTON_SELECT",enter:"BUTTON_START",arrowup:"BUTTON_UP",arrowdown:"BUTTON_DOWN",arrowleft:"BUTTON_LEFT",arrowright:"BUTTON_RIGHT",r:"SWAP"}}}get soundOptions(){return[{name:"100%",gain:1},{name:"90%",gain:.9},{name:"75%",gain:.75},{name:Mm,gain:.5},{name:"25%",gain:.25},{name:"10%",gain:.1},{name:"0%",gain:0}]}get bufferingOptions(){return[{name:"Disabled",masterBufferLimit:3,minBufferSize:1,maxBufferSize:1},{name:Lm,masterBufferLimit:3,minBufferSize:1,maxBufferSize:2},{name:"Medium",masterBufferLimit:5,minBufferSize:2,maxBufferSize:3},{name:"High",masterBufferLimit:5,minBufferSize:3,maxBufferSize:5}]}}const Xe=new TI;var pl={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */pl.exports;(function(e,t){(function(){var n,r="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",_=500,v="__lodash_placeholder__",R=1,b=2,L=4,H=1,J=2,E=1,T=2,D=4,P=8,q=16,B=32,Y=64,ne=128,ue=256,re=512,tt=30,it="...",xt=800,Ue=16,se=1,Ae=2,nt=3,le=1/0,st=9007199254740991,Cn=17976931348623157e292,Ht=NaN,xe=4294967295,Ze=xe-1,Ri=xe>>>1,j=[["ary",ne],["bind",E],["bindKey",T],["curry",P],["curryRight",q],["flip",re],["partial",B],["partialRight",Y],["rearg",ue]],Q="[object Arguments]",pe="[object Array]",Fe="[object AsyncFunction]",Te="[object Boolean]",pt="[object Date]",an="[object DOMException]",ln="[object Error]",Mt="[object Function]",jn="[object GeneratorFunction]",dt="[object Map]",Wr="[object Number]",Dl="[object Null]",Xt="[object Object]",xo="[object Promise]",Nl="[object Proxy]",pr="[object RegExp]",vt="[object Set]",St="[object String]",dr="[object Symbol]",Ol="[object Undefined]",Lt="[object WeakMap]",Pl="[object WeakSet]",g="[object ArrayBuffer]",h="[object DataView]",p="[object Float32Array]",S="[object Float64Array]",w="[object Int8Array]",N="[object Int16Array]",M="[object Int32Array]",de="[object Uint8Array]",Me="[object Uint8ClampedArray]",Ne="[object Uint16Array]",Le="[object Uint32Array]",ke=/\b__p \+= '';/g,Ky=/\b(__p \+=) '' \+/g,Zy=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xh=/&(?:amp|lt|gt|quot|#39);/g,Yh=/[&<>"']/g,Jy=RegExp(Xh.source),Qy=RegExp(Yh.source),ex=/<%-([\s\S]+?)%>/g,tx=/<%([\s\S]+?)%>/g,Kh=/<%=([\s\S]+?)%>/g,nx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rx=/^\w*$/,ix=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fl=/[\\^$.*+?()[\]{}|]/g,sx=RegExp(Fl.source),Ml=/^\s+/,ox=/\s/,ax=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lx=/\{\n\/\* \[wrapped with (.+)\] \*/,ux=/,? & /,cx=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fx=/[()=,{}\[\]\/\s]/,hx=/\\(\\)?/g,px=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zh=/\w*$/,dx=/^[-+]0x[0-9a-f]+$/i,mx=/^0b[01]+$/i,gx=/^\[object .+?Constructor\]$/,_x=/^0o[0-7]+$/i,yx=/^(?:0|[1-9]\d*)$/,xx=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vo=/($^)/,vx=/['\n\r\u2028\u2029\\]/g,So="\\ud800-\\udfff",Sx="\\u0300-\\u036f",Rx="\\ufe20-\\ufe2f",Cx="\\u20d0-\\u20ff",Jh=Sx+Rx+Cx,Qh="\\u2700-\\u27bf",ep="a-z\\xdf-\\xf6\\xf8-\\xff",Ex="\\xac\\xb1\\xd7\\xf7",Tx="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ax="\\u2000-\\u206f",wx=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tp="A-Z\\xc0-\\xd6\\xd8-\\xde",np="\\ufe0e\\ufe0f",rp=Ex+Tx+Ax+wx,Ll="['’]",Ix="["+So+"]",ip="["+rp+"]",Ro="["+Jh+"]",sp="\\d+",kx="["+Qh+"]",op="["+ep+"]",ap="[^"+So+rp+sp+Qh+ep+tp+"]",Bl="\\ud83c[\\udffb-\\udfff]",bx="(?:"+Ro+"|"+Bl+")",lp="[^"+So+"]",Ul="(?:\\ud83c[\\udde6-\\uddff]){2}",Gl="[\\ud800-\\udbff][\\udc00-\\udfff]",Ci="["+tp+"]",up="\\u200d",cp="(?:"+op+"|"+ap+")",Dx="(?:"+Ci+"|"+ap+")",fp="(?:"+Ll+"(?:d|ll|m|re|s|t|ve))?",hp="(?:"+Ll+"(?:D|LL|M|RE|S|T|VE))?",pp=bx+"?",dp="["+np+"]?",Nx="(?:"+up+"(?:"+[lp,Ul,Gl].join("|")+")"+dp+pp+")*",Ox="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Px="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mp=dp+pp+Nx,Fx="(?:"+[kx,Ul,Gl].join("|")+")"+mp,Mx="(?:"+[lp+Ro+"?",Ro,Ul,Gl,Ix].join("|")+")",Lx=RegExp(Ll,"g"),Bx=RegExp(Ro,"g"),Vl=RegExp(Bl+"(?="+Bl+")|"+Mx+mp,"g"),Ux=RegExp([Ci+"?"+op+"+"+fp+"(?="+[ip,Ci,"$"].join("|")+")",Dx+"+"+hp+"(?="+[ip,Ci+cp,"$"].join("|")+")",Ci+"?"+cp+"+"+fp,Ci+"+"+hp,Px,Ox,sp,Fx].join("|"),"g"),Gx=RegExp("["+up+So+Jh+np+"]"),Vx=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wx=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$x=-1,Ge={};Ge[p]=Ge[S]=Ge[w]=Ge[N]=Ge[M]=Ge[de]=Ge[Me]=Ge[Ne]=Ge[Le]=!0,Ge[Q]=Ge[pe]=Ge[g]=Ge[Te]=Ge[h]=Ge[pt]=Ge[ln]=Ge[Mt]=Ge[dt]=Ge[Wr]=Ge[Xt]=Ge[pr]=Ge[vt]=Ge[St]=Ge[Lt]=!1;var Be={};Be[Q]=Be[pe]=Be[g]=Be[h]=Be[Te]=Be[pt]=Be[p]=Be[S]=Be[w]=Be[N]=Be[M]=Be[dt]=Be[Wr]=Be[Xt]=Be[pr]=Be[vt]=Be[St]=Be[dr]=Be[de]=Be[Me]=Be[Ne]=Be[Le]=!0,Be[ln]=Be[Mt]=Be[Lt]=!1;var zx={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},qx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jx={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Hx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xx=parseFloat,Yx=parseInt,gp=typeof je=="object"&&je&&je.Object===Object&&je,Kx=typeof self=="object"&&self&&self.Object===Object&&self,mt=gp||Kx||Function("return this")(),Wl=t&&!t.nodeType&&t,$r=Wl&&!0&&e&&!e.nodeType&&e,_p=$r&&$r.exports===Wl,$l=_p&&gp.process,un=function(){try{var I=$r&&$r.require&&$r.require("util").types;return I||$l&&$l.binding&&$l.binding("util")}catch{}}(),yp=un&&un.isArrayBuffer,xp=un&&un.isDate,vp=un&&un.isMap,Sp=un&&un.isRegExp,Rp=un&&un.isSet,Cp=un&&un.isTypedArray;function Yt(I,F,O){switch(O.length){case 0:return I.call(F);case 1:return I.call(F,O[0]);case 2:return I.call(F,O[0],O[1]);case 3:return I.call(F,O[0],O[1],O[2])}return I.apply(F,O)}function Zx(I,F,O,K){for(var fe=-1,we=I==null?0:I.length;++fe<we;){var ot=I[fe];F(K,ot,O(ot),I)}return K}function cn(I,F){for(var O=-1,K=I==null?0:I.length;++O<K&&F(I[O],O,I)!==!1;);return I}function Jx(I,F){for(var O=I==null?0:I.length;O--&&F(I[O],O,I)!==!1;);return I}function Ep(I,F){for(var O=-1,K=I==null?0:I.length;++O<K;)if(!F(I[O],O,I))return!1;return!0}function mr(I,F){for(var O=-1,K=I==null?0:I.length,fe=0,we=[];++O<K;){var ot=I[O];F(ot,O,I)&&(we[fe++]=ot)}return we}function Co(I,F){var O=I==null?0:I.length;return!!O&&Ei(I,F,0)>-1}function zl(I,F,O){for(var K=-1,fe=I==null?0:I.length;++K<fe;)if(O(F,I[K]))return!0;return!1}function We(I,F){for(var O=-1,K=I==null?0:I.length,fe=Array(K);++O<K;)fe[O]=F(I[O],O,I);return fe}function gr(I,F){for(var O=-1,K=F.length,fe=I.length;++O<K;)I[fe+O]=F[O];return I}function ql(I,F,O,K){var fe=-1,we=I==null?0:I.length;for(K&&we&&(O=I[++fe]);++fe<we;)O=F(O,I[fe],fe,I);return O}function Qx(I,F,O,K){var fe=I==null?0:I.length;for(K&&fe&&(O=I[--fe]);fe--;)O=F(O,I[fe],fe,I);return O}function jl(I,F){for(var O=-1,K=I==null?0:I.length;++O<K;)if(F(I[O],O,I))return!0;return!1}var ev=Hl("length");function tv(I){return I.split("")}function nv(I){return I.match(cx)||[]}function Tp(I,F,O){var K;return O(I,function(fe,we,ot){if(F(fe,we,ot))return K=we,!1}),K}function Eo(I,F,O,K){for(var fe=I.length,we=O+(K?1:-1);K?we--:++we<fe;)if(F(I[we],we,I))return we;return-1}function Ei(I,F,O){return F===F?dv(I,F,O):Eo(I,Ap,O)}function rv(I,F,O,K){for(var fe=O-1,we=I.length;++fe<we;)if(K(I[fe],F))return fe;return-1}function Ap(I){return I!==I}function wp(I,F){var O=I==null?0:I.length;return O?Yl(I,F)/O:Ht}function Hl(I){return function(F){return F==null?n:F[I]}}function Xl(I){return function(F){return I==null?n:I[F]}}function Ip(I,F,O,K,fe){return fe(I,function(we,ot,Pe){O=K?(K=!1,we):F(O,we,ot,Pe)}),O}function iv(I,F){var O=I.length;for(I.sort(F);O--;)I[O]=I[O].value;return I}function Yl(I,F){for(var O,K=-1,fe=I.length;++K<fe;){var we=F(I[K]);we!==n&&(O=O===n?we:O+we)}return O}function Kl(I,F){for(var O=-1,K=Array(I);++O<I;)K[O]=F(O);return K}function sv(I,F){return We(F,function(O){return[O,I[O]]})}function kp(I){return I&&I.slice(0,Op(I)+1).replace(Ml,"")}function Kt(I){return function(F){return I(F)}}function Zl(I,F){return We(F,function(O){return I[O]})}function cs(I,F){return I.has(F)}function bp(I,F){for(var O=-1,K=I.length;++O<K&&Ei(F,I[O],0)>-1;);return O}function Dp(I,F){for(var O=I.length;O--&&Ei(F,I[O],0)>-1;);return O}function ov(I,F){for(var O=I.length,K=0;O--;)I[O]===F&&++K;return K}var av=Xl(zx),lv=Xl(qx);function uv(I){return"\\"+Hx[I]}function cv(I,F){return I==null?n:I[F]}function Ti(I){return Gx.test(I)}function fv(I){return Vx.test(I)}function hv(I){for(var F,O=[];!(F=I.next()).done;)O.push(F.value);return O}function Jl(I){var F=-1,O=Array(I.size);return I.forEach(function(K,fe){O[++F]=[fe,K]}),O}function Np(I,F){return function(O){return I(F(O))}}function _r(I,F){for(var O=-1,K=I.length,fe=0,we=[];++O<K;){var ot=I[O];(ot===F||ot===v)&&(I[O]=v,we[fe++]=O)}return we}function To(I){var F=-1,O=Array(I.size);return I.forEach(function(K){O[++F]=K}),O}function pv(I){var F=-1,O=Array(I.size);return I.forEach(function(K){O[++F]=[K,K]}),O}function dv(I,F,O){for(var K=O-1,fe=I.length;++K<fe;)if(I[K]===F)return K;return-1}function mv(I,F,O){for(var K=O+1;K--;)if(I[K]===F)return K;return K}function Ai(I){return Ti(I)?_v(I):ev(I)}function En(I){return Ti(I)?yv(I):tv(I)}function Op(I){for(var F=I.length;F--&&ox.test(I.charAt(F)););return F}var gv=Xl(jx);function _v(I){for(var F=Vl.lastIndex=0;Vl.test(I);)++F;return F}function yv(I){return I.match(Vl)||[]}function xv(I){return I.match(Ux)||[]}var vv=function I(F){F=F==null?mt:wi.defaults(mt.Object(),F,wi.pick(mt,Wx));var O=F.Array,K=F.Date,fe=F.Error,we=F.Function,ot=F.Math,Pe=F.Object,Ql=F.RegExp,Sv=F.String,fn=F.TypeError,Ao=O.prototype,Rv=we.prototype,Ii=Pe.prototype,wo=F["__core-js_shared__"],Io=Rv.toString,be=Ii.hasOwnProperty,Cv=0,Pp=function(){var i=/[^.]+$/.exec(wo&&wo.keys&&wo.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),ko=Ii.toString,Ev=Io.call(Pe),Tv=mt._,Av=Ql("^"+Io.call(be).replace(Fl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bo=_p?F.Buffer:n,yr=F.Symbol,Do=F.Uint8Array,Fp=bo?bo.allocUnsafe:n,No=Np(Pe.getPrototypeOf,Pe),Mp=Pe.create,Lp=Ii.propertyIsEnumerable,Oo=Ao.splice,Bp=yr?yr.isConcatSpreadable:n,fs=yr?yr.iterator:n,zr=yr?yr.toStringTag:n,Po=function(){try{var i=Yr(Pe,"defineProperty");return i({},"",{}),i}catch{}}(),wv=F.clearTimeout!==mt.clearTimeout&&F.clearTimeout,Iv=K&&K.now!==mt.Date.now&&K.now,kv=F.setTimeout!==mt.setTimeout&&F.setTimeout,Fo=ot.ceil,Mo=ot.floor,eu=Pe.getOwnPropertySymbols,bv=bo?bo.isBuffer:n,Up=F.isFinite,Dv=Ao.join,Nv=Np(Pe.keys,Pe),at=ot.max,Rt=ot.min,Ov=K.now,Pv=F.parseInt,Gp=ot.random,Fv=Ao.reverse,tu=Yr(F,"DataView"),hs=Yr(F,"Map"),nu=Yr(F,"Promise"),ki=Yr(F,"Set"),ps=Yr(F,"WeakMap"),ds=Yr(Pe,"create"),Lo=ps&&new ps,bi={},Mv=Kr(tu),Lv=Kr(hs),Bv=Kr(nu),Uv=Kr(ki),Gv=Kr(ps),Bo=yr?yr.prototype:n,ms=Bo?Bo.valueOf:n,Vp=Bo?Bo.toString:n;function y(i){if(He(i)&&!he(i)&&!(i instanceof Re)){if(i instanceof hn)return i;if(be.call(i,"__wrapped__"))return W0(i)}return new hn(i)}var Di=function(){function i(){}return function(s){if(!ze(s))return{};if(Mp)return Mp(s);i.prototype=s;var l=new i;return i.prototype=n,l}}();function Uo(){}function hn(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}y.templateSettings={escape:ex,evaluate:tx,interpolate:Kh,variable:"",imports:{_:y}},y.prototype=Uo.prototype,y.prototype.constructor=y,hn.prototype=Di(Uo.prototype),hn.prototype.constructor=hn;function Re(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=xe,this.__views__=[]}function Vv(){var i=new Re(this.__wrapped__);return i.__actions__=Bt(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Bt(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Bt(this.__views__),i}function Wv(){if(this.__filtered__){var i=new Re(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function $v(){var i=this.__wrapped__.value(),s=this.__dir__,l=he(i),f=s<0,d=l?i.length:0,x=tR(0,d,this.__views__),C=x.start,A=x.end,k=A-C,U=f?A:C-1,G=this.__iteratees__,V=G.length,X=0,ee=Rt(k,this.__takeCount__);if(!l||!f&&d==k&&ee==k)return f0(i,this.__actions__);var oe=[];e:for(;k--&&X<ee;){U+=s;for(var _e=-1,ae=i[U];++_e<V;){var Se=G[_e],Ce=Se.iteratee,Qt=Se.type,Dt=Ce(ae);if(Qt==Ae)ae=Dt;else if(!Dt){if(Qt==se)continue e;break e}}oe[X++]=ae}return oe}Re.prototype=Di(Uo.prototype),Re.prototype.constructor=Re;function qr(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var f=i[s];this.set(f[0],f[1])}}function zv(){this.__data__=ds?ds(null):{},this.size=0}function qv(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function jv(i){var s=this.__data__;if(ds){var l=s[i];return l===m?n:l}return be.call(s,i)?s[i]:n}function Hv(i){var s=this.__data__;return ds?s[i]!==n:be.call(s,i)}function Xv(i,s){var l=this.__data__;return this.size+=this.has(i)?0:1,l[i]=ds&&s===n?m:s,this}qr.prototype.clear=zv,qr.prototype.delete=qv,qr.prototype.get=jv,qr.prototype.has=Hv,qr.prototype.set=Xv;function Hn(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var f=i[s];this.set(f[0],f[1])}}function Yv(){this.__data__=[],this.size=0}function Kv(i){var s=this.__data__,l=Go(s,i);if(l<0)return!1;var f=s.length-1;return l==f?s.pop():Oo.call(s,l,1),--this.size,!0}function Zv(i){var s=this.__data__,l=Go(s,i);return l<0?n:s[l][1]}function Jv(i){return Go(this.__data__,i)>-1}function Qv(i,s){var l=this.__data__,f=Go(l,i);return f<0?(++this.size,l.push([i,s])):l[f][1]=s,this}Hn.prototype.clear=Yv,Hn.prototype.delete=Kv,Hn.prototype.get=Zv,Hn.prototype.has=Jv,Hn.prototype.set=Qv;function Xn(i){var s=-1,l=i==null?0:i.length;for(this.clear();++s<l;){var f=i[s];this.set(f[0],f[1])}}function eS(){this.size=0,this.__data__={hash:new qr,map:new(hs||Hn),string:new qr}}function tS(i){var s=Jo(this,i).delete(i);return this.size-=s?1:0,s}function nS(i){return Jo(this,i).get(i)}function rS(i){return Jo(this,i).has(i)}function iS(i,s){var l=Jo(this,i),f=l.size;return l.set(i,s),this.size+=l.size==f?0:1,this}Xn.prototype.clear=eS,Xn.prototype.delete=tS,Xn.prototype.get=nS,Xn.prototype.has=rS,Xn.prototype.set=iS;function jr(i){var s=-1,l=i==null?0:i.length;for(this.__data__=new Xn;++s<l;)this.add(i[s])}function sS(i){return this.__data__.set(i,m),this}function oS(i){return this.__data__.has(i)}jr.prototype.add=jr.prototype.push=sS,jr.prototype.has=oS;function Tn(i){var s=this.__data__=new Hn(i);this.size=s.size}function aS(){this.__data__=new Hn,this.size=0}function lS(i){var s=this.__data__,l=s.delete(i);return this.size=s.size,l}function uS(i){return this.__data__.get(i)}function cS(i){return this.__data__.has(i)}function fS(i,s){var l=this.__data__;if(l instanceof Hn){var f=l.__data__;if(!hs||f.length<o-1)return f.push([i,s]),this.size=++l.size,this;l=this.__data__=new Xn(f)}return l.set(i,s),this.size=l.size,this}Tn.prototype.clear=aS,Tn.prototype.delete=lS,Tn.prototype.get=uS,Tn.prototype.has=cS,Tn.prototype.set=fS;function Wp(i,s){var l=he(i),f=!l&&Zr(i),d=!l&&!f&&Cr(i),x=!l&&!f&&!d&&Fi(i),C=l||f||d||x,A=C?Kl(i.length,Sv):[],k=A.length;for(var U in i)(s||be.call(i,U))&&!(C&&(U=="length"||d&&(U=="offset"||U=="parent")||x&&(U=="buffer"||U=="byteLength"||U=="byteOffset")||Jn(U,k)))&&A.push(U);return A}function $p(i){var s=i.length;return s?i[pu(0,s-1)]:n}function hS(i,s){return Qo(Bt(i),Hr(s,0,i.length))}function pS(i){return Qo(Bt(i))}function ru(i,s,l){(l!==n&&!An(i[s],l)||l===n&&!(s in i))&&Yn(i,s,l)}function gs(i,s,l){var f=i[s];(!(be.call(i,s)&&An(f,l))||l===n&&!(s in i))&&Yn(i,s,l)}function Go(i,s){for(var l=i.length;l--;)if(An(i[l][0],s))return l;return-1}function dS(i,s,l,f){return xr(i,function(d,x,C){s(f,d,l(d),C)}),f}function zp(i,s){return i&&On(s,ut(s),i)}function mS(i,s){return i&&On(s,Gt(s),i)}function Yn(i,s,l){s=="__proto__"&&Po?Po(i,s,{configurable:!0,enumerable:!0,value:l,writable:!0}):i[s]=l}function iu(i,s){for(var l=-1,f=s.length,d=O(f),x=i==null;++l<f;)d[l]=x?n:Bu(i,s[l]);return d}function Hr(i,s,l){return i===i&&(l!==n&&(i=i<=l?i:l),s!==n&&(i=i>=s?i:s)),i}function pn(i,s,l,f,d,x){var C,A=s&R,k=s&b,U=s&L;if(l&&(C=d?l(i,f,d,x):l(i)),C!==n)return C;if(!ze(i))return i;var G=he(i);if(G){if(C=rR(i),!A)return Bt(i,C)}else{var V=Ct(i),X=V==Mt||V==jn;if(Cr(i))return d0(i,A);if(V==Xt||V==Q||X&&!d){if(C=k||X?{}:O0(i),!A)return k?jS(i,mS(C,i)):qS(i,zp(C,i))}else{if(!Be[V])return d?i:{};C=iR(i,V,A)}}x||(x=new Tn);var ee=x.get(i);if(ee)return ee;x.set(i,C),ld(i)?i.forEach(function(ae){C.add(pn(ae,s,l,ae,i,x))}):od(i)&&i.forEach(function(ae,Se){C.set(Se,pn(ae,s,l,Se,i,x))});var oe=U?k?Eu:Cu:k?Gt:ut,_e=G?n:oe(i);return cn(_e||i,function(ae,Se){_e&&(Se=ae,ae=i[Se]),gs(C,Se,pn(ae,s,l,Se,i,x))}),C}function gS(i){var s=ut(i);return function(l){return qp(l,i,s)}}function qp(i,s,l){var f=l.length;if(i==null)return!f;for(i=Pe(i);f--;){var d=l[f],x=s[d],C=i[d];if(C===n&&!(d in i)||!x(C))return!1}return!0}function jp(i,s,l){if(typeof i!="function")throw new fn(u);return Cs(function(){i.apply(n,l)},s)}function _s(i,s,l,f){var d=-1,x=Co,C=!0,A=i.length,k=[],U=s.length;if(!A)return k;l&&(s=We(s,Kt(l))),f?(x=zl,C=!1):s.length>=o&&(x=cs,C=!1,s=new jr(s));e:for(;++d<A;){var G=i[d],V=l==null?G:l(G);if(G=f||G!==0?G:0,C&&V===V){for(var X=U;X--;)if(s[X]===V)continue e;k.push(G)}else x(s,V,f)||k.push(G)}return k}var xr=x0(Nn),Hp=x0(ou,!0);function _S(i,s){var l=!0;return xr(i,function(f,d,x){return l=!!s(f,d,x),l}),l}function Vo(i,s,l){for(var f=-1,d=i.length;++f<d;){var x=i[f],C=s(x);if(C!=null&&(A===n?C===C&&!Jt(C):l(C,A)))var A=C,k=x}return k}function yS(i,s,l,f){var d=i.length;for(l=me(l),l<0&&(l=-l>d?0:d+l),f=f===n||f>d?d:me(f),f<0&&(f+=d),f=l>f?0:cd(f);l<f;)i[l++]=s;return i}function Xp(i,s){var l=[];return xr(i,function(f,d,x){s(f,d,x)&&l.push(f)}),l}function gt(i,s,l,f,d){var x=-1,C=i.length;for(l||(l=oR),d||(d=[]);++x<C;){var A=i[x];s>0&&l(A)?s>1?gt(A,s-1,l,f,d):gr(d,A):f||(d[d.length]=A)}return d}var su=v0(),Yp=v0(!0);function Nn(i,s){return i&&su(i,s,ut)}function ou(i,s){return i&&Yp(i,s,ut)}function Wo(i,s){return mr(s,function(l){return Qn(i[l])})}function Xr(i,s){s=Sr(s,i);for(var l=0,f=s.length;i!=null&&l<f;)i=i[Pn(s[l++])];return l&&l==f?i:n}function Kp(i,s,l){var f=s(i);return he(i)?f:gr(f,l(i))}function kt(i){return i==null?i===n?Ol:Dl:zr&&zr in Pe(i)?eR(i):pR(i)}function au(i,s){return i>s}function xS(i,s){return i!=null&&be.call(i,s)}function vS(i,s){return i!=null&&s in Pe(i)}function SS(i,s,l){return i>=Rt(s,l)&&i<at(s,l)}function lu(i,s,l){for(var f=l?zl:Co,d=i[0].length,x=i.length,C=x,A=O(x),k=1/0,U=[];C--;){var G=i[C];C&&s&&(G=We(G,Kt(s))),k=Rt(G.length,k),A[C]=!l&&(s||d>=120&&G.length>=120)?new jr(C&&G):n}G=i[0];var V=-1,X=A[0];e:for(;++V<d&&U.length<k;){var ee=G[V],oe=s?s(ee):ee;if(ee=l||ee!==0?ee:0,!(X?cs(X,oe):f(U,oe,l))){for(C=x;--C;){var _e=A[C];if(!(_e?cs(_e,oe):f(i[C],oe,l)))continue e}X&&X.push(oe),U.push(ee)}}return U}function RS(i,s,l,f){return Nn(i,function(d,x,C){s(f,l(d),x,C)}),f}function ys(i,s,l){s=Sr(s,i),i=L0(i,s);var f=i==null?i:i[Pn(mn(s))];return f==null?n:Yt(f,i,l)}function Zp(i){return He(i)&&kt(i)==Q}function CS(i){return He(i)&&kt(i)==g}function ES(i){return He(i)&&kt(i)==pt}function xs(i,s,l,f,d){return i===s?!0:i==null||s==null||!He(i)&&!He(s)?i!==i&&s!==s:TS(i,s,l,f,xs,d)}function TS(i,s,l,f,d,x){var C=he(i),A=he(s),k=C?pe:Ct(i),U=A?pe:Ct(s);k=k==Q?Xt:k,U=U==Q?Xt:U;var G=k==Xt,V=U==Xt,X=k==U;if(X&&Cr(i)){if(!Cr(s))return!1;C=!0,G=!1}if(X&&!G)return x||(x=new Tn),C||Fi(i)?b0(i,s,l,f,d,x):JS(i,s,k,l,f,d,x);if(!(l&H)){var ee=G&&be.call(i,"__wrapped__"),oe=V&&be.call(s,"__wrapped__");if(ee||oe){var _e=ee?i.value():i,ae=oe?s.value():s;return x||(x=new Tn),d(_e,ae,l,f,x)}}return X?(x||(x=new Tn),QS(i,s,l,f,d,x)):!1}function AS(i){return He(i)&&Ct(i)==dt}function uu(i,s,l,f){var d=l.length,x=d,C=!f;if(i==null)return!x;for(i=Pe(i);d--;){var A=l[d];if(C&&A[2]?A[1]!==i[A[0]]:!(A[0]in i))return!1}for(;++d<x;){A=l[d];var k=A[0],U=i[k],G=A[1];if(C&&A[2]){if(U===n&&!(k in i))return!1}else{var V=new Tn;if(f)var X=f(U,G,k,i,s,V);if(!(X===n?xs(G,U,H|J,f,V):X))return!1}}return!0}function Jp(i){if(!ze(i)||lR(i))return!1;var s=Qn(i)?Av:gx;return s.test(Kr(i))}function wS(i){return He(i)&&kt(i)==pr}function IS(i){return He(i)&&Ct(i)==vt}function kS(i){return He(i)&&sa(i.length)&&!!Ge[kt(i)]}function Qp(i){return typeof i=="function"?i:i==null?Vt:typeof i=="object"?he(i)?n0(i[0],i[1]):t0(i):Sd(i)}function cu(i){if(!Rs(i))return Nv(i);var s=[];for(var l in Pe(i))be.call(i,l)&&l!="constructor"&&s.push(l);return s}function bS(i){if(!ze(i))return hR(i);var s=Rs(i),l=[];for(var f in i)f=="constructor"&&(s||!be.call(i,f))||l.push(f);return l}function fu(i,s){return i<s}function e0(i,s){var l=-1,f=Ut(i)?O(i.length):[];return xr(i,function(d,x,C){f[++l]=s(d,x,C)}),f}function t0(i){var s=Au(i);return s.length==1&&s[0][2]?F0(s[0][0],s[0][1]):function(l){return l===i||uu(l,i,s)}}function n0(i,s){return Iu(i)&&P0(s)?F0(Pn(i),s):function(l){var f=Bu(l,i);return f===n&&f===s?Uu(l,i):xs(s,f,H|J)}}function $o(i,s,l,f,d){i!==s&&su(s,function(x,C){if(d||(d=new Tn),ze(x))DS(i,s,C,l,$o,f,d);else{var A=f?f(bu(i,C),x,C+"",i,s,d):n;A===n&&(A=x),ru(i,C,A)}},Gt)}function DS(i,s,l,f,d,x,C){var A=bu(i,l),k=bu(s,l),U=C.get(k);if(U){ru(i,l,U);return}var G=x?x(A,k,l+"",i,s,C):n,V=G===n;if(V){var X=he(k),ee=!X&&Cr(k),oe=!X&&!ee&&Fi(k);G=k,X||ee||oe?he(A)?G=A:Je(A)?G=Bt(A):ee?(V=!1,G=d0(k,!0)):oe?(V=!1,G=m0(k,!0)):G=[]:Es(k)||Zr(k)?(G=A,Zr(A)?G=fd(A):(!ze(A)||Qn(A))&&(G=O0(k))):V=!1}V&&(C.set(k,G),d(G,k,f,x,C),C.delete(k)),ru(i,l,G)}function r0(i,s){var l=i.length;if(l)return s+=s<0?l:0,Jn(s,l)?i[s]:n}function i0(i,s,l){s.length?s=We(s,function(x){return he(x)?function(C){return Xr(C,x.length===1?x[0]:x)}:x}):s=[Vt];var f=-1;s=We(s,Kt(ie()));var d=e0(i,function(x,C,A){var k=We(s,function(U){return U(x)});return{criteria:k,index:++f,value:x}});return iv(d,function(x,C){return zS(x,C,l)})}function NS(i,s){return s0(i,s,function(l,f){return Uu(i,f)})}function s0(i,s,l){for(var f=-1,d=s.length,x={};++f<d;){var C=s[f],A=Xr(i,C);l(A,C)&&vs(x,Sr(C,i),A)}return x}function OS(i){return function(s){return Xr(s,i)}}function hu(i,s,l,f){var d=f?rv:Ei,x=-1,C=s.length,A=i;for(i===s&&(s=Bt(s)),l&&(A=We(i,Kt(l)));++x<C;)for(var k=0,U=s[x],G=l?l(U):U;(k=d(A,G,k,f))>-1;)A!==i&&Oo.call(A,k,1),Oo.call(i,k,1);return i}function o0(i,s){for(var l=i?s.length:0,f=l-1;l--;){var d=s[l];if(l==f||d!==x){var x=d;Jn(d)?Oo.call(i,d,1):gu(i,d)}}return i}function pu(i,s){return i+Mo(Gp()*(s-i+1))}function PS(i,s,l,f){for(var d=-1,x=at(Fo((s-i)/(l||1)),0),C=O(x);x--;)C[f?x:++d]=i,i+=l;return C}function du(i,s){var l="";if(!i||s<1||s>st)return l;do s%2&&(l+=i),s=Mo(s/2),s&&(i+=i);while(s);return l}function ye(i,s){return Du(M0(i,s,Vt),i+"")}function FS(i){return $p(Mi(i))}function MS(i,s){var l=Mi(i);return Qo(l,Hr(s,0,l.length))}function vs(i,s,l,f){if(!ze(i))return i;s=Sr(s,i);for(var d=-1,x=s.length,C=x-1,A=i;A!=null&&++d<x;){var k=Pn(s[d]),U=l;if(k==="__proto__"||k==="constructor"||k==="prototype")return i;if(d!=C){var G=A[k];U=f?f(G,k,A):n,U===n&&(U=ze(G)?G:Jn(s[d+1])?[]:{})}gs(A,k,U),A=A[k]}return i}var a0=Lo?function(i,s){return Lo.set(i,s),i}:Vt,LS=Po?function(i,s){return Po(i,"toString",{configurable:!0,enumerable:!1,value:Vu(s),writable:!0})}:Vt;function BS(i){return Qo(Mi(i))}function dn(i,s,l){var f=-1,d=i.length;s<0&&(s=-s>d?0:d+s),l=l>d?d:l,l<0&&(l+=d),d=s>l?0:l-s>>>0,s>>>=0;for(var x=O(d);++f<d;)x[f]=i[f+s];return x}function US(i,s){var l;return xr(i,function(f,d,x){return l=s(f,d,x),!l}),!!l}function zo(i,s,l){var f=0,d=i==null?f:i.length;if(typeof s=="number"&&s===s&&d<=Ri){for(;f<d;){var x=f+d>>>1,C=i[x];C!==null&&!Jt(C)&&(l?C<=s:C<s)?f=x+1:d=x}return d}return mu(i,s,Vt,l)}function mu(i,s,l,f){var d=0,x=i==null?0:i.length;if(x===0)return 0;s=l(s);for(var C=s!==s,A=s===null,k=Jt(s),U=s===n;d<x;){var G=Mo((d+x)/2),V=l(i[G]),X=V!==n,ee=V===null,oe=V===V,_e=Jt(V);if(C)var ae=f||oe;else U?ae=oe&&(f||X):A?ae=oe&&X&&(f||!ee):k?ae=oe&&X&&!ee&&(f||!_e):ee||_e?ae=!1:ae=f?V<=s:V<s;ae?d=G+1:x=G}return Rt(x,Ze)}function l0(i,s){for(var l=-1,f=i.length,d=0,x=[];++l<f;){var C=i[l],A=s?s(C):C;if(!l||!An(A,k)){var k=A;x[d++]=C===0?0:C}}return x}function u0(i){return typeof i=="number"?i:Jt(i)?Ht:+i}function Zt(i){if(typeof i=="string")return i;if(he(i))return We(i,Zt)+"";if(Jt(i))return Vp?Vp.call(i):"";var s=i+"";return s=="0"&&1/i==-le?"-0":s}function vr(i,s,l){var f=-1,d=Co,x=i.length,C=!0,A=[],k=A;if(l)C=!1,d=zl;else if(x>=o){var U=s?null:KS(i);if(U)return To(U);C=!1,d=cs,k=new jr}else k=s?[]:A;e:for(;++f<x;){var G=i[f],V=s?s(G):G;if(G=l||G!==0?G:0,C&&V===V){for(var X=k.length;X--;)if(k[X]===V)continue e;s&&k.push(V),A.push(G)}else d(k,V,l)||(k!==A&&k.push(V),A.push(G))}return A}function gu(i,s){return s=Sr(s,i),i=L0(i,s),i==null||delete i[Pn(mn(s))]}function c0(i,s,l,f){return vs(i,s,l(Xr(i,s)),f)}function qo(i,s,l,f){for(var d=i.length,x=f?d:-1;(f?x--:++x<d)&&s(i[x],x,i););return l?dn(i,f?0:x,f?x+1:d):dn(i,f?x+1:0,f?d:x)}function f0(i,s){var l=i;return l instanceof Re&&(l=l.value()),ql(s,function(f,d){return d.func.apply(d.thisArg,gr([f],d.args))},l)}function _u(i,s,l){var f=i.length;if(f<2)return f?vr(i[0]):[];for(var d=-1,x=O(f);++d<f;)for(var C=i[d],A=-1;++A<f;)A!=d&&(x[d]=_s(x[d]||C,i[A],s,l));return vr(gt(x,1),s,l)}function h0(i,s,l){for(var f=-1,d=i.length,x=s.length,C={};++f<d;){var A=f<x?s[f]:n;l(C,i[f],A)}return C}function yu(i){return Je(i)?i:[]}function xu(i){return typeof i=="function"?i:Vt}function Sr(i,s){return he(i)?i:Iu(i,s)?[i]:V0(Ie(i))}var GS=ye;function Rr(i,s,l){var f=i.length;return l=l===n?f:l,!s&&l>=f?i:dn(i,s,l)}var p0=wv||function(i){return mt.clearTimeout(i)};function d0(i,s){if(s)return i.slice();var l=i.length,f=Fp?Fp(l):new i.constructor(l);return i.copy(f),f}function vu(i){var s=new i.constructor(i.byteLength);return new Do(s).set(new Do(i)),s}function VS(i,s){var l=s?vu(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.byteLength)}function WS(i){var s=new i.constructor(i.source,Zh.exec(i));return s.lastIndex=i.lastIndex,s}function $S(i){return ms?Pe(ms.call(i)):{}}function m0(i,s){var l=s?vu(i.buffer):i.buffer;return new i.constructor(l,i.byteOffset,i.length)}function g0(i,s){if(i!==s){var l=i!==n,f=i===null,d=i===i,x=Jt(i),C=s!==n,A=s===null,k=s===s,U=Jt(s);if(!A&&!U&&!x&&i>s||x&&C&&k&&!A&&!U||f&&C&&k||!l&&k||!d)return 1;if(!f&&!x&&!U&&i<s||U&&l&&d&&!f&&!x||A&&l&&d||!C&&d||!k)return-1}return 0}function zS(i,s,l){for(var f=-1,d=i.criteria,x=s.criteria,C=d.length,A=l.length;++f<C;){var k=g0(d[f],x[f]);if(k){if(f>=A)return k;var U=l[f];return k*(U=="desc"?-1:1)}}return i.index-s.index}function _0(i,s,l,f){for(var d=-1,x=i.length,C=l.length,A=-1,k=s.length,U=at(x-C,0),G=O(k+U),V=!f;++A<k;)G[A]=s[A];for(;++d<C;)(V||d<x)&&(G[l[d]]=i[d]);for(;U--;)G[A++]=i[d++];return G}function y0(i,s,l,f){for(var d=-1,x=i.length,C=-1,A=l.length,k=-1,U=s.length,G=at(x-A,0),V=O(G+U),X=!f;++d<G;)V[d]=i[d];for(var ee=d;++k<U;)V[ee+k]=s[k];for(;++C<A;)(X||d<x)&&(V[ee+l[C]]=i[d++]);return V}function Bt(i,s){var l=-1,f=i.length;for(s||(s=O(f));++l<f;)s[l]=i[l];return s}function On(i,s,l,f){var d=!l;l||(l={});for(var x=-1,C=s.length;++x<C;){var A=s[x],k=f?f(l[A],i[A],A,l,i):n;k===n&&(k=i[A]),d?Yn(l,A,k):gs(l,A,k)}return l}function qS(i,s){return On(i,wu(i),s)}function jS(i,s){return On(i,D0(i),s)}function jo(i,s){return function(l,f){var d=he(l)?Zx:dS,x=s?s():{};return d(l,i,ie(f,2),x)}}function Ni(i){return ye(function(s,l){var f=-1,d=l.length,x=d>1?l[d-1]:n,C=d>2?l[2]:n;for(x=i.length>3&&typeof x=="function"?(d--,x):n,C&&bt(l[0],l[1],C)&&(x=d<3?n:x,d=1),s=Pe(s);++f<d;){var A=l[f];A&&i(s,A,f,x)}return s})}function x0(i,s){return function(l,f){if(l==null)return l;if(!Ut(l))return i(l,f);for(var d=l.length,x=s?d:-1,C=Pe(l);(s?x--:++x<d)&&f(C[x],x,C)!==!1;);return l}}function v0(i){return function(s,l,f){for(var d=-1,x=Pe(s),C=f(s),A=C.length;A--;){var k=C[i?A:++d];if(l(x[k],k,x)===!1)break}return s}}function HS(i,s,l){var f=s&E,d=Ss(i);function x(){var C=this&&this!==mt&&this instanceof x?d:i;return C.apply(f?l:this,arguments)}return x}function S0(i){return function(s){s=Ie(s);var l=Ti(s)?En(s):n,f=l?l[0]:s.charAt(0),d=l?Rr(l,1).join(""):s.slice(1);return f[i]()+d}}function Oi(i){return function(s){return ql(xd(yd(s).replace(Lx,"")),i,"")}}function Ss(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var l=Di(i.prototype),f=i.apply(l,s);return ze(f)?f:l}}function XS(i,s,l){var f=Ss(i);function d(){for(var x=arguments.length,C=O(x),A=x,k=Pi(d);A--;)C[A]=arguments[A];var U=x<3&&C[0]!==k&&C[x-1]!==k?[]:_r(C,k);if(x-=U.length,x<l)return A0(i,s,Ho,d.placeholder,n,C,U,n,n,l-x);var G=this&&this!==mt&&this instanceof d?f:i;return Yt(G,this,C)}return d}function R0(i){return function(s,l,f){var d=Pe(s);if(!Ut(s)){var x=ie(l,3);s=ut(s),l=function(A){return x(d[A],A,d)}}var C=i(s,l,f);return C>-1?d[x?s[C]:C]:n}}function C0(i){return Zn(function(s){var l=s.length,f=l,d=hn.prototype.thru;for(i&&s.reverse();f--;){var x=s[f];if(typeof x!="function")throw new fn(u);if(d&&!C&&Zo(x)=="wrapper")var C=new hn([],!0)}for(f=C?f:l;++f<l;){x=s[f];var A=Zo(x),k=A=="wrapper"?Tu(x):n;k&&ku(k[0])&&k[1]==(ne|P|B|ue)&&!k[4].length&&k[9]==1?C=C[Zo(k[0])].apply(C,k[3]):C=x.length==1&&ku(x)?C[A]():C.thru(x)}return function(){var U=arguments,G=U[0];if(C&&U.length==1&&he(G))return C.plant(G).value();for(var V=0,X=l?s[V].apply(this,U):G;++V<l;)X=s[V].call(this,X);return X}})}function Ho(i,s,l,f,d,x,C,A,k,U){var G=s&ne,V=s&E,X=s&T,ee=s&(P|q),oe=s&re,_e=X?n:Ss(i);function ae(){for(var Se=arguments.length,Ce=O(Se),Qt=Se;Qt--;)Ce[Qt]=arguments[Qt];if(ee)var Dt=Pi(ae),en=ov(Ce,Dt);if(f&&(Ce=_0(Ce,f,d,ee)),x&&(Ce=y0(Ce,x,C,ee)),Se-=en,ee&&Se<U){var Qe=_r(Ce,Dt);return A0(i,s,Ho,ae.placeholder,l,Ce,Qe,A,k,U-Se)}var wn=V?l:this,tr=X?wn[i]:i;return Se=Ce.length,A?Ce=dR(Ce,A):oe&&Se>1&&Ce.reverse(),G&&k<Se&&(Ce.length=k),this&&this!==mt&&this instanceof ae&&(tr=_e||Ss(tr)),tr.apply(wn,Ce)}return ae}function E0(i,s){return function(l,f){return RS(l,i,s(f),{})}}function Xo(i,s){return function(l,f){var d;if(l===n&&f===n)return s;if(l!==n&&(d=l),f!==n){if(d===n)return f;typeof l=="string"||typeof f=="string"?(l=Zt(l),f=Zt(f)):(l=u0(l),f=u0(f)),d=i(l,f)}return d}}function Su(i){return Zn(function(s){return s=We(s,Kt(ie())),ye(function(l){var f=this;return i(s,function(d){return Yt(d,f,l)})})})}function Yo(i,s){s=s===n?" ":Zt(s);var l=s.length;if(l<2)return l?du(s,i):s;var f=du(s,Fo(i/Ai(s)));return Ti(s)?Rr(En(f),0,i).join(""):f.slice(0,i)}function YS(i,s,l,f){var d=s&E,x=Ss(i);function C(){for(var A=-1,k=arguments.length,U=-1,G=f.length,V=O(G+k),X=this&&this!==mt&&this instanceof C?x:i;++U<G;)V[U]=f[U];for(;k--;)V[U++]=arguments[++A];return Yt(X,d?l:this,V)}return C}function T0(i){return function(s,l,f){return f&&typeof f!="number"&&bt(s,l,f)&&(l=f=n),s=er(s),l===n?(l=s,s=0):l=er(l),f=f===n?s<l?1:-1:er(f),PS(s,l,f,i)}}function Ko(i){return function(s,l){return typeof s=="string"&&typeof l=="string"||(s=gn(s),l=gn(l)),i(s,l)}}function A0(i,s,l,f,d,x,C,A,k,U){var G=s&P,V=G?C:n,X=G?n:C,ee=G?x:n,oe=G?n:x;s|=G?B:Y,s&=~(G?Y:B),s&D||(s&=~(E|T));var _e=[i,s,d,ee,V,oe,X,A,k,U],ae=l.apply(n,_e);return ku(i)&&B0(ae,_e),ae.placeholder=f,U0(ae,i,s)}function Ru(i){var s=ot[i];return function(l,f){if(l=gn(l),f=f==null?0:Rt(me(f),292),f&&Up(l)){var d=(Ie(l)+"e").split("e"),x=s(d[0]+"e"+(+d[1]+f));return d=(Ie(x)+"e").split("e"),+(d[0]+"e"+(+d[1]-f))}return s(l)}}var KS=ki&&1/To(new ki([,-0]))[1]==le?function(i){return new ki(i)}:zu;function w0(i){return function(s){var l=Ct(s);return l==dt?Jl(s):l==vt?pv(s):sv(s,i(s))}}function Kn(i,s,l,f,d,x,C,A){var k=s&T;if(!k&&typeof i!="function")throw new fn(u);var U=f?f.length:0;if(U||(s&=~(B|Y),f=d=n),C=C===n?C:at(me(C),0),A=A===n?A:me(A),U-=d?d.length:0,s&Y){var G=f,V=d;f=d=n}var X=k?n:Tu(i),ee=[i,s,l,f,d,G,V,x,C,A];if(X&&fR(ee,X),i=ee[0],s=ee[1],l=ee[2],f=ee[3],d=ee[4],A=ee[9]=ee[9]===n?k?0:i.length:at(ee[9]-U,0),!A&&s&(P|q)&&(s&=~(P|q)),!s||s==E)var oe=HS(i,s,l);else s==P||s==q?oe=XS(i,s,A):(s==B||s==(E|B))&&!d.length?oe=YS(i,s,l,f):oe=Ho.apply(n,ee);var _e=X?a0:B0;return U0(_e(oe,ee),i,s)}function I0(i,s,l,f){return i===n||An(i,Ii[l])&&!be.call(f,l)?s:i}function k0(i,s,l,f,d,x){return ze(i)&&ze(s)&&(x.set(s,i),$o(i,s,n,k0,x),x.delete(s)),i}function ZS(i){return Es(i)?n:i}function b0(i,s,l,f,d,x){var C=l&H,A=i.length,k=s.length;if(A!=k&&!(C&&k>A))return!1;var U=x.get(i),G=x.get(s);if(U&&G)return U==s&&G==i;var V=-1,X=!0,ee=l&J?new jr:n;for(x.set(i,s),x.set(s,i);++V<A;){var oe=i[V],_e=s[V];if(f)var ae=C?f(_e,oe,V,s,i,x):f(oe,_e,V,i,s,x);if(ae!==n){if(ae)continue;X=!1;break}if(ee){if(!jl(s,function(Se,Ce){if(!cs(ee,Ce)&&(oe===Se||d(oe,Se,l,f,x)))return ee.push(Ce)})){X=!1;break}}else if(!(oe===_e||d(oe,_e,l,f,x))){X=!1;break}}return x.delete(i),x.delete(s),X}function JS(i,s,l,f,d,x,C){switch(l){case h:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case g:return!(i.byteLength!=s.byteLength||!x(new Do(i),new Do(s)));case Te:case pt:case Wr:return An(+i,+s);case ln:return i.name==s.name&&i.message==s.message;case pr:case St:return i==s+"";case dt:var A=Jl;case vt:var k=f&H;if(A||(A=To),i.size!=s.size&&!k)return!1;var U=C.get(i);if(U)return U==s;f|=J,C.set(i,s);var G=b0(A(i),A(s),f,d,x,C);return C.delete(i),G;case dr:if(ms)return ms.call(i)==ms.call(s)}return!1}function QS(i,s,l,f,d,x){var C=l&H,A=Cu(i),k=A.length,U=Cu(s),G=U.length;if(k!=G&&!C)return!1;for(var V=k;V--;){var X=A[V];if(!(C?X in s:be.call(s,X)))return!1}var ee=x.get(i),oe=x.get(s);if(ee&&oe)return ee==s&&oe==i;var _e=!0;x.set(i,s),x.set(s,i);for(var ae=C;++V<k;){X=A[V];var Se=i[X],Ce=s[X];if(f)var Qt=C?f(Ce,Se,X,s,i,x):f(Se,Ce,X,i,s,x);if(!(Qt===n?Se===Ce||d(Se,Ce,l,f,x):Qt)){_e=!1;break}ae||(ae=X=="constructor")}if(_e&&!ae){var Dt=i.constructor,en=s.constructor;Dt!=en&&"constructor"in i&&"constructor"in s&&!(typeof Dt=="function"&&Dt instanceof Dt&&typeof en=="function"&&en instanceof en)&&(_e=!1)}return x.delete(i),x.delete(s),_e}function Zn(i){return Du(M0(i,n,q0),i+"")}function Cu(i){return Kp(i,ut,wu)}function Eu(i){return Kp(i,Gt,D0)}var Tu=Lo?function(i){return Lo.get(i)}:zu;function Zo(i){for(var s=i.name+"",l=bi[s],f=be.call(bi,s)?l.length:0;f--;){var d=l[f],x=d.func;if(x==null||x==i)return d.name}return s}function Pi(i){var s=be.call(y,"placeholder")?y:i;return s.placeholder}function ie(){var i=y.iteratee||Wu;return i=i===Wu?Qp:i,arguments.length?i(arguments[0],arguments[1]):i}function Jo(i,s){var l=i.__data__;return aR(s)?l[typeof s=="string"?"string":"hash"]:l.map}function Au(i){for(var s=ut(i),l=s.length;l--;){var f=s[l],d=i[f];s[l]=[f,d,P0(d)]}return s}function Yr(i,s){var l=cv(i,s);return Jp(l)?l:n}function eR(i){var s=be.call(i,zr),l=i[zr];try{i[zr]=n;var f=!0}catch{}var d=ko.call(i);return f&&(s?i[zr]=l:delete i[zr]),d}var wu=eu?function(i){return i==null?[]:(i=Pe(i),mr(eu(i),function(s){return Lp.call(i,s)}))}:qu,D0=eu?function(i){for(var s=[];i;)gr(s,wu(i)),i=No(i);return s}:qu,Ct=kt;(tu&&Ct(new tu(new ArrayBuffer(1)))!=h||hs&&Ct(new hs)!=dt||nu&&Ct(nu.resolve())!=xo||ki&&Ct(new ki)!=vt||ps&&Ct(new ps)!=Lt)&&(Ct=function(i){var s=kt(i),l=s==Xt?i.constructor:n,f=l?Kr(l):"";if(f)switch(f){case Mv:return h;case Lv:return dt;case Bv:return xo;case Uv:return vt;case Gv:return Lt}return s});function tR(i,s,l){for(var f=-1,d=l.length;++f<d;){var x=l[f],C=x.size;switch(x.type){case"drop":i+=C;break;case"dropRight":s-=C;break;case"take":s=Rt(s,i+C);break;case"takeRight":i=at(i,s-C);break}}return{start:i,end:s}}function nR(i){var s=i.match(lx);return s?s[1].split(ux):[]}function N0(i,s,l){s=Sr(s,i);for(var f=-1,d=s.length,x=!1;++f<d;){var C=Pn(s[f]);if(!(x=i!=null&&l(i,C)))break;i=i[C]}return x||++f!=d?x:(d=i==null?0:i.length,!!d&&sa(d)&&Jn(C,d)&&(he(i)||Zr(i)))}function rR(i){var s=i.length,l=new i.constructor(s);return s&&typeof i[0]=="string"&&be.call(i,"index")&&(l.index=i.index,l.input=i.input),l}function O0(i){return typeof i.constructor=="function"&&!Rs(i)?Di(No(i)):{}}function iR(i,s,l){var f=i.constructor;switch(s){case g:return vu(i);case Te:case pt:return new f(+i);case h:return VS(i,l);case p:case S:case w:case N:case M:case de:case Me:case Ne:case Le:return m0(i,l);case dt:return new f;case Wr:case St:return new f(i);case pr:return WS(i);case vt:return new f;case dr:return $S(i)}}function sR(i,s){var l=s.length;if(!l)return i;var f=l-1;return s[f]=(l>1?"& ":"")+s[f],s=s.join(l>2?", ":" "),i.replace(ax,`{
/* [wrapped with `+s+`] */
`)}function oR(i){return he(i)||Zr(i)||!!(Bp&&i&&i[Bp])}function Jn(i,s){var l=typeof i;return s=s??st,!!s&&(l=="number"||l!="symbol"&&yx.test(i))&&i>-1&&i%1==0&&i<s}function bt(i,s,l){if(!ze(l))return!1;var f=typeof s;return(f=="number"?Ut(l)&&Jn(s,l.length):f=="string"&&s in l)?An(l[s],i):!1}function Iu(i,s){if(he(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||Jt(i)?!0:rx.test(i)||!nx.test(i)||s!=null&&i in Pe(s)}function aR(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function ku(i){var s=Zo(i),l=y[s];if(typeof l!="function"||!(s in Re.prototype))return!1;if(i===l)return!0;var f=Tu(l);return!!f&&i===f[0]}function lR(i){return!!Pp&&Pp in i}var uR=wo?Qn:ju;function Rs(i){var s=i&&i.constructor,l=typeof s=="function"&&s.prototype||Ii;return i===l}function P0(i){return i===i&&!ze(i)}function F0(i,s){return function(l){return l==null?!1:l[i]===s&&(s!==n||i in Pe(l))}}function cR(i){var s=ra(i,function(f){return l.size===_&&l.clear(),f}),l=s.cache;return s}function fR(i,s){var l=i[1],f=s[1],d=l|f,x=d<(E|T|ne),C=f==ne&&l==P||f==ne&&l==ue&&i[7].length<=s[8]||f==(ne|ue)&&s[7].length<=s[8]&&l==P;if(!(x||C))return i;f&E&&(i[2]=s[2],d|=l&E?0:D);var A=s[3];if(A){var k=i[3];i[3]=k?_0(k,A,s[4]):A,i[4]=k?_r(i[3],v):s[4]}return A=s[5],A&&(k=i[5],i[5]=k?y0(k,A,s[6]):A,i[6]=k?_r(i[5],v):s[6]),A=s[7],A&&(i[7]=A),f&ne&&(i[8]=i[8]==null?s[8]:Rt(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=d,i}function hR(i){var s=[];if(i!=null)for(var l in Pe(i))s.push(l);return s}function pR(i){return ko.call(i)}function M0(i,s,l){return s=at(s===n?i.length-1:s,0),function(){for(var f=arguments,d=-1,x=at(f.length-s,0),C=O(x);++d<x;)C[d]=f[s+d];d=-1;for(var A=O(s+1);++d<s;)A[d]=f[d];return A[s]=l(C),Yt(i,this,A)}}function L0(i,s){return s.length<2?i:Xr(i,dn(s,0,-1))}function dR(i,s){for(var l=i.length,f=Rt(s.length,l),d=Bt(i);f--;){var x=s[f];i[f]=Jn(x,l)?d[x]:n}return i}function bu(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var B0=G0(a0),Cs=kv||function(i,s){return mt.setTimeout(i,s)},Du=G0(LS);function U0(i,s,l){var f=s+"";return Du(i,sR(f,mR(nR(f),l)))}function G0(i){var s=0,l=0;return function(){var f=Ov(),d=Ue-(f-l);if(l=f,d>0){if(++s>=xt)return arguments[0]}else s=0;return i.apply(n,arguments)}}function Qo(i,s){var l=-1,f=i.length,d=f-1;for(s=s===n?f:s;++l<s;){var x=pu(l,d),C=i[x];i[x]=i[l],i[l]=C}return i.length=s,i}var V0=cR(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(ix,function(l,f,d,x){s.push(d?x.replace(hx,"$1"):f||l)}),s});function Pn(i){if(typeof i=="string"||Jt(i))return i;var s=i+"";return s=="0"&&1/i==-le?"-0":s}function Kr(i){if(i!=null){try{return Io.call(i)}catch{}try{return i+""}catch{}}return""}function mR(i,s){return cn(j,function(l){var f="_."+l[0];s&l[1]&&!Co(i,f)&&i.push(f)}),i.sort()}function W0(i){if(i instanceof Re)return i.clone();var s=new hn(i.__wrapped__,i.__chain__);return s.__actions__=Bt(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function gR(i,s,l){(l?bt(i,s,l):s===n)?s=1:s=at(me(s),0);var f=i==null?0:i.length;if(!f||s<1)return[];for(var d=0,x=0,C=O(Fo(f/s));d<f;)C[x++]=dn(i,d,d+=s);return C}function _R(i){for(var s=-1,l=i==null?0:i.length,f=0,d=[];++s<l;){var x=i[s];x&&(d[f++]=x)}return d}function yR(){var i=arguments.length;if(!i)return[];for(var s=O(i-1),l=arguments[0],f=i;f--;)s[f-1]=arguments[f];return gr(he(l)?Bt(l):[l],gt(s,1))}var xR=ye(function(i,s){return Je(i)?_s(i,gt(s,1,Je,!0)):[]}),vR=ye(function(i,s){var l=mn(s);return Je(l)&&(l=n),Je(i)?_s(i,gt(s,1,Je,!0),ie(l,2)):[]}),SR=ye(function(i,s){var l=mn(s);return Je(l)&&(l=n),Je(i)?_s(i,gt(s,1,Je,!0),n,l):[]});function RR(i,s,l){var f=i==null?0:i.length;return f?(s=l||s===n?1:me(s),dn(i,s<0?0:s,f)):[]}function CR(i,s,l){var f=i==null?0:i.length;return f?(s=l||s===n?1:me(s),s=f-s,dn(i,0,s<0?0:s)):[]}function ER(i,s){return i&&i.length?qo(i,ie(s,3),!0,!0):[]}function TR(i,s){return i&&i.length?qo(i,ie(s,3),!0):[]}function AR(i,s,l,f){var d=i==null?0:i.length;return d?(l&&typeof l!="number"&&bt(i,s,l)&&(l=0,f=d),yS(i,s,l,f)):[]}function $0(i,s,l){var f=i==null?0:i.length;if(!f)return-1;var d=l==null?0:me(l);return d<0&&(d=at(f+d,0)),Eo(i,ie(s,3),d)}function z0(i,s,l){var f=i==null?0:i.length;if(!f)return-1;var d=f-1;return l!==n&&(d=me(l),d=l<0?at(f+d,0):Rt(d,f-1)),Eo(i,ie(s,3),d,!0)}function q0(i){var s=i==null?0:i.length;return s?gt(i,1):[]}function wR(i){var s=i==null?0:i.length;return s?gt(i,le):[]}function IR(i,s){var l=i==null?0:i.length;return l?(s=s===n?1:me(s),gt(i,s)):[]}function kR(i){for(var s=-1,l=i==null?0:i.length,f={};++s<l;){var d=i[s];f[d[0]]=d[1]}return f}function j0(i){return i&&i.length?i[0]:n}function bR(i,s,l){var f=i==null?0:i.length;if(!f)return-1;var d=l==null?0:me(l);return d<0&&(d=at(f+d,0)),Ei(i,s,d)}function DR(i){var s=i==null?0:i.length;return s?dn(i,0,-1):[]}var NR=ye(function(i){var s=We(i,yu);return s.length&&s[0]===i[0]?lu(s):[]}),OR=ye(function(i){var s=mn(i),l=We(i,yu);return s===mn(l)?s=n:l.pop(),l.length&&l[0]===i[0]?lu(l,ie(s,2)):[]}),PR=ye(function(i){var s=mn(i),l=We(i,yu);return s=typeof s=="function"?s:n,s&&l.pop(),l.length&&l[0]===i[0]?lu(l,n,s):[]});function FR(i,s){return i==null?"":Dv.call(i,s)}function mn(i){var s=i==null?0:i.length;return s?i[s-1]:n}function MR(i,s,l){var f=i==null?0:i.length;if(!f)return-1;var d=f;return l!==n&&(d=me(l),d=d<0?at(f+d,0):Rt(d,f-1)),s===s?mv(i,s,d):Eo(i,Ap,d,!0)}function LR(i,s){return i&&i.length?r0(i,me(s)):n}var BR=ye(H0);function H0(i,s){return i&&i.length&&s&&s.length?hu(i,s):i}function UR(i,s,l){return i&&i.length&&s&&s.length?hu(i,s,ie(l,2)):i}function GR(i,s,l){return i&&i.length&&s&&s.length?hu(i,s,n,l):i}var VR=Zn(function(i,s){var l=i==null?0:i.length,f=iu(i,s);return o0(i,We(s,function(d){return Jn(d,l)?+d:d}).sort(g0)),f});function WR(i,s){var l=[];if(!(i&&i.length))return l;var f=-1,d=[],x=i.length;for(s=ie(s,3);++f<x;){var C=i[f];s(C,f,i)&&(l.push(C),d.push(f))}return o0(i,d),l}function Nu(i){return i==null?i:Fv.call(i)}function $R(i,s,l){var f=i==null?0:i.length;return f?(l&&typeof l!="number"&&bt(i,s,l)?(s=0,l=f):(s=s==null?0:me(s),l=l===n?f:me(l)),dn(i,s,l)):[]}function zR(i,s){return zo(i,s)}function qR(i,s,l){return mu(i,s,ie(l,2))}function jR(i,s){var l=i==null?0:i.length;if(l){var f=zo(i,s);if(f<l&&An(i[f],s))return f}return-1}function HR(i,s){return zo(i,s,!0)}function XR(i,s,l){return mu(i,s,ie(l,2),!0)}function YR(i,s){var l=i==null?0:i.length;if(l){var f=zo(i,s,!0)-1;if(An(i[f],s))return f}return-1}function KR(i){return i&&i.length?l0(i):[]}function ZR(i,s){return i&&i.length?l0(i,ie(s,2)):[]}function JR(i){var s=i==null?0:i.length;return s?dn(i,1,s):[]}function QR(i,s,l){return i&&i.length?(s=l||s===n?1:me(s),dn(i,0,s<0?0:s)):[]}function e2(i,s,l){var f=i==null?0:i.length;return f?(s=l||s===n?1:me(s),s=f-s,dn(i,s<0?0:s,f)):[]}function t2(i,s){return i&&i.length?qo(i,ie(s,3),!1,!0):[]}function n2(i,s){return i&&i.length?qo(i,ie(s,3)):[]}var r2=ye(function(i){return vr(gt(i,1,Je,!0))}),i2=ye(function(i){var s=mn(i);return Je(s)&&(s=n),vr(gt(i,1,Je,!0),ie(s,2))}),s2=ye(function(i){var s=mn(i);return s=typeof s=="function"?s:n,vr(gt(i,1,Je,!0),n,s)});function o2(i){return i&&i.length?vr(i):[]}function a2(i,s){return i&&i.length?vr(i,ie(s,2)):[]}function l2(i,s){return s=typeof s=="function"?s:n,i&&i.length?vr(i,n,s):[]}function Ou(i){if(!(i&&i.length))return[];var s=0;return i=mr(i,function(l){if(Je(l))return s=at(l.length,s),!0}),Kl(s,function(l){return We(i,Hl(l))})}function X0(i,s){if(!(i&&i.length))return[];var l=Ou(i);return s==null?l:We(l,function(f){return Yt(s,n,f)})}var u2=ye(function(i,s){return Je(i)?_s(i,s):[]}),c2=ye(function(i){return _u(mr(i,Je))}),f2=ye(function(i){var s=mn(i);return Je(s)&&(s=n),_u(mr(i,Je),ie(s,2))}),h2=ye(function(i){var s=mn(i);return s=typeof s=="function"?s:n,_u(mr(i,Je),n,s)}),p2=ye(Ou);function d2(i,s){return h0(i||[],s||[],gs)}function m2(i,s){return h0(i||[],s||[],vs)}var g2=ye(function(i){var s=i.length,l=s>1?i[s-1]:n;return l=typeof l=="function"?(i.pop(),l):n,X0(i,l)});function Y0(i){var s=y(i);return s.__chain__=!0,s}function _2(i,s){return s(i),i}function ea(i,s){return s(i)}var y2=Zn(function(i){var s=i.length,l=s?i[0]:0,f=this.__wrapped__,d=function(x){return iu(x,i)};return s>1||this.__actions__.length||!(f instanceof Re)||!Jn(l)?this.thru(d):(f=f.slice(l,+l+(s?1:0)),f.__actions__.push({func:ea,args:[d],thisArg:n}),new hn(f,this.__chain__).thru(function(x){return s&&!x.length&&x.push(n),x}))});function x2(){return Y0(this)}function v2(){return new hn(this.value(),this.__chain__)}function S2(){this.__values__===n&&(this.__values__=ud(this.value()));var i=this.__index__>=this.__values__.length,s=i?n:this.__values__[this.__index__++];return{done:i,value:s}}function R2(){return this}function C2(i){for(var s,l=this;l instanceof Uo;){var f=W0(l);f.__index__=0,f.__values__=n,s?d.__wrapped__=f:s=f;var d=f;l=l.__wrapped__}return d.__wrapped__=i,s}function E2(){var i=this.__wrapped__;if(i instanceof Re){var s=i;return this.__actions__.length&&(s=new Re(this)),s=s.reverse(),s.__actions__.push({func:ea,args:[Nu],thisArg:n}),new hn(s,this.__chain__)}return this.thru(Nu)}function T2(){return f0(this.__wrapped__,this.__actions__)}var A2=jo(function(i,s,l){be.call(i,l)?++i[l]:Yn(i,l,1)});function w2(i,s,l){var f=he(i)?Ep:_S;return l&&bt(i,s,l)&&(s=n),f(i,ie(s,3))}function I2(i,s){var l=he(i)?mr:Xp;return l(i,ie(s,3))}var k2=R0($0),b2=R0(z0);function D2(i,s){return gt(ta(i,s),1)}function N2(i,s){return gt(ta(i,s),le)}function O2(i,s,l){return l=l===n?1:me(l),gt(ta(i,s),l)}function K0(i,s){var l=he(i)?cn:xr;return l(i,ie(s,3))}function Z0(i,s){var l=he(i)?Jx:Hp;return l(i,ie(s,3))}var P2=jo(function(i,s,l){be.call(i,l)?i[l].push(s):Yn(i,l,[s])});function F2(i,s,l,f){i=Ut(i)?i:Mi(i),l=l&&!f?me(l):0;var d=i.length;return l<0&&(l=at(d+l,0)),oa(i)?l<=d&&i.indexOf(s,l)>-1:!!d&&Ei(i,s,l)>-1}var M2=ye(function(i,s,l){var f=-1,d=typeof s=="function",x=Ut(i)?O(i.length):[];return xr(i,function(C){x[++f]=d?Yt(s,C,l):ys(C,s,l)}),x}),L2=jo(function(i,s,l){Yn(i,l,s)});function ta(i,s){var l=he(i)?We:e0;return l(i,ie(s,3))}function B2(i,s,l,f){return i==null?[]:(he(s)||(s=s==null?[]:[s]),l=f?n:l,he(l)||(l=l==null?[]:[l]),i0(i,s,l))}var U2=jo(function(i,s,l){i[l?0:1].push(s)},function(){return[[],[]]});function G2(i,s,l){var f=he(i)?ql:Ip,d=arguments.length<3;return f(i,ie(s,4),l,d,xr)}function V2(i,s,l){var f=he(i)?Qx:Ip,d=arguments.length<3;return f(i,ie(s,4),l,d,Hp)}function W2(i,s){var l=he(i)?mr:Xp;return l(i,ia(ie(s,3)))}function $2(i){var s=he(i)?$p:FS;return s(i)}function z2(i,s,l){(l?bt(i,s,l):s===n)?s=1:s=me(s);var f=he(i)?hS:MS;return f(i,s)}function q2(i){var s=he(i)?pS:BS;return s(i)}function j2(i){if(i==null)return 0;if(Ut(i))return oa(i)?Ai(i):i.length;var s=Ct(i);return s==dt||s==vt?i.size:cu(i).length}function H2(i,s,l){var f=he(i)?jl:US;return l&&bt(i,s,l)&&(s=n),f(i,ie(s,3))}var X2=ye(function(i,s){if(i==null)return[];var l=s.length;return l>1&&bt(i,s[0],s[1])?s=[]:l>2&&bt(s[0],s[1],s[2])&&(s=[s[0]]),i0(i,gt(s,1),[])}),na=Iv||function(){return mt.Date.now()};function Y2(i,s){if(typeof s!="function")throw new fn(u);return i=me(i),function(){if(--i<1)return s.apply(this,arguments)}}function J0(i,s,l){return s=l?n:s,s=i&&s==null?i.length:s,Kn(i,ne,n,n,n,n,s)}function Q0(i,s){var l;if(typeof s!="function")throw new fn(u);return i=me(i),function(){return--i>0&&(l=s.apply(this,arguments)),i<=1&&(s=n),l}}var Pu=ye(function(i,s,l){var f=E;if(l.length){var d=_r(l,Pi(Pu));f|=B}return Kn(i,f,s,l,d)}),ed=ye(function(i,s,l){var f=E|T;if(l.length){var d=_r(l,Pi(ed));f|=B}return Kn(s,f,i,l,d)});function td(i,s,l){s=l?n:s;var f=Kn(i,P,n,n,n,n,n,s);return f.placeholder=td.placeholder,f}function nd(i,s,l){s=l?n:s;var f=Kn(i,q,n,n,n,n,n,s);return f.placeholder=nd.placeholder,f}function rd(i,s,l){var f,d,x,C,A,k,U=0,G=!1,V=!1,X=!0;if(typeof i!="function")throw new fn(u);s=gn(s)||0,ze(l)&&(G=!!l.leading,V="maxWait"in l,x=V?at(gn(l.maxWait)||0,s):x,X="trailing"in l?!!l.trailing:X);function ee(Qe){var wn=f,tr=d;return f=d=n,U=Qe,C=i.apply(tr,wn),C}function oe(Qe){return U=Qe,A=Cs(Se,s),G?ee(Qe):C}function _e(Qe){var wn=Qe-k,tr=Qe-U,Rd=s-wn;return V?Rt(Rd,x-tr):Rd}function ae(Qe){var wn=Qe-k,tr=Qe-U;return k===n||wn>=s||wn<0||V&&tr>=x}function Se(){var Qe=na();if(ae(Qe))return Ce(Qe);A=Cs(Se,_e(Qe))}function Ce(Qe){return A=n,X&&f?ee(Qe):(f=d=n,C)}function Qt(){A!==n&&p0(A),U=0,f=k=d=A=n}function Dt(){return A===n?C:Ce(na())}function en(){var Qe=na(),wn=ae(Qe);if(f=arguments,d=this,k=Qe,wn){if(A===n)return oe(k);if(V)return p0(A),A=Cs(Se,s),ee(k)}return A===n&&(A=Cs(Se,s)),C}return en.cancel=Qt,en.flush=Dt,en}var K2=ye(function(i,s){return jp(i,1,s)}),Z2=ye(function(i,s,l){return jp(i,gn(s)||0,l)});function J2(i){return Kn(i,re)}function ra(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new fn(u);var l=function(){var f=arguments,d=s?s.apply(this,f):f[0],x=l.cache;if(x.has(d))return x.get(d);var C=i.apply(this,f);return l.cache=x.set(d,C)||x,C};return l.cache=new(ra.Cache||Xn),l}ra.Cache=Xn;function ia(i){if(typeof i!="function")throw new fn(u);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function Q2(i){return Q0(2,i)}var eC=GS(function(i,s){s=s.length==1&&he(s[0])?We(s[0],Kt(ie())):We(gt(s,1),Kt(ie()));var l=s.length;return ye(function(f){for(var d=-1,x=Rt(f.length,l);++d<x;)f[d]=s[d].call(this,f[d]);return Yt(i,this,f)})}),Fu=ye(function(i,s){var l=_r(s,Pi(Fu));return Kn(i,B,n,s,l)}),id=ye(function(i,s){var l=_r(s,Pi(id));return Kn(i,Y,n,s,l)}),tC=Zn(function(i,s){return Kn(i,ue,n,n,n,s)});function nC(i,s){if(typeof i!="function")throw new fn(u);return s=s===n?s:me(s),ye(i,s)}function rC(i,s){if(typeof i!="function")throw new fn(u);return s=s==null?0:at(me(s),0),ye(function(l){var f=l[s],d=Rr(l,0,s);return f&&gr(d,f),Yt(i,this,d)})}function iC(i,s,l){var f=!0,d=!0;if(typeof i!="function")throw new fn(u);return ze(l)&&(f="leading"in l?!!l.leading:f,d="trailing"in l?!!l.trailing:d),rd(i,s,{leading:f,maxWait:s,trailing:d})}function sC(i){return J0(i,1)}function oC(i,s){return Fu(xu(s),i)}function aC(){if(!arguments.length)return[];var i=arguments[0];return he(i)?i:[i]}function lC(i){return pn(i,L)}function uC(i,s){return s=typeof s=="function"?s:n,pn(i,L,s)}function cC(i){return pn(i,R|L)}function fC(i,s){return s=typeof s=="function"?s:n,pn(i,R|L,s)}function hC(i,s){return s==null||qp(i,s,ut(s))}function An(i,s){return i===s||i!==i&&s!==s}var pC=Ko(au),dC=Ko(function(i,s){return i>=s}),Zr=Zp(function(){return arguments}())?Zp:function(i){return He(i)&&be.call(i,"callee")&&!Lp.call(i,"callee")},he=O.isArray,mC=yp?Kt(yp):CS;function Ut(i){return i!=null&&sa(i.length)&&!Qn(i)}function Je(i){return He(i)&&Ut(i)}function gC(i){return i===!0||i===!1||He(i)&&kt(i)==Te}var Cr=bv||ju,_C=xp?Kt(xp):ES;function yC(i){return He(i)&&i.nodeType===1&&!Es(i)}function xC(i){if(i==null)return!0;if(Ut(i)&&(he(i)||typeof i=="string"||typeof i.splice=="function"||Cr(i)||Fi(i)||Zr(i)))return!i.length;var s=Ct(i);if(s==dt||s==vt)return!i.size;if(Rs(i))return!cu(i).length;for(var l in i)if(be.call(i,l))return!1;return!0}function vC(i,s){return xs(i,s)}function SC(i,s,l){l=typeof l=="function"?l:n;var f=l?l(i,s):n;return f===n?xs(i,s,n,l):!!f}function Mu(i){if(!He(i))return!1;var s=kt(i);return s==ln||s==an||typeof i.message=="string"&&typeof i.name=="string"&&!Es(i)}function RC(i){return typeof i=="number"&&Up(i)}function Qn(i){if(!ze(i))return!1;var s=kt(i);return s==Mt||s==jn||s==Fe||s==Nl}function sd(i){return typeof i=="number"&&i==me(i)}function sa(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=st}function ze(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function He(i){return i!=null&&typeof i=="object"}var od=vp?Kt(vp):AS;function CC(i,s){return i===s||uu(i,s,Au(s))}function EC(i,s,l){return l=typeof l=="function"?l:n,uu(i,s,Au(s),l)}function TC(i){return ad(i)&&i!=+i}function AC(i){if(uR(i))throw new fe(a);return Jp(i)}function wC(i){return i===null}function IC(i){return i==null}function ad(i){return typeof i=="number"||He(i)&&kt(i)==Wr}function Es(i){if(!He(i)||kt(i)!=Xt)return!1;var s=No(i);if(s===null)return!0;var l=be.call(s,"constructor")&&s.constructor;return typeof l=="function"&&l instanceof l&&Io.call(l)==Ev}var Lu=Sp?Kt(Sp):wS;function kC(i){return sd(i)&&i>=-st&&i<=st}var ld=Rp?Kt(Rp):IS;function oa(i){return typeof i=="string"||!he(i)&&He(i)&&kt(i)==St}function Jt(i){return typeof i=="symbol"||He(i)&&kt(i)==dr}var Fi=Cp?Kt(Cp):kS;function bC(i){return i===n}function DC(i){return He(i)&&Ct(i)==Lt}function NC(i){return He(i)&&kt(i)==Pl}var OC=Ko(fu),PC=Ko(function(i,s){return i<=s});function ud(i){if(!i)return[];if(Ut(i))return oa(i)?En(i):Bt(i);if(fs&&i[fs])return hv(i[fs]());var s=Ct(i),l=s==dt?Jl:s==vt?To:Mi;return l(i)}function er(i){if(!i)return i===0?i:0;if(i=gn(i),i===le||i===-le){var s=i<0?-1:1;return s*Cn}return i===i?i:0}function me(i){var s=er(i),l=s%1;return s===s?l?s-l:s:0}function cd(i){return i?Hr(me(i),0,xe):0}function gn(i){if(typeof i=="number")return i;if(Jt(i))return Ht;if(ze(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=ze(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=kp(i);var l=mx.test(i);return l||_x.test(i)?Yx(i.slice(2),l?2:8):dx.test(i)?Ht:+i}function fd(i){return On(i,Gt(i))}function FC(i){return i?Hr(me(i),-st,st):i===0?i:0}function Ie(i){return i==null?"":Zt(i)}var MC=Ni(function(i,s){if(Rs(s)||Ut(s)){On(s,ut(s),i);return}for(var l in s)be.call(s,l)&&gs(i,l,s[l])}),hd=Ni(function(i,s){On(s,Gt(s),i)}),aa=Ni(function(i,s,l,f){On(s,Gt(s),i,f)}),LC=Ni(function(i,s,l,f){On(s,ut(s),i,f)}),BC=Zn(iu);function UC(i,s){var l=Di(i);return s==null?l:zp(l,s)}var GC=ye(function(i,s){i=Pe(i);var l=-1,f=s.length,d=f>2?s[2]:n;for(d&&bt(s[0],s[1],d)&&(f=1);++l<f;)for(var x=s[l],C=Gt(x),A=-1,k=C.length;++A<k;){var U=C[A],G=i[U];(G===n||An(G,Ii[U])&&!be.call(i,U))&&(i[U]=x[U])}return i}),VC=ye(function(i){return i.push(n,k0),Yt(pd,n,i)});function WC(i,s){return Tp(i,ie(s,3),Nn)}function $C(i,s){return Tp(i,ie(s,3),ou)}function zC(i,s){return i==null?i:su(i,ie(s,3),Gt)}function qC(i,s){return i==null?i:Yp(i,ie(s,3),Gt)}function jC(i,s){return i&&Nn(i,ie(s,3))}function HC(i,s){return i&&ou(i,ie(s,3))}function XC(i){return i==null?[]:Wo(i,ut(i))}function YC(i){return i==null?[]:Wo(i,Gt(i))}function Bu(i,s,l){var f=i==null?n:Xr(i,s);return f===n?l:f}function KC(i,s){return i!=null&&N0(i,s,xS)}function Uu(i,s){return i!=null&&N0(i,s,vS)}var ZC=E0(function(i,s,l){s!=null&&typeof s.toString!="function"&&(s=ko.call(s)),i[s]=l},Vu(Vt)),JC=E0(function(i,s,l){s!=null&&typeof s.toString!="function"&&(s=ko.call(s)),be.call(i,s)?i[s].push(l):i[s]=[l]},ie),QC=ye(ys);function ut(i){return Ut(i)?Wp(i):cu(i)}function Gt(i){return Ut(i)?Wp(i,!0):bS(i)}function eE(i,s){var l={};return s=ie(s,3),Nn(i,function(f,d,x){Yn(l,s(f,d,x),f)}),l}function tE(i,s){var l={};return s=ie(s,3),Nn(i,function(f,d,x){Yn(l,d,s(f,d,x))}),l}var nE=Ni(function(i,s,l){$o(i,s,l)}),pd=Ni(function(i,s,l,f){$o(i,s,l,f)}),rE=Zn(function(i,s){var l={};if(i==null)return l;var f=!1;s=We(s,function(x){return x=Sr(x,i),f||(f=x.length>1),x}),On(i,Eu(i),l),f&&(l=pn(l,R|b|L,ZS));for(var d=s.length;d--;)gu(l,s[d]);return l});function iE(i,s){return dd(i,ia(ie(s)))}var sE=Zn(function(i,s){return i==null?{}:NS(i,s)});function dd(i,s){if(i==null)return{};var l=We(Eu(i),function(f){return[f]});return s=ie(s),s0(i,l,function(f,d){return s(f,d[0])})}function oE(i,s,l){s=Sr(s,i);var f=-1,d=s.length;for(d||(d=1,i=n);++f<d;){var x=i==null?n:i[Pn(s[f])];x===n&&(f=d,x=l),i=Qn(x)?x.call(i):x}return i}function aE(i,s,l){return i==null?i:vs(i,s,l)}function lE(i,s,l,f){return f=typeof f=="function"?f:n,i==null?i:vs(i,s,l,f)}var md=w0(ut),gd=w0(Gt);function uE(i,s,l){var f=he(i),d=f||Cr(i)||Fi(i);if(s=ie(s,4),l==null){var x=i&&i.constructor;d?l=f?new x:[]:ze(i)?l=Qn(x)?Di(No(i)):{}:l={}}return(d?cn:Nn)(i,function(C,A,k){return s(l,C,A,k)}),l}function cE(i,s){return i==null?!0:gu(i,s)}function fE(i,s,l){return i==null?i:c0(i,s,xu(l))}function hE(i,s,l,f){return f=typeof f=="function"?f:n,i==null?i:c0(i,s,xu(l),f)}function Mi(i){return i==null?[]:Zl(i,ut(i))}function pE(i){return i==null?[]:Zl(i,Gt(i))}function dE(i,s,l){return l===n&&(l=s,s=n),l!==n&&(l=gn(l),l=l===l?l:0),s!==n&&(s=gn(s),s=s===s?s:0),Hr(gn(i),s,l)}function mE(i,s,l){return s=er(s),l===n?(l=s,s=0):l=er(l),i=gn(i),SS(i,s,l)}function gE(i,s,l){if(l&&typeof l!="boolean"&&bt(i,s,l)&&(s=l=n),l===n&&(typeof s=="boolean"?(l=s,s=n):typeof i=="boolean"&&(l=i,i=n)),i===n&&s===n?(i=0,s=1):(i=er(i),s===n?(s=i,i=0):s=er(s)),i>s){var f=i;i=s,s=f}if(l||i%1||s%1){var d=Gp();return Rt(i+d*(s-i+Xx("1e-"+((d+"").length-1))),s)}return pu(i,s)}var _E=Oi(function(i,s,l){return s=s.toLowerCase(),i+(l?_d(s):s)});function _d(i){return Gu(Ie(i).toLowerCase())}function yd(i){return i=Ie(i),i&&i.replace(xx,av).replace(Bx,"")}function yE(i,s,l){i=Ie(i),s=Zt(s);var f=i.length;l=l===n?f:Hr(me(l),0,f);var d=l;return l-=s.length,l>=0&&i.slice(l,d)==s}function xE(i){return i=Ie(i),i&&Qy.test(i)?i.replace(Yh,lv):i}function vE(i){return i=Ie(i),i&&sx.test(i)?i.replace(Fl,"\\$&"):i}var SE=Oi(function(i,s,l){return i+(l?"-":"")+s.toLowerCase()}),RE=Oi(function(i,s,l){return i+(l?" ":"")+s.toLowerCase()}),CE=S0("toLowerCase");function EE(i,s,l){i=Ie(i),s=me(s);var f=s?Ai(i):0;if(!s||f>=s)return i;var d=(s-f)/2;return Yo(Mo(d),l)+i+Yo(Fo(d),l)}function TE(i,s,l){i=Ie(i),s=me(s);var f=s?Ai(i):0;return s&&f<s?i+Yo(s-f,l):i}function AE(i,s,l){i=Ie(i),s=me(s);var f=s?Ai(i):0;return s&&f<s?Yo(s-f,l)+i:i}function wE(i,s,l){return l||s==null?s=0:s&&(s=+s),Pv(Ie(i).replace(Ml,""),s||0)}function IE(i,s,l){return(l?bt(i,s,l):s===n)?s=1:s=me(s),du(Ie(i),s)}function kE(){var i=arguments,s=Ie(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var bE=Oi(function(i,s,l){return i+(l?"_":"")+s.toLowerCase()});function DE(i,s,l){return l&&typeof l!="number"&&bt(i,s,l)&&(s=l=n),l=l===n?xe:l>>>0,l?(i=Ie(i),i&&(typeof s=="string"||s!=null&&!Lu(s))&&(s=Zt(s),!s&&Ti(i))?Rr(En(i),0,l):i.split(s,l)):[]}var NE=Oi(function(i,s,l){return i+(l?" ":"")+Gu(s)});function OE(i,s,l){return i=Ie(i),l=l==null?0:Hr(me(l),0,i.length),s=Zt(s),i.slice(l,l+s.length)==s}function PE(i,s,l){var f=y.templateSettings;l&&bt(i,s,l)&&(s=n),i=Ie(i),s=aa({},s,f,I0);var d=aa({},s.imports,f.imports,I0),x=ut(d),C=Zl(d,x),A,k,U=0,G=s.interpolate||vo,V="__p += '",X=Ql((s.escape||vo).source+"|"+G.source+"|"+(G===Kh?px:vo).source+"|"+(s.evaluate||vo).source+"|$","g"),ee="//# sourceURL="+(be.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$x+"]")+`
`;i.replace(X,function(ae,Se,Ce,Qt,Dt,en){return Ce||(Ce=Qt),V+=i.slice(U,en).replace(vx,uv),Se&&(A=!0,V+=`' +
__e(`+Se+`) +
'`),Dt&&(k=!0,V+=`';
`+Dt+`;
__p += '`),Ce&&(V+=`' +
((__t = (`+Ce+`)) == null ? '' : __t) +
'`),U=en+ae.length,ae}),V+=`';
`;var oe=be.call(s,"variable")&&s.variable;if(!oe)V=`with (obj) {
`+V+`
}
`;else if(fx.test(oe))throw new fe(c);V=(k?V.replace(ke,""):V).replace(Ky,"$1").replace(Zy,"$1;"),V="function("+(oe||"obj")+`) {
`+(oe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+(k?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+V+`return __p
}`;var _e=vd(function(){return we(x,ee+"return "+V).apply(n,C)});if(_e.source=V,Mu(_e))throw _e;return _e}function FE(i){return Ie(i).toLowerCase()}function ME(i){return Ie(i).toUpperCase()}function LE(i,s,l){if(i=Ie(i),i&&(l||s===n))return kp(i);if(!i||!(s=Zt(s)))return i;var f=En(i),d=En(s),x=bp(f,d),C=Dp(f,d)+1;return Rr(f,x,C).join("")}function BE(i,s,l){if(i=Ie(i),i&&(l||s===n))return i.slice(0,Op(i)+1);if(!i||!(s=Zt(s)))return i;var f=En(i),d=Dp(f,En(s))+1;return Rr(f,0,d).join("")}function UE(i,s,l){if(i=Ie(i),i&&(l||s===n))return i.replace(Ml,"");if(!i||!(s=Zt(s)))return i;var f=En(i),d=bp(f,En(s));return Rr(f,d).join("")}function GE(i,s){var l=tt,f=it;if(ze(s)){var d="separator"in s?s.separator:d;l="length"in s?me(s.length):l,f="omission"in s?Zt(s.omission):f}i=Ie(i);var x=i.length;if(Ti(i)){var C=En(i);x=C.length}if(l>=x)return i;var A=l-Ai(f);if(A<1)return f;var k=C?Rr(C,0,A).join(""):i.slice(0,A);if(d===n)return k+f;if(C&&(A+=k.length-A),Lu(d)){if(i.slice(A).search(d)){var U,G=k;for(d.global||(d=Ql(d.source,Ie(Zh.exec(d))+"g")),d.lastIndex=0;U=d.exec(G);)var V=U.index;k=k.slice(0,V===n?A:V)}}else if(i.indexOf(Zt(d),A)!=A){var X=k.lastIndexOf(d);X>-1&&(k=k.slice(0,X))}return k+f}function VE(i){return i=Ie(i),i&&Jy.test(i)?i.replace(Xh,gv):i}var WE=Oi(function(i,s,l){return i+(l?" ":"")+s.toUpperCase()}),Gu=S0("toUpperCase");function xd(i,s,l){return i=Ie(i),s=l?n:s,s===n?fv(i)?xv(i):nv(i):i.match(s)||[]}var vd=ye(function(i,s){try{return Yt(i,n,s)}catch(l){return Mu(l)?l:new fe(l)}}),$E=Zn(function(i,s){return cn(s,function(l){l=Pn(l),Yn(i,l,Pu(i[l],i))}),i});function zE(i){var s=i==null?0:i.length,l=ie();return i=s?We(i,function(f){if(typeof f[1]!="function")throw new fn(u);return[l(f[0]),f[1]]}):[],ye(function(f){for(var d=-1;++d<s;){var x=i[d];if(Yt(x[0],this,f))return Yt(x[1],this,f)}})}function qE(i){return gS(pn(i,R))}function Vu(i){return function(){return i}}function jE(i,s){return i==null||i!==i?s:i}var HE=C0(),XE=C0(!0);function Vt(i){return i}function Wu(i){return Qp(typeof i=="function"?i:pn(i,R))}function YE(i){return t0(pn(i,R))}function KE(i,s){return n0(i,pn(s,R))}var ZE=ye(function(i,s){return function(l){return ys(l,i,s)}}),JE=ye(function(i,s){return function(l){return ys(i,l,s)}});function $u(i,s,l){var f=ut(s),d=Wo(s,f);l==null&&!(ze(s)&&(d.length||!f.length))&&(l=s,s=i,i=this,d=Wo(s,ut(s)));var x=!(ze(l)&&"chain"in l)||!!l.chain,C=Qn(i);return cn(d,function(A){var k=s[A];i[A]=k,C&&(i.prototype[A]=function(){var U=this.__chain__;if(x||U){var G=i(this.__wrapped__),V=G.__actions__=Bt(this.__actions__);return V.push({func:k,args:arguments,thisArg:i}),G.__chain__=U,G}return k.apply(i,gr([this.value()],arguments))})}),i}function QE(){return mt._===this&&(mt._=Tv),this}function zu(){}function eT(i){return i=me(i),ye(function(s){return r0(s,i)})}var tT=Su(We),nT=Su(Ep),rT=Su(jl);function Sd(i){return Iu(i)?Hl(Pn(i)):OS(i)}function iT(i){return function(s){return i==null?n:Xr(i,s)}}var sT=T0(),oT=T0(!0);function qu(){return[]}function ju(){return!1}function aT(){return{}}function lT(){return""}function uT(){return!0}function cT(i,s){if(i=me(i),i<1||i>st)return[];var l=xe,f=Rt(i,xe);s=ie(s),i-=xe;for(var d=Kl(f,s);++l<i;)s(l);return d}function fT(i){return he(i)?We(i,Pn):Jt(i)?[i]:Bt(V0(Ie(i)))}function hT(i){var s=++Cv;return Ie(i)+s}var pT=Xo(function(i,s){return i+s},0),dT=Ru("ceil"),mT=Xo(function(i,s){return i/s},1),gT=Ru("floor");function _T(i){return i&&i.length?Vo(i,Vt,au):n}function yT(i,s){return i&&i.length?Vo(i,ie(s,2),au):n}function xT(i){return wp(i,Vt)}function vT(i,s){return wp(i,ie(s,2))}function ST(i){return i&&i.length?Vo(i,Vt,fu):n}function RT(i,s){return i&&i.length?Vo(i,ie(s,2),fu):n}var CT=Xo(function(i,s){return i*s},1),ET=Ru("round"),TT=Xo(function(i,s){return i-s},0);function AT(i){return i&&i.length?Yl(i,Vt):0}function wT(i,s){return i&&i.length?Yl(i,ie(s,2)):0}return y.after=Y2,y.ary=J0,y.assign=MC,y.assignIn=hd,y.assignInWith=aa,y.assignWith=LC,y.at=BC,y.before=Q0,y.bind=Pu,y.bindAll=$E,y.bindKey=ed,y.castArray=aC,y.chain=Y0,y.chunk=gR,y.compact=_R,y.concat=yR,y.cond=zE,y.conforms=qE,y.constant=Vu,y.countBy=A2,y.create=UC,y.curry=td,y.curryRight=nd,y.debounce=rd,y.defaults=GC,y.defaultsDeep=VC,y.defer=K2,y.delay=Z2,y.difference=xR,y.differenceBy=vR,y.differenceWith=SR,y.drop=RR,y.dropRight=CR,y.dropRightWhile=ER,y.dropWhile=TR,y.fill=AR,y.filter=I2,y.flatMap=D2,y.flatMapDeep=N2,y.flatMapDepth=O2,y.flatten=q0,y.flattenDeep=wR,y.flattenDepth=IR,y.flip=J2,y.flow=HE,y.flowRight=XE,y.fromPairs=kR,y.functions=XC,y.functionsIn=YC,y.groupBy=P2,y.initial=DR,y.intersection=NR,y.intersectionBy=OR,y.intersectionWith=PR,y.invert=ZC,y.invertBy=JC,y.invokeMap=M2,y.iteratee=Wu,y.keyBy=L2,y.keys=ut,y.keysIn=Gt,y.map=ta,y.mapKeys=eE,y.mapValues=tE,y.matches=YE,y.matchesProperty=KE,y.memoize=ra,y.merge=nE,y.mergeWith=pd,y.method=ZE,y.methodOf=JE,y.mixin=$u,y.negate=ia,y.nthArg=eT,y.omit=rE,y.omitBy=iE,y.once=Q2,y.orderBy=B2,y.over=tT,y.overArgs=eC,y.overEvery=nT,y.overSome=rT,y.partial=Fu,y.partialRight=id,y.partition=U2,y.pick=sE,y.pickBy=dd,y.property=Sd,y.propertyOf=iT,y.pull=BR,y.pullAll=H0,y.pullAllBy=UR,y.pullAllWith=GR,y.pullAt=VR,y.range=sT,y.rangeRight=oT,y.rearg=tC,y.reject=W2,y.remove=WR,y.rest=nC,y.reverse=Nu,y.sampleSize=z2,y.set=aE,y.setWith=lE,y.shuffle=q2,y.slice=$R,y.sortBy=X2,y.sortedUniq=KR,y.sortedUniqBy=ZR,y.split=DE,y.spread=rC,y.tail=JR,y.take=QR,y.takeRight=e2,y.takeRightWhile=t2,y.takeWhile=n2,y.tap=_2,y.throttle=iC,y.thru=ea,y.toArray=ud,y.toPairs=md,y.toPairsIn=gd,y.toPath=fT,y.toPlainObject=fd,y.transform=uE,y.unary=sC,y.union=r2,y.unionBy=i2,y.unionWith=s2,y.uniq=o2,y.uniqBy=a2,y.uniqWith=l2,y.unset=cE,y.unzip=Ou,y.unzipWith=X0,y.update=fE,y.updateWith=hE,y.values=Mi,y.valuesIn=pE,y.without=u2,y.words=xd,y.wrap=oC,y.xor=c2,y.xorBy=f2,y.xorWith=h2,y.zip=p2,y.zipObject=d2,y.zipObjectDeep=m2,y.zipWith=g2,y.entries=md,y.entriesIn=gd,y.extend=hd,y.extendWith=aa,$u(y,y),y.add=pT,y.attempt=vd,y.camelCase=_E,y.capitalize=_d,y.ceil=dT,y.clamp=dE,y.clone=lC,y.cloneDeep=cC,y.cloneDeepWith=fC,y.cloneWith=uC,y.conformsTo=hC,y.deburr=yd,y.defaultTo=jE,y.divide=mT,y.endsWith=yE,y.eq=An,y.escape=xE,y.escapeRegExp=vE,y.every=w2,y.find=k2,y.findIndex=$0,y.findKey=WC,y.findLast=b2,y.findLastIndex=z0,y.findLastKey=$C,y.floor=gT,y.forEach=K0,y.forEachRight=Z0,y.forIn=zC,y.forInRight=qC,y.forOwn=jC,y.forOwnRight=HC,y.get=Bu,y.gt=pC,y.gte=dC,y.has=KC,y.hasIn=Uu,y.head=j0,y.identity=Vt,y.includes=F2,y.indexOf=bR,y.inRange=mE,y.invoke=QC,y.isArguments=Zr,y.isArray=he,y.isArrayBuffer=mC,y.isArrayLike=Ut,y.isArrayLikeObject=Je,y.isBoolean=gC,y.isBuffer=Cr,y.isDate=_C,y.isElement=yC,y.isEmpty=xC,y.isEqual=vC,y.isEqualWith=SC,y.isError=Mu,y.isFinite=RC,y.isFunction=Qn,y.isInteger=sd,y.isLength=sa,y.isMap=od,y.isMatch=CC,y.isMatchWith=EC,y.isNaN=TC,y.isNative=AC,y.isNil=IC,y.isNull=wC,y.isNumber=ad,y.isObject=ze,y.isObjectLike=He,y.isPlainObject=Es,y.isRegExp=Lu,y.isSafeInteger=kC,y.isSet=ld,y.isString=oa,y.isSymbol=Jt,y.isTypedArray=Fi,y.isUndefined=bC,y.isWeakMap=DC,y.isWeakSet=NC,y.join=FR,y.kebabCase=SE,y.last=mn,y.lastIndexOf=MR,y.lowerCase=RE,y.lowerFirst=CE,y.lt=OC,y.lte=PC,y.max=_T,y.maxBy=yT,y.mean=xT,y.meanBy=vT,y.min=ST,y.minBy=RT,y.stubArray=qu,y.stubFalse=ju,y.stubObject=aT,y.stubString=lT,y.stubTrue=uT,y.multiply=CT,y.nth=LR,y.noConflict=QE,y.noop=zu,y.now=na,y.pad=EE,y.padEnd=TE,y.padStart=AE,y.parseInt=wE,y.random=gE,y.reduce=G2,y.reduceRight=V2,y.repeat=IE,y.replace=kE,y.result=oE,y.round=ET,y.runInContext=I,y.sample=$2,y.size=j2,y.snakeCase=bE,y.some=H2,y.sortedIndex=zR,y.sortedIndexBy=qR,y.sortedIndexOf=jR,y.sortedLastIndex=HR,y.sortedLastIndexBy=XR,y.sortedLastIndexOf=YR,y.startCase=NE,y.startsWith=OE,y.subtract=TT,y.sum=AT,y.sumBy=wT,y.template=PE,y.times=cT,y.toFinite=er,y.toInteger=me,y.toLength=cd,y.toLower=FE,y.toNumber=gn,y.toSafeInteger=FC,y.toString=Ie,y.toUpper=ME,y.trim=LE,y.trimEnd=BE,y.trimStart=UE,y.truncate=GE,y.unescape=VE,y.uniqueId=hT,y.upperCase=WE,y.upperFirst=Gu,y.each=K0,y.eachRight=Z0,y.first=j0,$u(y,function(){var i={};return Nn(y,function(s,l){be.call(y.prototype,l)||(i[l]=s)}),i}(),{chain:!1}),y.VERSION=r,cn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){y[i].placeholder=y}),cn(["drop","take"],function(i,s){Re.prototype[i]=function(l){l=l===n?1:at(me(l),0);var f=this.__filtered__&&!s?new Re(this):this.clone();return f.__filtered__?f.__takeCount__=Rt(l,f.__takeCount__):f.__views__.push({size:Rt(l,xe),type:i+(f.__dir__<0?"Right":"")}),f},Re.prototype[i+"Right"]=function(l){return this.reverse()[i](l).reverse()}}),cn(["filter","map","takeWhile"],function(i,s){var l=s+1,f=l==se||l==nt;Re.prototype[i]=function(d){var x=this.clone();return x.__iteratees__.push({iteratee:ie(d,3),type:l}),x.__filtered__=x.__filtered__||f,x}}),cn(["head","last"],function(i,s){var l="take"+(s?"Right":"");Re.prototype[i]=function(){return this[l](1).value()[0]}}),cn(["initial","tail"],function(i,s){var l="drop"+(s?"":"Right");Re.prototype[i]=function(){return this.__filtered__?new Re(this):this[l](1)}}),Re.prototype.compact=function(){return this.filter(Vt)},Re.prototype.find=function(i){return this.filter(i).head()},Re.prototype.findLast=function(i){return this.reverse().find(i)},Re.prototype.invokeMap=ye(function(i,s){return typeof i=="function"?new Re(this):this.map(function(l){return ys(l,i,s)})}),Re.prototype.reject=function(i){return this.filter(ia(ie(i)))},Re.prototype.slice=function(i,s){i=me(i);var l=this;return l.__filtered__&&(i>0||s<0)?new Re(l):(i<0?l=l.takeRight(-i):i&&(l=l.drop(i)),s!==n&&(s=me(s),l=s<0?l.dropRight(-s):l.take(s-i)),l)},Re.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},Re.prototype.toArray=function(){return this.take(xe)},Nn(Re.prototype,function(i,s){var l=/^(?:filter|find|map|reject)|While$/.test(s),f=/^(?:head|last)$/.test(s),d=y[f?"take"+(s=="last"?"Right":""):s],x=f||/^find/.test(s);d&&(y.prototype[s]=function(){var C=this.__wrapped__,A=f?[1]:arguments,k=C instanceof Re,U=A[0],G=k||he(C),V=function(Se){var Ce=d.apply(y,gr([Se],A));return f&&X?Ce[0]:Ce};G&&l&&typeof U=="function"&&U.length!=1&&(k=G=!1);var X=this.__chain__,ee=!!this.__actions__.length,oe=x&&!X,_e=k&&!ee;if(!x&&G){C=_e?C:new Re(this);var ae=i.apply(C,A);return ae.__actions__.push({func:ea,args:[V],thisArg:n}),new hn(ae,X)}return oe&&_e?i.apply(this,A):(ae=this.thru(V),oe?f?ae.value()[0]:ae.value():ae)})}),cn(["pop","push","shift","sort","splice","unshift"],function(i){var s=Ao[i],l=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",f=/^(?:pop|shift)$/.test(i);y.prototype[i]=function(){var d=arguments;if(f&&!this.__chain__){var x=this.value();return s.apply(he(x)?x:[],d)}return this[l](function(C){return s.apply(he(C)?C:[],d)})}}),Nn(Re.prototype,function(i,s){var l=y[s];if(l){var f=l.name+"";be.call(bi,f)||(bi[f]=[]),bi[f].push({name:s,func:l})}}),bi[Ho(n,T).name]=[{name:"wrapper",func:n}],Re.prototype.clone=Vv,Re.prototype.reverse=Wv,Re.prototype.value=$v,y.prototype.at=y2,y.prototype.chain=x2,y.prototype.commit=v2,y.prototype.next=S2,y.prototype.plant=C2,y.prototype.reverse=E2,y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=T2,y.prototype.first=y.prototype.head,fs&&(y.prototype[fs]=R2),y},wi=vv();$r?(($r.exports=wi)._=wi,Wl._=wi):mt._=wi}).call(je)})(pl,pl.exports);var AI=pl.exports;const Gr=_i(AI);class wI extends Y_{constructor(n,r,o=()=>{}){super(n,r);Oe(this,"_processGamepadIfPossible",()=>{const n=Gr.first(navigator.getGamepads());if(!n||n.mapping!=="standard"||(window.usesGamepad===void 0&&(window.usesGamepad=window.confirm(`Use ${n.id}?`),window.usesGamepad&&ve.emit("gamepad")),!window.usesGamepad))return;const r=o=>n.buttons[o].pressed;this._setButton("BUTTON_A",r(1)),this._setButton("BUTTON_B",r(0)),this._setButton("BUTTON_SELECT",r(8)),this._setButton("BUTTON_START",r(9)),this._setButton("BUTTON_UP",r(12)),this._setButton("BUTTON_DOWN",r(13)),this._setButton("BUTTON_LEFT",r(14)),this._setButton("BUTTON_RIGHT",r(15)),this._setButton("SWAP",r(5))});Oe(this,"_onKeyDown",n=>{var o;if(window.usesGamepad)return;const r=this.keyMap[(o=n.key)==null?void 0:o.toLowerCase()];r&&this._setButton(r,!0)});Oe(this,"_onKeyUp",n=>{var o;if(window.usesGamepad)return;const r=this.keyMap[(o=n.key)==null?void 0:o.toLowerCase()];r&&this._setButton(r,!1)});this.isMaster=!0,this.needsSwap=!1,this.immediateButtons=Gr.clone(this.buttons),this.onStart=o,this.keyMap=Xe.options.input}swapWith(n){const r=n.player;return n.player=this.player,this.player=r,this.needsSwap=!1,this.resync(),n.resync(),r}resync(){this.syncAll(super.toByte())}toByte(){return super.toByte(this.immediateButtons)}attach(){this.$gamepadInterval=setInterval(this._processGamepadIfPossible,10),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),ve.on("keymap-updated",()=>this.keyMap=Xe.options.input)}detach(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),ve.removeListener("keymap-updated"),clearInterval(this.$gamepadInterval)}_setButton(n,r){if(n==="BUTTON_START"&&r&&this.onStart(),n==="SWAP"){this.player===1&&r&&(this.needsSwap=!0);return}this._sync(n,r)}_sync(n,r){this.immediateButtons[n]=r,this.isMaster&&this.sync(n,r)}}const Ve={buffering:"Buffering",connected:"Connected!",connecting:"Connecting...",controls:"-Controls-",copied:"Copied!",crtEffect:"CRT Effect",dragARomHere:"Drag a NES ROM file here!",enabled_false:"Disabled",enabled_true:"Enabled",errors:{connectionFailed:"CONNECTION FAILED :(",invalidRom:"INVALID ROM :("},input:"Input",link:"link",loading:"Loading...",pressStart:"PRESS START",setDefaults:"Set defaults",settings:"Settings",shareThis:"Share this",sound:"Sound",swap:"Swap",swapButton:"RB",toPlayWithSomeone:"to play with someone!",waiting:"WAITING...",yourController:"Your controller"};class II extends Ee.Component{constructor(t){super(t);const n=()=>this.nes;this.localController=new wI(1,n,t.onStartPressed),this.remoteController=new Y_(2,n)}render(){return W.jsx(nI,{ref:t=>{t&&this._initialize(t)}})}componentDidMount(){this.localController.attach()}UNSAFE_componentWillUpdate(t){this.stop()}start(){this.speaker=new fI(Xe.sound.gain),this.speaker.start(),this.frameTimer.start()}stop(){this.frameTimer.stop(),this.speaker!=null&&(this.speaker.stop(),this.speaker=null)}frame(){try{this.nes.frame(),this.screen.writeBuffer()}catch(t){console.error(t),this.props.onError(Ve.errors.invalidRom,!1)}}componentWillUnmount(){this.stop(),this.localController.detach()}_initialize(t){const{rom:n,onError:r}=this.props;if(!n)return;const o=D_.Buffer.from(n).toString("binary");this.screen=t,this.nes=new X_.NES({onFrame:this.screen.setBuffer,onAudioSample:a=>this.speaker.writeSample(a),sampleRate:44100}),this.frameTimer=new iI(()=>{const{syncer:a}=this.props;a?a.sync():this.frame()});try{this.nes.loadROM(o)}catch{r(Ve.errors.invalidRom,!1)}window.emulator=this,window.jsnes=If}}const kI="_balloon_uqxkm_1",bI="_character_uqxkm_9",Bm={balloon:kI,character:bI},DI="/nestation/assets/halu-Mq__qYAa.svg";var K_={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a="",u=0;u<arguments.length;u++){var c=arguments[u];c&&(a=o(a,r(c)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var u="";for(var c in a)t.call(a,c)&&a[c]&&(u=o(u,c));return u}function o(a,u){return u?a?a+" "+u:a+u:a}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(K_);var NI=K_.exports;const Nt=_i(NI);class OI extends Ee.Component{render(){const{children:t}=this.props;return W.jsxs("section",{className:"message -left",children:[W.jsx("div",{className:Nt(Bm.balloon,"nes-balloon","from-left","is-small"),children:W.jsx("p",{children:t})}),W.jsx("br",{}),W.jsx("img",{className:Bm.character,src:DI,alt:"character"})]})}}const PI="_header_9rm8f_1",FI="_small_9rm8f_9",MI="_message_9rm8f_15",LI="_title_9rm8f_19",BI="_titleLogo_9rm8f_28",UI="_titleText_9rm8f_33",GI="_link_9rm8f_39",VI="_hyperlink_9rm8f_43",rr={header:PI,small:FI,message:MI,title:LI,titleLogo:BI,titleText:UI,link:GI,hyperlink:VI};class Vh extends Ee.Component{constructor(){super(...arguments);Oe(this,"state",{bytes:null})}render(){const{children:n}=this.props;return W.jsxs("div",{className:rr.header,children:[W.jsx("div",{className:rr.small,children:!Gr.isEmpty(n)&&W.jsx(OI,{className:Nt(rr.message,rr.small),children:n})}),W.jsx("h2",{className:rr.title,children:W.jsx("div",{className:rr.link,children:W.jsxs("a",{href:"https://github.com/afska/nestation#nestation",target:"_blank",rel:"noopener noreferrer",tabIndex:"-1",className:rr.hyperlink,children:[W.jsx("i",{className:Nt(rr.titleLogo,"nes-logo")}),W.jsx("span",{className:rr.titleText,children:"NEStation"})]})})})]})}}const WI=1024;class $I{constructor(t,n){this.rom=t,this.channel=n,this._sent=0,this._total=t.byteLength}run(){if(this._sent===this._total)return this.channel.send("end"),!0;const t=this._total-this._sent,n=Math.min(WI,t),r=this.rom.slice(this._sent,this._sent+n);this._sent+=n,this.channel.send(r)}get transferred(){return this._sent}}class zI{constructor(t){this.rom=new ArrayBuffer,this.channel=t,this._received=0}run(t){this.rom=this._appendBuffer(this.rom,t),this._received+=t.byteLength,this.channel.send("next")}_appendBuffer(t,n){var r=new Uint8Array(t.byteLength+n.byteLength);return r.set(new Uint8Array(t),0),r.set(new Uint8Array(n),t.byteLength),r.buffer}get transferred(){return this._received}}const Bi={SENDING_ROM:0,PLAYING:1},qI=5;class jI extends Uh{constructor(t){super(),this.channel=t,this._reset(),this.channel.on("data",n=>this._onData(n)),this._timeout=0,this.$timeoutInterval=setInterval(()=>{if(!this.channel.open){clearInterval(this.$timeoutInterval);return}if(this._state===Bi.PLAYING&&!this._received?this._timeout++:this._timeout=0,this._timeout>=qI){clearInterval(this.$timeoutInterval),this.channel.close();return}this._received=!1},1e3)}sync(){const{masterBufferLimit:t}=Xe.buffering;if(this._state!==Bi.PLAYING||this._blindFrames>t){ve.emit("isLoading",!0);return}ve.emit("isLoading",!1),this._runFrame()}initializeRom(t){t!=null&&(this._transfer=new $I(t,this.channel),this._transfer.run(),this.emit("rom",t))}updateRom(t){this.channel.send("new-rom"),this._reset(),this.initializeRom(t)}initializeEmulator(t){this._emulator=t,t.localController.isMaster=!0,t.localController.needsSwap=!1,t.localController.player=1,t.remoteController.player=2,ve.emit("player",1)}onStartPressed(){}onSwap(){const t=this._emulator.localController.swapWith(this._emulator.remoteController);ve.emit("player",t)}_start(){this._transfer=null,this._state=Bi.PLAYING,this.emit("start"),ve.emit("message",null),ve.emit("isLoading",!1)}_runFrame(){const{masterBufferLimit:t}=Xe.buffering;if(this._buffer.length>t){const o=this._buffer.length-t;for(let a=0;a<o;a++)this._buffer.shift()}const n=this._buffer.shift();if(n){const o=new Uint8Array(n)[0],a=new Uint8Array(n)[1];this._emulator.remoteController.syncAll(o),(this._emulator.localController.player===1&&this._emulator.localController.needsSwap||this._emulator.remoteController.player===1&&a)&&this.onSwap()}const r=new Uint8Array(3);r[0]=this._emulator.localController.toByte(),r[1]=this._emulator.remoteController.toByte(),r[2]=this._emulator.localController.player,this.channel.send(r),this._blindFrames++,this._emulator.frame()}_onData(t){switch(this._received=!0,this._state){case Bi.SENDING_ROM:t==="next"?this._transfer.run()&&ve.emit("message",Ve.waiting):t==="start"&&this._start();break;case Bi.PLAYING:this._buffer.push(t),this._blindFrames=0;break}}_reset(){this._state=Bi.SENDING_ROM,this._transfer=null,this._buffer=[],this._blindFrames=0,ve.emit("isLoading",!0)}}const Qr={RECEIVING_ROM:0,WAITING_START:1,PLAYING:2},HI=5;class XI extends Uh{constructor(t){super(),this.channel=t,this._reset(),this.channel.on("data",n=>this._onData(n)),this._hasPressedStart=!1,this._timeout=0,this.$timeoutInterval=setInterval(()=>{if(!this.channel.open){clearInterval(this.$timeoutInterval);return}if(this._state===Qr.PLAYING&&!this._received?this._timeout++:this._timeout=0,this._timeout>=HI){clearInterval(this.$timeoutInterval),this.channel.close();return}this._received=!1},1e3)}sync(){const{minBufferSize:t,maxBufferSize:n}=Xe.buffering;if(this._buffer.length<t){this._isBuffering=!0,ve.emit("isLoading",!0);return}if(this._buffer.length>n){const r=this._buffer.length-n;for(let o=0;o<r;o++)this._runFrame()}this._isBuffering&&this._buffer.length<n||this._runFrame()}initializeRom(t){}updateRom(t){}initializeEmulator(t){this._emulator=t,ve.emit("isLoading",!1),t.localController.isMaster=!1,t.localController.needsSwap=!1,t.localController.player=2,t.remoteController.player=1,ve.emit("player",2)}onStartPressed(){this._state===Qr.WAITING_START&&(this._hasPressedStart=!0,this._start())}onSwap(){const t=this._emulator.localController.swapWith(this._emulator.remoteController);ve.emit("player",t)}_start(){this.emit("start"),this.channel.send("start"),ve.emit("message",null),this._state=Qr.PLAYING}_runFrame(){this._isBuffering=!1,ve.emit("isLoading",!1);const t=this._buffer.shift(),n=new Uint8Array(t)[0],r=new Uint8Array(t)[1],o=new Uint8Array(t)[2];this._emulator.remoteController.syncAll(n),this._emulator.localController.syncAll(r),o!==this._emulator.remoteController.player&&this.onSwap(),this._emulator.frame()}_onData(t){if(this._received=!0,t==="new-rom"){this._reset();return}switch(this._state){case Qr.RECEIVING_ROM:t==="end"?(this.emit("rom",this._transfer.rom),this._transfer=null,this._hasPressedStart?this._start():(ve.emit("message",Ve.pressStart),this._state=Qr.WAITING_START)):this._transfer.run(t);break;case Qr.PLAYING:if(!this._emulator)return;this._buffer.push(t);const n=new Uint8Array(2);n[0]=this._emulator.localController.toByte(),n[1]=+this._emulator.localController.needsSwap,this.channel.send(n);break}}_reset(){this._state=Qr.RECEIVING_ROM,this._transfer=new zI(this.channel),this._isBuffering=!1,this._buffer=[],ve.emit("isLoading",!0)}}class YI{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(t){this.flush(),this._parts.push(t)}append(t){this._pieces.push(t)}flush(){if(this._pieces.length>0){const t=new Uint8Array(this._pieces);this._parts.push(t),this._pieces=[]}}toArrayBuffer(){const t=[];for(const n of this._parts)t.push(n);return KI(t).buffer}}function KI(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let r=0;for(const o of e){const a=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);n.set(a,r),r+=o.byteLength}return n}function Z_(e){return new ZI(e).unpack()}function J_(e){const t=new JI,n=t.pack(e);return n instanceof Promise?n.then(()=>t.getBuffer()):t.getBuffer()}class ZI{constructor(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;let n;if((n=t^160)<=15)return this.unpack_raw(n);if((n=t^176)<=15)return this.unpack_string(n);if((n=t^144)<=15)return this.unpack_array(n);if((n=t^128)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const t=this.dataView[this.index]&255;return this.index++,t}unpack_uint16(){const t=this.read(2),n=(t[0]&255)*256+(t[1]&255);return this.index+=2,n}unpack_uint32(){const t=this.read(4),n=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,n}unpack_uint64(){const t=this.read(8),n=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,n}unpack_int8(){const t=this.unpack_uint8();return t<128?t:t-256}unpack_int16(){const t=this.unpack_uint16();return t<32768?t:t-65536}unpack_int32(){const t=this.unpack_uint32();return t<2**31?t:t-2**32}unpack_int64(){const t=this.unpack_uint64();return t<2**63?t:t-2**64}unpack_raw(t){if(this.length<this.index+t)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${t} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,n}unpack_string(t){const n=this.read(t);let r=0,o="",a,u;for(;r<t;)a=n[r],a<160?(u=a,r++):(a^192)<32?(u=(a&31)<<6|n[r+1]&63,r+=2):(a^224)<16?(u=(a&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(u=(a&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),o+=String.fromCodePoint(u);return this.index+=t,o}unpack_array(t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=this.unpack();return n}unpack_map(t){const n={};for(let r=0;r<t;r++){const o=this.unpack();n[o]=this.unpack()}return n}unpack_float(){const t=this.unpack_uint32(),n=t>>31,r=(t>>23&255)-127,o=t&8388607|8388608;return(n===0?1:-1)*o*2**(r-23)}unpack_double(){const t=this.unpack_uint32(),n=this.unpack_uint32(),r=t>>31,o=(t>>20&2047)-1023,u=(t&1048575|1048576)*2**(o-20)+n*2**(o-52);return(r===0?1:-1)*u}read(t){const n=this.index;if(n+t<=this.length)return this.dataView.subarray(n,n+t);throw new Error("BinaryPackFailure: read index out of range")}}class JI{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(t){if(typeof t=="string")this.pack_string(t);else if(typeof t=="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(typeof t=="boolean")t===!0?this._bufferBuilder.append(195):t===!1&&this._bufferBuilder.append(194);else if(t===void 0)this._bufferBuilder.append(192);else if(typeof t=="object")if(t===null)this._bufferBuilder.append(192);else{const n=t.constructor;if(t instanceof Array){const r=this.pack_array(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(t instanceof ArrayBuffer)this.pack_bin(new Uint8Array(t));else if("BYTES_PER_ELEMENT"in t){const r=t;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(t instanceof Date)this.pack_string(t.toString());else{if(t instanceof Blob)return t.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(t);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof t}" not yet supported`);this._bufferBuilder.flush()}pack_bin(t){const n=t.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_string(t){const n=this._textEncoder.encode(t),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(t){const n=t.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=o=>{if(o<n){const a=this.pack(t[o]);return a instanceof Promise?a.then(()=>r(o+1)):r(o+1)}};return r(0)}pack_integer(t){if(t>=-32&&t<=127)this._bufferBuilder.append(t&255);else if(t>=0&&t<=255)this._bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this._bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this._bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this._bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this._bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")}pack_double(t){let n=0;t<0&&(n=1,t=-t);const r=Math.floor(Math.log(t)/Math.LN2),o=t/2**r-1,a=Math.floor(o*2**52),u=2**32,c=n<<31|r+1023<<20|a/u&1048575,m=a%u;this._bufferBuilder.append(203),this.pack_int32(c),this.pack_int32(m)}pack_object(t){const n=Object.keys(t),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const o=a=>{if(a<n.length){const u=n[a];if(t.hasOwnProperty(u)){this.pack(u);const c=this.pack(t[u]);if(c instanceof Promise)return c.then(()=>o(a+1))}return o(a+1)}};return o(0)}pack_uint8(t){this._bufferBuilder.append(t)}pack_uint16(t){this._bufferBuilder.append(t>>8),this._bufferBuilder.append(t&255)}pack_uint32(t){const n=t&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(t){const n=t/4294967296,r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(t){this._bufferBuilder.append(t&255)}pack_int16(t){this._bufferBuilder.append((t&65280)>>8),this._bufferBuilder.append(t&255)}pack_int32(t){this._bufferBuilder.append(t>>>24&255),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_int64(t){const n=Math.floor(t/4294967296),r=t%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new YI,this._textEncoder=new TextEncoder}}let Q_=!0,ey=!0;function Oa(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function xi(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(u,c){if(u!==t)return o.apply(this,arguments);const m=_=>{const v=n(_);v&&(c.handleEvent?c.handleEvent(v):c(v))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(c,m),o.apply(this,[u,m])};const a=r.removeEventListener;r.removeEventListener=function(u,c){if(u!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(c))return a.apply(this,arguments);const m=this._eventMap[t].get(c);return this._eventMap[t].delete(c),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[u,m])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(u){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),u&&this.addEventListener(t,this["_on"+t]=u)},enumerable:!0,configurable:!0})}function QI(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Q_=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function ek(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(ey=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function ty(){if(typeof window=="object"){if(Q_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Wh(e,t){ey&&console.warn(e+" is deprecated, please use "+t+" instead.")}function tk(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(o=>o.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=Oa(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Oa(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=Oa(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function Um(e){return Object.prototype.toString.call(e)==="[object Object]"}function ny(e){return Um(e)?Object.keys(e).reduce(function(t,n){const r=Um(e[n]),o=r?ny(e[n]):e[n],a=r&&!Object.keys(o).length;return o===void 0||a?t:Object.assign(t,{[n]:o})},{}):e}function kf(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?kf(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(o=>{kf(e,e.get(o),n)})}))}function Gm(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(t===null)return o;const a=[];return e.forEach(u=>{u.type==="track"&&u.trackIdentifier===t.id&&a.push(u)}),a.forEach(u=>{e.forEach(c=>{c.type===r&&c.trackId===u.id&&kf(e,c,o)})}),o}const Vm=ty;function ry(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(c){if(typeof c!="object"||c.mandatory||c.optional)return c;const m={};return Object.keys(c).forEach(_=>{if(_==="require"||_==="advanced"||_==="mediaSource")return;const v=typeof c[_]=="object"?c[_]:{ideal:c[_]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const R=function(b,L){return b?b+L.charAt(0).toUpperCase()+L.slice(1):L==="deviceId"?"sourceId":L};if(v.ideal!==void 0){m.optional=m.optional||[];let b={};typeof v.ideal=="number"?(b[R("min",_)]=v.ideal,m.optional.push(b),b={},b[R("max",_)]=v.ideal,m.optional.push(b)):(b[R("",_)]=v.ideal,m.optional.push(b))}v.exact!==void 0&&typeof v.exact!="number"?(m.mandatory=m.mandatory||{},m.mandatory[R("",_)]=v.exact):["min","max"].forEach(b=>{v[b]!==void 0&&(m.mandatory=m.mandatory||{},m.mandatory[R(b,_)]=v[b])})}),c.advanced&&(m.optional=(m.optional||[]).concat(c.advanced)),m},o=function(c,m){if(t.version>=61)return m(c);if(c=JSON.parse(JSON.stringify(c)),c&&typeof c.audio=="object"){const _=function(v,R,b){R in v&&!(b in v)&&(v[b]=v[R],delete v[R])};c=JSON.parse(JSON.stringify(c)),_(c.audio,"autoGainControl","googAutoGainControl"),_(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=r(c.audio)}if(c&&typeof c.video=="object"){let _=c.video.facingMode;_=_&&(typeof _=="object"?_:{ideal:_});const v=t.version<66;if(_&&(_.exact==="user"||_.exact==="environment"||_.ideal==="user"||_.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete c.video.facingMode;let R;if(_.exact==="environment"||_.ideal==="environment"?R=["back","rear"]:(_.exact==="user"||_.ideal==="user")&&(R=["front"]),R)return n.mediaDevices.enumerateDevices().then(b=>{b=b.filter(H=>H.kind==="videoinput");let L=b.find(H=>R.some(J=>H.label.toLowerCase().includes(J)));return!L&&b.length&&R.includes("back")&&(L=b[b.length-1]),L&&(c.video.deviceId=_.exact?{exact:L.deviceId}:{ideal:L.deviceId}),c.video=r(c.video),Vm("chrome: "+JSON.stringify(c)),m(c)})}c.video=r(c.video)}return Vm("chrome: "+JSON.stringify(c)),m(c)},a=function(c){return t.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(c,m,_){o(c,v=>{n.webkitGetUserMedia(v,m,R=>{_&&_(a(R))})})};if(n.getUserMedia=u.bind(n),n.mediaDevices.getUserMedia){const c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(m){return o(m,_=>c(_).then(v=>{if(_.audio&&!v.getAudioTracks().length||_.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(R=>{R.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(a(v))))}}}function iy(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function sy(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",o=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(c=>c.track&&c.track.id===o.track.id):a={track:o.track};const u=new Event("track");u.track=o.track,u.receiver=a,u.transceiver={receiver:a},u.streams=[r.stream],this.dispatchEvent(u)}),r.stream.getTracks().forEach(o=>{let a;e.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(c=>c.track&&c.track.id===o.id):a={track:o};const u=new Event("track");u.track=o,u.receiver=a,u.transceiver={receiver:a},u.streams=[r.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else xi(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function oy(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(o,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=o.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:o}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(c,m){let _=o.apply(this,arguments);return _||(_=t(this,c),this._senders.push(_)),_};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(c){a.apply(this,arguments);const m=this._senders.indexOf(c);m!==-1&&this._senders.splice(m,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(u=>{this._senders.push(t(this,u))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(u=>{const c=this._senders.find(m=>m.track===u);c&&this._senders.splice(this._senders.indexOf(c),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ay(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(u=>u._pc=this),a});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(u=>Gm(u,a.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const o=n.apply(this,[]);return o.forEach(a=>a._pc=this),o}),xi(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(a=>Gm(a,o.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let o,a,u;return this.getSenders().forEach(c=>{c.track===r&&(o?u=!0:o=c)}),this.getReceivers().forEach(c=>(c.track===r&&(a?u=!0:a=c),c.track===r)),u||o&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function ly(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(u,c){if(!c)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const m=t.apply(this,arguments);return this._shimmedLocalStreams[c.id]?this._shimmedLocalStreams[c.id].indexOf(m)===-1&&this._shimmedLocalStreams[c.id].push(m):this._shimmedLocalStreams[c.id]=[c,m],m};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(_=>{if(this.getSenders().find(R=>R.track===_))throw new DOMException("Track already exists.","InvalidAccessError")});const c=this.getSenders();n.apply(this,arguments);const m=this.getSenders().filter(_=>c.indexOf(_)===-1);this._shimmedLocalStreams[u.id]=[u].concat(m)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(c=>{const m=this._shimmedLocalStreams[c].indexOf(u);m!==-1&&this._shimmedLocalStreams[c].splice(m,1),this._shimmedLocalStreams[c].length===1&&delete this._shimmedLocalStreams[c]}),o.apply(this,arguments)}}function uy(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return ly(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const v=n.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(R=>this._reverseStreams[R.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(R=>{if(this.getSenders().find(L=>L.track===R))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const R=new e.MediaStream(v.getTracks());this._streams[v.id]=R,this._reverseStreams[R.id]=v,v=R}r.apply(this,[v])};const o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},e.RTCPeerConnection.prototype.addTrack=function(v,R){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const b=[].slice.call(arguments,1);if(b.length!==1||!b[0].getTracks().find(J=>J===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(J=>J.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const H=this._streams[R.id];if(H)H.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const J=new e.MediaStream([v]);this._streams[R.id]=J,this._reverseStreams[J.id]=R,this.addStream(J)}return this.getSenders().find(J=>J.track===v)};function a(_,v){let R=v.sdp;return Object.keys(_._reverseStreams||[]).forEach(b=>{const L=_._reverseStreams[b],H=_._streams[L.id];R=R.replace(new RegExp(H.id,"g"),L.id)}),new RTCSessionDescription({type:v.type,sdp:R})}function u(_,v){let R=v.sdp;return Object.keys(_._reverseStreams||[]).forEach(b=>{const L=_._reverseStreams[b],H=_._streams[L.id];R=R.replace(new RegExp(L.id,"g"),H.id)}),new RTCSessionDescription({type:v.type,sdp:R})}["createOffer","createAnswer"].forEach(function(_){const v=e.RTCPeerConnection.prototype[_],R={[_](){const b=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[H=>{const J=a(this,H);b[0].apply(null,[J])},H=>{b[1]&&b[1].apply(null,H)},arguments[2]]):v.apply(this,arguments).then(H=>a(this,H))}};e.RTCPeerConnection.prototype[_]=R[_]});const c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?c.apply(this,arguments):(arguments[0]=u(this,arguments[0]),c.apply(this,arguments))};const m=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const _=m.get.apply(this);return _.type===""?_:a(this,_)}}),e.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let b;Object.keys(this._streams).forEach(L=>{this._streams[L].getTracks().find(J=>v.track===J)&&(b=this._streams[L])}),b&&(b.getTracks().length===1?this.removeStream(this._reverseStreams[b.id]):b.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function bf(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],o={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=o[n]})}function cy(e,t){xi(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Wm=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:cy,shimAddTrackRemoveTrack:uy,shimAddTrackRemoveTrackWithNative:ly,shimGetSendersWithDtmf:oy,shimGetUserMedia:ry,shimMediaStream:iy,shimOnTrack:sy,shimPeerConnection:bf,shimSenderReceiverGetStats:ay},Symbol.toStringTag,{value:"Module"}));function fy(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(o,a,u){Wh("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(o).then(a,u)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const o=function(u,c,m){c in u&&!(m in u)&&(u[m]=u[c],delete u[c])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),o(u.audio,"autoGainControl","mozAutoGainControl"),o(u.audio,"noiseSuppression","mozNoiseSuppression")),a(u)},r&&r.prototype.getSettings){const u=r.prototype.getSettings;r.prototype.getSettings=function(){const c=u.apply(this,arguments);return o(c,"mozAutoGainControl","autoGainControl"),o(c,"mozNoiseSuppression","noiseSuppression"),c}}if(r&&r.prototype.applyConstraints){const u=r.prototype.applyConstraints;r.prototype.applyConstraints=function(c){return this.kind==="audio"&&typeof c=="object"&&(c=JSON.parse(JSON.stringify(c)),o(c,"autoGainControl","mozAutoGainControl"),o(c,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[c])}}}}function nk(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function hy(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Df(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const a=e.RTCPeerConnection.prototype[o],u={[o](){return arguments[0]=new(o==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};e.RTCPeerConnection.prototype[o]=u[o]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[a,u,c]=arguments;return r.apply(this,[a||null]).then(m=>{if(t.version<53&&!u)try{m.forEach(_=>{_.type=n[_.type]||_.type})}catch(_){if(_.name!=="TypeError")throw _;m.forEach((v,R)=>{m.set(R,Object.assign({},v,{type:n[v.type]||v.type}))})}return m}).then(u,c)}}function py(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(a=>a._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function dy(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r}),xi(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function my(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Wh("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function gy(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function _y(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const o=r.length>0;o&&r.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=t.apply(this,arguments);if(o){const{sender:u}=a,c=u.getParameters();(!("encodings"in c)||c.encodings.length===1&&Object.keys(c.encodings[0]).length===0)&&(c.encodings=r,u.sendEncodings=r,this.setParametersPromises.push(u.setParameters(c).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return a})}function yy(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function xy(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function vy(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const $m=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:_y,shimCreateAnswer:vy,shimCreateOffer:xy,shimGetDisplayMedia:nk,shimGetParameters:yy,shimGetUserMedia:fy,shimOnTrack:hy,shimPeerConnection:Df,shimRTCDataChannel:gy,shimReceiverGetStats:dy,shimRemoveStream:my,shimSenderGetStats:py},Symbol.toStringTag,{value:"Module"}));function Sy(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(o=>t.call(this,o,r)),r.getVideoTracks().forEach(o=>t.call(this,o,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...o){return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const o=n.getTracks();this.getSenders().forEach(a=>{o.includes(a.track)&&this.removeTrack(a)})})}}function Ry(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const a=new Event("addstream");a.stream=o,this.dispatchEvent(a)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(a=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(a)>=0)return;r._remoteStreams.push(a);const u=new Event("addstream");u.stream=a,r.dispatchEvent(u)})}),t.apply(r,arguments)}}}function Cy(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,a=t.setRemoteDescription,u=t.addIceCandidate;t.createOffer=function(_,v){const R=arguments.length>=2?arguments[2]:arguments[0],b=n.apply(this,[R]);return v?(b.then(_,v),Promise.resolve()):b},t.createAnswer=function(_,v){const R=arguments.length>=2?arguments[2]:arguments[0],b=r.apply(this,[R]);return v?(b.then(_,v),Promise.resolve()):b};let c=function(m,_,v){const R=o.apply(this,[m]);return v?(R.then(_,v),Promise.resolve()):R};t.setLocalDescription=c,c=function(m,_,v){const R=a.apply(this,[m]);return v?(R.then(_,v),Promise.resolve()):R},t.setRemoteDescription=c,c=function(m,_,v){const R=u.apply(this,[m]);return v?(R.then(_,v),Promise.resolve()):R},t.addIceCandidate=c}function Ey(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=o=>r(Ty(o))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,o,a){t.mediaDevices.getUserMedia(r).then(o,a)}).bind(t))}function Ty(e){return e&&e.video!==void 0?Object.assign({},e,{video:ny(e.video)}):e}function Ay(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,o){if(r&&r.iceServers){const a=[];for(let u=0;u<r.iceServers.length;u++){let c=r.iceServers[u];c.urls===void 0&&c.url?(Wh("RTCIceServer.url","RTCIceServer.urls"),c=JSON.parse(JSON.stringify(c)),c.urls=c.url,delete c.url,a.push(c)):a.push(r.iceServers[u])}r.iceServers=a}return new t(r,o)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function wy(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Iy(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const o=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):r.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function ky(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const zm=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ky,shimCallbacksAPI:Cy,shimConstraints:Ty,shimCreateOfferLegacy:Iy,shimGetUserMedia:Ey,shimLocalStreamsAPI:Sy,shimRTCIceServerUrls:Ay,shimRemoteStreamsAPI:Ry,shimTrackEventTransceiver:wy},Symbol.toStringTag,{value:"Module"}));var by={exports:{}};(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((o,a)=>(a>0?"m="+o:o).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(o=>o.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const o={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let a=8;a<r.length;a+=2)switch(r[a]){case"raddr":o.relatedAddress=r[a+1];break;case"rport":o.relatedPort=parseInt(r[a+1],10);break;case"tcptype":o.tcpType=r[a+1];break;case"ufrag":o.ufrag=r[a+1],o.usernameFragment=r[a+1];break;default:o[r[a]]===void 0&&(o[r[a]]=r[a+1]);break}return o},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const o=n.component;o==="rtp"?r.push(1):o==="rtcp"?r.push(2):r.push(o),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const a=n.type;return r.push("typ"),r.push(a),a!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const o={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),o.name=r[0],o.clockRate=parseInt(r[1],10),o.channels=r.length===3?parseInt(r[2],10):1,o.numChannels=o.channels,o},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const o=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(o!==1?"/"+o:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let o;const a=n.substring(n.indexOf(" ")+1).split(";");for(let u=0;u<a.length;u++)o=a[u].trim().split("="),r[o[0].trim()]=o[1];return r},t.writeFmtp=function(n){let r="",o=n.payloadType;if(n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const a=[];Object.keys(n.parameters).forEach(u=>{n.parameters[u]!==void 0?a.push(u+"="+n.parameters[u]):a.push(u)}),r+="a=fmtp:"+o+" "+a.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",o=n.payloadType;return n.preferredPayloadType!==void 0&&(o=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(a=>{r+="a=rtcp-fb:"+o+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),o={ssrc:parseInt(n.substring(7,r),10)},a=n.indexOf(":",r);return a>-1?(o.attribute=n.substring(r+1,a),o.value=n.substring(a+1)):o.attribute=n.substring(r+1),o},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(o=>parseInt(o,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let o="a=setup:"+r+`\r
`;return n.fingerprints.forEach(a=>{o+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),o},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const o=t.matchPrefix(n+r,"a=ice-ufrag:")[0],a=t.matchPrefix(n+r,"a=ice-pwd:")[0];return o&&a?{usernameFragment:o.substring(12),password:a.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=t.splitLines(n)[0].split(" ");r.profile=a[2];for(let c=3;c<a.length;c++){const m=a[c],_=t.matchPrefix(n,"a=rtpmap:"+m+" ")[0];if(_){const v=t.parseRtpMap(_),R=t.matchPrefix(n,"a=fmtp:"+m+" ");switch(v.parameters=R.length?t.parseFmtp(R[0]):{},v.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+m+" ").map(t.parseRtcpFb),r.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(v.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(c=>{r.headerExtensions.push(t.parseExtmap(c))});const u=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(c=>{u.forEach(m=>{c.rtcpFeedback.find(v=>v.type===m.type&&v.parameter===m.parameter)||c.rtcpFeedback.push(m)})}),r},t.writeRtpDescription=function(n,r){let o="";o+="m="+n+" ",o+=r.codecs.length>0?"9":"0",o+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=r.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(u=>{o+=t.writeRtpMap(u),o+=t.writeFmtp(u),o+=t.writeRtcpFb(u)});let a=0;return r.codecs.forEach(u=>{u.maxptime>a&&(a=u.maxptime)}),a>0&&(o+="a=maxptime:"+a+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(u=>{o+=t.writeExtmap(u)}),o},t.parseRtpEncodingParameters=function(n){const r=[],o=t.parseRtpParameters(n),a=o.fecMechanisms.indexOf("RED")!==-1,u=o.fecMechanisms.indexOf("ULPFEC")!==-1,c=t.matchPrefix(n,"a=ssrc:").map(b=>t.parseSsrcMedia(b)).filter(b=>b.attribute==="cname"),m=c.length>0&&c[0].ssrc;let _;const v=t.matchPrefix(n,"a=ssrc-group:FID").map(b=>b.substring(17).split(" ").map(H=>parseInt(H,10)));v.length>0&&v[0].length>1&&v[0][0]===m&&(_=v[0][1]),o.codecs.forEach(b=>{if(b.name.toUpperCase()==="RTX"&&b.parameters.apt){let L={ssrc:m,codecPayloadType:parseInt(b.parameters.apt,10)};m&&_&&(L.rtx={ssrc:_}),r.push(L),a&&(L=JSON.parse(JSON.stringify(L)),L.fec={ssrc:m,mechanism:u?"red+ulpfec":"red"},r.push(L))}}),r.length===0&&m&&r.push({ssrc:m});let R=t.matchPrefix(n,"b=");return R.length&&(R[0].indexOf("b=TIAS:")===0?R=parseInt(R[0].substring(7),10):R[0].indexOf("b=AS:")===0?R=parseInt(R[0].substring(5),10)*1e3*.95-50*40*8:R=void 0,r.forEach(b=>{b.maxBitrate=R})),r},t.parseRtcpParameters=function(n){const r={},o=t.matchPrefix(n,"a=ssrc:").map(c=>t.parseSsrcMedia(c)).filter(c=>c.attribute==="cname")[0];o&&(r.cname=o.value,r.ssrc=o.ssrc);const a=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=a.length>0,r.compound=a.length===0;const u=t.matchPrefix(n,"a=rtcp-mux");return r.mux=u.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const o=t.matchPrefix(n,"a=msid:");if(o.length===1)return r=o[0].substring(7).split(" "),{stream:r[0],track:r[1]};const a=t.matchPrefix(n,"a=ssrc:").map(u=>t.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(a.length>0)return r=a[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),o=t.matchPrefix(n,"a=max-message-size:");let a;o.length>0&&(a=parseInt(o[0].substring(19),10)),isNaN(a)&&(a=65536);const u=t.matchPrefix(n,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:r.fmt,maxMessageSize:a};const c=t.matchPrefix(n,"a=sctpmap:");if(c.length>0){const m=c[0].substring(10).split(" ");return{port:parseInt(m[0],10),protocol:m[1],maxMessageSize:a}}},t.writeSctpDescription=function(n,r){let o=[];return n.protocol!=="DTLS/SCTP"?o=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:o=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&o.push("a=max-message-size:"+r.maxMessageSize+`\r
`),o.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,o){let a;const u=r!==void 0?r:2;return n?a=n:a=t.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+a+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const o=t.splitLines(n);for(let a=0;a<o.length;a++)switch(o[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[a].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const o=t.splitLines(n)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},t.parseOLine=function(n){const o=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let o=0;o<r.length;o++)if(r[o].length<2||r[o].charAt(1)!=="=")return!1;return!0},e.exports=t})(by);var Dy=by.exports;const Qi=_i(Dy),rk=bT({__proto__:null,default:Qi},[Dy]);function Pa(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const o=new t(r),a=Qi.parseCandidate(r.candidate);for(const u in a)u in o||Object.defineProperty(o,u,{value:a[u]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,xi(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Nf(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||xi(e,"icecandidate",t=>{if(t.candidate){const n=Qi.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Fa(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(c){if(!c||!c.sdp)return!1;const m=Qi.splitSections(c.sdp);return m.shift(),m.some(_=>{const v=Qi.parseMLine(_);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},r=function(c){const m=c.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(m===null||m.length<2)return-1;const _=parseInt(m[1],10);return _!==_?-1:_},o=function(c){let m=65536;return t.browser==="firefox"&&(t.version<57?c===-1?m=16384:m=2147483637:t.version<60?m=t.version===57?65535:65536:m=2147483637),m},a=function(c,m){let _=65536;t.browser==="firefox"&&t.version===57&&(_=65535);const v=Qi.matchPrefix(c.sdp,"a=max-message-size:");return v.length>0?_=parseInt(v[0].substring(19),10):t.browser==="firefox"&&m!==-1&&(_=2147483637),_},u=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:m}=this.getConfiguration();m==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const m=r(arguments[0]),_=o(m),v=a(arguments[0],m);let R;_===0&&v===0?R=Number.POSITIVE_INFINITY:_===0||v===0?R=Math.max(_,v):R=Math.min(_,v);const b={};Object.defineProperty(b,"maxMessageSize",{get(){return R}}),this._sctp=b}return u.apply(this,arguments)}}function Ma(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,o){const a=r.send;r.send=function(){const c=arguments[0],m=c.length||c.size||c.byteLength;if(r.readyState==="open"&&o.sctp&&m>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return a.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const o=n.apply(this,arguments);return t(o,this),o},xi(e,"datachannel",r=>(t(r.channel,r.target),r))}function Of(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const a=o.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const u=new Event("connectionstatechange",o);a.dispatchEvent(u)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Pf(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=o.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&o instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:o.type,sdp:a}):o.sdp=a}return n.apply(this,arguments)}}function La(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ba(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return n.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?n.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>n.apply(this,[u]))})}const ik=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Pf,shimAddIceCandidateNullOrEmpty:La,shimConnectionState:Of,shimMaxMessageSize:Fa,shimParameterlessSetLocalDescription:Ba,shimRTCIceCandidate:Pa,shimRTCIceCandidateRelayProtocol:Nf,shimSendThrowTypeError:Ma},Symbol.toStringTag,{value:"Module"}));function sk({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=ty,r=tk(e),o={browserDetails:r,commonShim:ik,extractVersion:Oa,disableLog:QI,disableWarnings:ek,sdp:rk};switch(r.browser){case"chrome":if(!Wm||!bf||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=Wm,La(e,r),Ba(e),ry(e,r),iy(e),bf(e,r),sy(e),uy(e,r),oy(e),ay(e),cy(e,r),Pa(e),Nf(e),Of(e),Fa(e,r),Ma(e),Pf(e,r);break;case"firefox":if(!$m||!Df||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=$m,La(e,r),Ba(e),fy(e,r),Df(e,r),hy(e),my(e),py(e),dy(e),gy(e),_y(e),yy(e),xy(e),vy(e),Pa(e),Of(e),Fa(e,r),Ma(e);break;case"safari":if(!zm||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=zm,La(e,r),Ba(e),Ay(e),Iy(e),Cy(e),Sy(e),Ry(e),wy(e),Ey(e),ky(e),Pa(e),Nf(e),Fa(e,r),Ma(e),Pf(e,r);break;default:n("Unsupported browser!");break}return o}const qm=sk({window:typeof window>"u"?void 0:window});function vi(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}class Ny{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=t=>{const n=[],r=t.byteLength,o=Math.ceil(r/this.chunkedMTU);let a=0,u=0;for(;u<r;){const c=Math.min(r,u+this.chunkedMTU),m=t.slice(u,c),_={__peerData:this._dataCount,n:a,data:m,total:o};n.push(_),u=c,a++}return this._dataCount++,n}}}function ok(e){let t=0;for(const o of e)t+=o.byteLength;const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.byteLength;return n}const cc=qm.default||qm,Ps=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),t=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?t>=this.minChromeVersion:e==="firefox"?t>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&t>=this.minSafariVersion:!1:!1}getBrowser(){return cc.browserDetails.browser}getVersion(){return cc.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),t=cc.browserDetails.version||0;if(e==="chrome"&&t<this.minChromeVersion)return!1;if(e==="firefox"&&t>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},ak=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),Oy=()=>Math.random().toString(36).slice(2),jm={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class lk extends Ny{noop(){}blobToArrayBuffer(t,n){const r=new FileReader;return r.onload=function(o){o.target&&n(o.target.result)},r.readAsArrayBuffer(t),r}binaryStringToArrayBuffer(t){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...t){super(...t),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=jm,this.browser=Ps.getBrowser(),this.browserVersion=Ps.getVersion(),this.pack=J_,this.unpack=Z_,this.supports=function(){const n={browser:Ps.isBrowserSupported(),webRTC:Ps.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(jm),n.audioVideo=!0;let o;try{o=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!o.ordered;try{o.binaryType="blob",n.binaryBlob=!Ps.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=ak,this.randomToken=Oy}}const Wt=new lk,uk="PeerJS: ";var Hm;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(Hm||(Hm={}));class ck{get logLevel(){return this._logLevel}set logLevel(t){this._logLevel=t}log(...t){this._logLevel>=3&&this._print(3,...t)}warn(...t){this._logLevel>=2&&this._print(2,...t)}error(...t){this._logLevel>=1&&this._print(1,...t)}setLogFunction(t){this._print=t}_print(t,...n){const r=[uk,...n];for(const o in r)r[o]instanceof Error&&(r[o]="("+r[o].name+") "+r[o].message);t>=3?console.log(...r):t>=2?console.warn("WARNING",...r):t>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var Z=new ck,$h={},fk=Object.prototype.hasOwnProperty,Pt="~";function so(){}Object.create&&(so.prototype=Object.create(null),new so().__proto__||(Pt=!1));function hk(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Py(e,t,n,r,o){if(typeof n!="function")throw new TypeError("The listener must be a function");var a=new hk(n,r||e,o),u=Pt?Pt+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function Ua(e,t){--e._eventsCount===0?e._events=new so:delete e._events[t]}function It(){this._events=new so,this._eventsCount=0}It.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)fk.call(n,r)&&t.push(Pt?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};It.prototype.listeners=function(t){var n=Pt?Pt+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,u=new Array(a);o<a;o++)u[o]=r[o].fn;return u};It.prototype.listenerCount=function(t){var n=Pt?Pt+t:t,r=this._events[n];return r?r.fn?1:r.length:0};It.prototype.emit=function(t,n,r,o,a,u){var c=Pt?Pt+t:t;if(!this._events[c])return!1;var m=this._events[c],_=arguments.length,v,R;if(m.fn){switch(m.once&&this.removeListener(t,m.fn,void 0,!0),_){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,n),!0;case 3:return m.fn.call(m.context,n,r),!0;case 4:return m.fn.call(m.context,n,r,o),!0;case 5:return m.fn.call(m.context,n,r,o,a),!0;case 6:return m.fn.call(m.context,n,r,o,a,u),!0}for(R=1,v=new Array(_-1);R<_;R++)v[R-1]=arguments[R];m.fn.apply(m.context,v)}else{var b=m.length,L;for(R=0;R<b;R++)switch(m[R].once&&this.removeListener(t,m[R].fn,void 0,!0),_){case 1:m[R].fn.call(m[R].context);break;case 2:m[R].fn.call(m[R].context,n);break;case 3:m[R].fn.call(m[R].context,n,r);break;case 4:m[R].fn.call(m[R].context,n,r,o);break;default:if(!v)for(L=1,v=new Array(_-1);L<_;L++)v[L-1]=arguments[L];m[R].fn.apply(m[R].context,v)}}return!0};It.prototype.on=function(t,n,r){return Py(this,t,n,r,!1)};It.prototype.once=function(t,n,r){return Py(this,t,n,r,!0)};It.prototype.removeListener=function(t,n,r,o){var a=Pt?Pt+t:t;if(!this._events[a])return this;if(!n)return Ua(this,a),this;var u=this._events[a];if(u.fn)u.fn===n&&(!o||u.once)&&(!r||u.context===r)&&Ua(this,a);else{for(var c=0,m=[],_=u.length;c<_;c++)(u[c].fn!==n||o&&!u[c].once||r&&u[c].context!==r)&&m.push(u[c]);m.length?this._events[a]=m.length===1?m[0]:m:Ua(this,a)}return this};It.prototype.removeAllListeners=function(t){var n;return t?(n=Pt?Pt+t:t,this._events[n]&&Ua(this,n)):(this._events=new so,this._eventsCount=0),this};It.prototype.off=It.prototype.removeListener;It.prototype.addListener=It.prototype.on;It.prefixed=Pt;It.EventEmitter=It;$h=It;var Si={};vi(Si,"ConnectionType",()=>Wn);vi(Si,"PeerErrorType",()=>Ye);vi(Si,"BaseConnectionErrorType",()=>oo);vi(Si,"DataConnectionErrorType",()=>ao);vi(Si,"SerializationType",()=>os);vi(Si,"SocketEventType",()=>Un);vi(Si,"ServerMessageType",()=>ct);var Wn;(function(e){e.Data="data",e.Media="media"})(Wn||(Wn={}));var Ye;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(Ye||(Ye={}));var oo;(function(e){e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed"})(oo||(oo={}));var ao;(function(e){e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big"})(ao||(ao={}));var os;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw"})(os||(os={}));var Un;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(Un||(Un={}));var ct;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(ct||(ct={}));var zh={};zh=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class pk extends $h.EventEmitter{constructor(t,n,r,o,a,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const c=t?"wss://":"ws://";this._baseUrl=c+n+":"+r+o+"peerjs?key="+a}start(t,n){this._id=t;const r=`${this._baseUrl}&id=${t}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+zh.version),this._disconnected=!1,this._socket.onmessage=o=>{let a;try{a=JSON.parse(o.data),Z.log("Server message received:",a)}catch{Z.log("Invalid server message",o.data);return}this.emit(Un.Message,a)},this._socket.onclose=o=>{this._disconnected||(Z.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Un.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Z.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Z.log("Cannot send heartbeat, because socket closed");return}const t=JSON.stringify({type:ct.Heartbeat});this._socket.send(t),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const t=[...this._messagesQueue];this._messagesQueue=[];for(const n of t)this.send(n)}send(t){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(t);return}if(!t.type){this.emit(Un.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(t);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Fy{constructor(t){this.connection=t}startConnection(t){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Wn.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){const r=this.connection,o={ordered:!!t.reliable},a=n.createDataChannel(r.label,o);r._initializeDataChannel(a),this._makeOffer()}else this.handleSDP("OFFER",t.sdp)}_startPeerConnection(){Z.log("Creating RTCPeerConnection.");const t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t}_setupListeners(t){const n=this.connection.peer,r=this.connection.connectionId,o=this.connection.type,a=this.connection.provider;Z.log("Listening for ICE candidates."),t.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(Z.log(`Received ICE candidates for ${n}:`,u.candidate),a.socket.send({type:ct.Candidate,payload:{candidate:u.candidate,type:o,connectionId:r},dst:n}))},t.oniceconnectionstatechange=()=>{switch(t.iceConnectionState){case"failed":Z.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(oo.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":Z.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(oo.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":Z.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":t.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",t.iceConnectionState)},Z.log("Listening for data channel"),t.ondatachannel=u=>{Z.log("Received data channel");const c=u.channel;a.getConnection(n,r)._initializeDataChannel(c)},Z.log("Listening for remote stream"),t.ontrack=u=>{Z.log("Received remote stream");const c=u.streams[0],m=a.getConnection(n,r);if(m.type===Wn.Media){const _=m;this._addStreamToMediaConnection(c,_)}}}cleanup(){Z.log("Cleaning up PeerConnection to "+this.connection.peer);const t=this.connection.peerConnection;if(!t)return;this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=()=>{};const n=t.signalingState!=="closed";let r=!1;const o=this.connection.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed"),(n||r)&&t.close()}async _makeOffer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createOffer(this.connection.options.constraints);Z.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Z.log("Set localDescription:",r,`for:${this.connection.peer}`);let o={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Wn.Data){const a=this.connection;o={...o,label:a.label,reliable:a.reliable,serialization:a.serialization}}n.socket.send({type:ct.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Ye.WebRTC,o),Z.log("Failed to setLocalDescription, ",o))}}catch(r){n.emitError(Ye.WebRTC,r),Z.log("Failed to createOffer, ",r)}}async _makeAnswer(){const t=this.connection.peerConnection,n=this.connection.provider;try{const r=await t.createAnswer();Z.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await t.setLocalDescription(r),Z.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:ct.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){n.emitError(Ye.WebRTC,o),Z.log("Failed to setLocalDescription, ",o)}}catch(r){n.emitError(Ye.WebRTC,r),Z.log("Failed to create answer, ",r)}}async handleSDP(t,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,o=this.connection.provider;Z.log("Setting remote description",n);const a=this;try{await r.setRemoteDescription(n),Z.log(`Set remoteDescription:${t} for:${this.connection.peer}`),t==="OFFER"&&await a._makeAnswer()}catch(u){o.emitError(Ye.WebRTC,u),Z.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(t){Z.log("handleCandidate:",t);try{await this.connection.peerConnection.addIceCandidate(t),Z.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(Ye.WebRTC,n),Z.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(t,n){if(Z.log(`add tracks from stream ${t.id} to peer connection`),!n.addTrack)return Z.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(r=>{n.addTrack(r,t)})}_addStreamToMediaConnection(t,n){Z.log(`add stream ${t.id} to media connection ${n.connectionId}`),n.addStream(t)}}class My extends $h.EventEmitter{emitError(t,n){Z.error("Error:",n),this.emit("error",new dk(`${t}`,n))}}class dk extends Error{constructor(t,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=t}}class Ly extends My{get open(){return this._open}constructor(t,n,r){super(),this.peer=t,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}var Lf;const Hs=class Hs extends Ly{get type(){return Wn.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(t,n,r){super(t,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Hs.ID_PREFIX+Wt.randomToken(),this._negotiator=new Fy(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Z.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Z.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(t){Z.log("Receiving stream",t),this._remoteStream=t,super.emit("stream",t)}handleMessage(t){const n=t.type,r=t.payload;switch(t.type){case ct.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case ct.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:Z.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(t,n={}){if(this._localStream){Z.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=t,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:t});const r=this.provider._getMessages(this.connectionId);for(const o of r)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Lf=new WeakMap,Ts(Hs,Lf,Hs.ID_PREFIX="mc_");let dl=Hs;class mk{constructor(t){this._options=t}_buildRequest(t){const n=this._options.secure?"https":"http",{host:r,port:o,path:a,key:u}=this._options,c=new URL(`${n}://${r}:${o}${a}${u}/${t}`);return c.searchParams.set("ts",`${Date.now()}${Math.random()}`),c.searchParams.set("version",zh.version),fetch(c.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const t=await this._buildRequest("id");if(t.status!==200)throw new Error(`Error. Status:${t.status}`);return t.text()}catch(t){Z.error("Error retrieving ID",t);let n="";throw this._options.path==="/"&&this._options.host!==Wt.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const t=await this._buildRequest("peers");if(t.status!==200){if(t.status===401){let n="";throw this._options.host===Wt.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${t.status}`)}return t.json()}catch(t){throw Z.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t)}}}var Bf,Uf;const ni=class ni extends Ly{get type(){return Wn.Data}constructor(t,n,r){super(t,n,r),this.connectionId=this.options.connectionId||ni.ID_PREFIX+Oy(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Fy(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(t){this.dataChannel=t,this.dataChannel.onopen=()=>{Z.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{Z.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{Z.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(t){if(t!=null&&t.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(t,n=!1){if(!this.open){this.emitError(ao.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(t,n)}async handleMessage(t){const n=t.payload;switch(t.type){case ct.Answer:await this._negotiator.handleSDP(t.type,n.sdp);break;case ct.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:Z.warn("Unrecognized message type:",t.type,"from peer:",this.peer);break}}};Bf=new WeakMap,Uf=new WeakMap,Ts(ni,Bf,ni.ID_PREFIX="dc_"),Ts(ni,Uf,ni.MAX_BUFFERED_AMOUNT=8388608);let ml=ni;class qh extends ml{get bufferSize(){return this._bufferSize}_initializeDataChannel(t){super._initializeDataChannel(t),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this._bufferSize=this._buffer.length)}_trySend(t){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>ml.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(t)}catch(n){return Z.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(t){if(t!=null&&t.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...t){super(...t),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class fc extends qh{close(t){super.close(t),this._chunkedData={}}constructor(t,n,r){super(t,n,r),this.chunker=new Ny,this.serialization=os.Binary,this._chunkedData={}}_handleDataMessage({data:t}){const n=Z_(t),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(t){const n=t.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:t.total};if(r.data[t.n]=new Uint8Array(t.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const o=ok(r.data);this._handleDataMessage({data:o})}}_send(t,n){const r=J_(t);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(t){const n=await t;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(t){const n=this.chunker.chunk(t);Z.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class gk extends qh{_handleDataMessage({data:t}){super.emit("data",t)}_send(t,n){this._bufferedSend(t)}constructor(...t){super(...t),this.serialization=os.None}}class _k extends qh{_handleDataMessage({data:t}){const n=this.parse(this.decoder.decode(t)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(t,n){const r=this.encoder.encode(this.stringify(t));if(r.byteLength>=Wt.chunkedMTU){this.emitError(ao.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...t){super(...t),this.serialization=os.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Gf;const Xs=class Xs extends My{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const t=Object.create(null);for(const[n,r]of this._connections)t[n]=r;return t}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(t,n){super(),this._serializers={raw:gk,json:_k,binary:fc,"binary-utf8":fc,default:fc},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(t&&t.constructor==Object?n=t:t&&(r=t.toString()),n={debug:0,host:Wt.CLOUD_HOST,port:Wt.CLOUD_PORT,path:"/",key:Xs.DEFAULT_KEY,token:Wt.randomToken(),config:Wt.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Wt.CLOUD_HOST?this._options.secure=Wt.isSecure():this._options.host==Wt.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Z.setLogFunction(this._options.logFunction),Z.logLevel=this._options.debug||0,this._api=new mk(n),this._socket=this._createServerConnection(),!Wt.supports.audioVideo&&!Wt.supports.data){this._delayedAbort(Ye.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Wt.validateId(r)){this._delayedAbort(Ye.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(Ye.ServerError,o))}_createServerConnection(){const t=new pk(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on(Un.Message,n=>{this._handleMessage(n)}),t.on(Un.Error,n=>{this._abort(Ye.SocketError,n)}),t.on(Un.Disconnected,()=>{this.disconnected||(this.emitError(Ye.Network,"Lost connection to server."),this.disconnect())}),t.on(Un.Close,()=>{this.disconnected||this._abort(Ye.SocketClosed,"Underlying socket is already closed.")}),t}_initialize(t){this._id=t,this.socket.start(t,this._options.token)}_handleMessage(t){const n=t.type,r=t.payload,o=t.src;switch(n){case ct.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ct.Error:this._abort(Ye.ServerError,r.msg);break;case ct.IdTaken:this._abort(Ye.UnavailableID,`ID "${this.id}" is taken`);break;case ct.InvalidKey:this._abort(Ye.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ct.Leave:Z.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case ct.Expire:this.emitError(Ye.PeerUnavailable,`Could not connect to peer ${o}`);break;case ct.Offer:{const a=r.connectionId;let u=this.getConnection(o,a);if(u&&(u.close(),Z.warn(`Offer received for existing Connection ID:${a}`)),r.type===Wn.Media){const m=new dl(o,this,{connectionId:a,_payload:r,metadata:r.metadata});u=m,this._addConnection(o,u),this.emit("call",m)}else if(r.type===Wn.Data){const m=new this._serializers[r.serialization](o,this,{connectionId:a,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});u=m,this._addConnection(o,u),this.emit("connection",m)}else{Z.warn(`Received malformed connection type:${r.type}`);return}const c=this._getMessages(a);for(const m of c)u.handleMessage(m);break}default:{if(!r){Z.warn(`You received a malformed message from ${o} of type ${n}`);return}const a=r.connectionId,u=this.getConnection(o,a);u&&u.peerConnection?u.handleMessage(t):a?this._storeMessage(a,t):Z.warn("You received an unrecognized message:",t);break}}}_storeMessage(t,n){this._lostMessages.has(t)||this._lostMessages.set(t,[]),this._lostMessages.get(t).push(n)}_getMessages(t){const n=this._lostMessages.get(t);return n?(this._lostMessages.delete(t),n):[]}connect(t,n={}){if(n={serialization:"default",...n},this.disconnected){Z.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](t,this,n);return this._addConnection(t,r),r}call(t,n,r={}){if(this.disconnected){Z.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){Z.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new dl(t,this,{...r,_stream:n});return this._addConnection(t,o),o}_addConnection(t,n){Z.log(`add connection ${n.type}:${n.connectionId} to peerId:${t}`),this._connections.has(t)||this._connections.set(t,[]),this._connections.get(t).push(n)}_removeConnection(t){const n=this._connections.get(t.peer);if(n){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}this._lostMessages.delete(t.connectionId)}getConnection(t,n){const r=this._connections.get(t);if(!r)return null;for(const o of r)if(o.connectionId===n)return o;return null}_delayedAbort(t,n){setTimeout(()=>{this._abort(t,n)},0)}_abort(t,n){Z.error("Aborting!"),this.emitError(t,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Z.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const t of this._connections.keys())this._cleanupPeer(t),this._connections.delete(t);this.socket.removeAllListeners()}_cleanupPeer(t){const n=this._connections.get(t);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const t=this.id;Z.log(`Disconnect peer with ID:${t}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=t,this._id=null,this.emit("disconnected",t)}reconnect(){if(this.disconnected&&!this.destroyed)Z.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Z.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(t=n=>{}){this._api.listAllPeers().then(n=>t(n)).catch(n=>this._abort(Ye.ServerError,n))}};Gf=new WeakMap,Ts(Xs,Gf,Xs.DEFAULT_KEY="peerjs");let gl=Xs;const yk=1e3;class xk extends Ee.Component{constructor(){super(...arguments);Oe(this,"state",{token:null,copied:!1});Oe(this,"_destroy",()=>{var n,r,o,a;(r=(n=this.peer)==null?void 0:n.destroy)==null||r.call(n),(a=(o=this.conn)==null?void 0:o.close)==null||a.call(o)});Oe(this,"_copyLink",n=>{n.preventDefault(),navigator.clipboard.writeText(n.target.href),this.setState({copied:!0}),setTimeout(()=>{this.setState({copied:!1})},yk)})}render(){const{needsRom:n}=this.props,{token:r,copied:o}=this.state;return W.jsx(Vh,{children:o?W.jsx("span",{children:Ve.copied}):n?W.jsx("span",{children:Ve.dragARomHere}):r?W.jsxs("span",{children:[Ve.shareThis," ",W.jsx("a",{href:`?token=${r}#/join`,onClick:this._copyLink,tabIndex:"-1",children:Ve.link})," ",Ve.toPlayWithSomeone]}):W.jsx("span",{children:Ve.loading})})}componentDidUpdate(n){const{needsRom:r,onSyncer:o,onError:a}=this.props;if(r||this.peer||this.conn)return;const u=c=>{this._destroy(),this.peer=null,this.conn=null,this.setState({token:null,copied:!1}),a(c)};this.peer=new gl,this.peer.on("open",c=>{c!=null&&this.setState({token:this.peer.id,isDown:!1})}).on("connection",c=>{if(this.conn&&this.conn.open){c.close();return}c.on("close",u),c.on("error",u),c.on("open",()=>{this.conn=c,o(new jI(this.conn))})}).on("close",u).on("disconnected",u).on("error",u)}}class vk extends Ee.Component{render(){return W.jsx(Vh,{children:W.jsx("span",{children:Ve.connecting})})}componentDidMount(){const{onSyncer:t,onError:n}=this.props;this.peer=new gl,this.peer.on("open",()=>{this.conn=this.peer.connect(this.props.token,{reliable:!0}),this.conn.on("open",()=>{t(new XI(this.conn))}).on("close",n).on("error",n)}).on("connection",r=>{r.close()}).on("disconnected",n).on("close",n).on("error",n)}}var By={},hc={exports:{}},pc,Xm;function Sk(){if(Xm)return pc;Xm=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return pc=e,pc}var dc,Ym;function Rk(){if(Ym)return dc;Ym=1;var e=Sk();function t(){}function n(){}return n.resetWarningCache=t,dc=function(){function r(u,c,m,_,v,R){if(R!==e){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}r.isRequired=r;function o(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},dc}var Km;function Uy(){return Km||(Km=1,hc.exports=Rk()()),hc.exports}var mc={},Zm;function Ck(){return Zm||(Zm=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Audio=function(u){return r.default.createElement("svg",{height:u.height,width:u.width,fill:u.color,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{transform:"matrix(1 0 0 -1 0 80)"},r.default.createElement("rect",{width:"10",height:"20",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"15",width:"10",height:"80",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"30",width:"10",height:"50",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"45",width:"10",height:"30",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"}))))}})}(mc)),mc}var gc={},Jm;function Ek(){return Jm||(Jm=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.BallTriangle=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.BallTriangle=function(u){return r.default.createElement("svg",{height:u.height,width:u.width,stroke:u.color,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{cx:"5",cy:"50",r:"5"},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"27",cy:"5",r:"5"},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"49",cy:"50",r:"5"},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})))))}})}(gc)),gc}var _c={},Qm;function Tk(){return Qm||(Qm=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Bars=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Bars=function(u){return r.default.createElement("svg",{width:u.height,height:u.width,fill:u.color,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}})}(_c)),_c}var yc={},eg;function Ak(){return eg||(eg=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Circles=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Circles=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,viewBox:"0 0 135 135",xmlns:"http://www.w3.org/2000/svg",fill:u.color},r.default.createElement("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"-360 67 67",dur:"2.5s",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"360 67 67",dur:"8s",repeatCount:"indefinite"})))}})}(yc)),yc}var xc={},tg;function wk(){return tg||(tg=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Grid=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,viewBox:"0 0 105 105",fill:u.color},r.default.createElement("circle",{cx:"12.5",cy:"12.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"12.5",cy:"52.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"100ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"12.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"300ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"52.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"600ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"12.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"800ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"52.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"400ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"12.5",cy:"92.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"700ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"92.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"500ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"92.5",r:"12.5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"200ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})))}})}(xc)),xc}var vc={},ng;function Ik(){return ng||(ng=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Hearts=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Hearts=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",fill:u.color},r.default.createElement("path",{d:"M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.717-6.002 11.47-7.65 17.305-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z",attributeName:"fill-opacity",from:"0",to:".5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.592-2.32 17.307 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z",attributeName:"fill-opacity",from:"0",to:".5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0.7s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"}))}})}(vc)),vc}var Sc={},rg;function kk(){return rg||(rg=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Oval=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Oval=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:u.color},r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),r.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))}})}(Sc)),Sc}var Rc={},ig;function bk(){return ig||(ig=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Puff=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Puff=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",stroke:u.color},r.default.createElement("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2"},r.default.createElement("circle",{cx:"22",cy:"22",r:"1"},r.default.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:"1"},r.default.createElement("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}))))}})}(Rc)),Rc}var Cc={},sg;function Dk(){return sg||(sg=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Rings=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Rings=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",stroke:u.color},r.default.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{cx:"22",cy:"22",r:"6",strokeOpacity:"0"},r.default.createElement("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:"6",strokeOpacity:"0"},r.default.createElement("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeWidth",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:"8"},r.default.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"}))))}})}(Cc)),Cc}var Ec={},og;function Nk(){return og||(og=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TailSpin=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.TailSpin=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("defs",null,r.default.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},r.default.createElement("stop",{stopColor:u.color,stopOpacity:"0",offset:"0%"}),r.default.createElement("stop",{stopColor:u.color,stopOpacity:".631",offset:"63.146%"}),r.default.createElement("stop",{stopColor:u.color,offset:"100%"}))),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)"},r.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:u.color,strokeWidth:"2"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),r.default.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:"1"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})))))}})}(Ec)),Ec}var Tc={},ag;function Ok(){return ag||(ag=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDots=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.ThreeDots=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:u.color},r.default.createElement("circle",{cx:"15",cy:"15",r:"15"},r.default.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"60",cy:"15",r:"9",attributeName:"fillOpacity",from:"1",to:"0.3"},r.default.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"105",cy:"15",r:"15"},r.default.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}})}(Tc)),Tc}var Ac={},lg;function Pk(){return lg||(lg=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Watch=function(u){return r.default.createElement("svg",{width:u.width,height:u.height,version:"1.1",id:"L2",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100",xmlSpace:"preserve"},r.default.createElement("circle",{fill:"none",stroke:u.color,strokeWidth:"4",strokeMiterlimit:"10",cx:"50",cy:"50",r:"48"}),r.default.createElement("line",{fill:"none",strokeLinecap:"round",stroke:u.color,strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"85",y2:"50.5"},r.default.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})),r.default.createElement("line",{fill:"none",strokeLinecap:"round",stroke:u.color,strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"49.5",y2:"74"},r.default.createElement("animateTransform",{attributeName:"transform",dur:"15s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})))}})}(Ac)),Ac}var wc={},ug;function Fk(){return ug||(ug=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RevolvingDot=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.RevolvingDot=function(u){return r.default.createElement("svg",{version:"1.1",width:u.width,height:u.height,id:"L3",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",xmlSpace:"preserve"},r.default.createElement("circle",{fill:"none",stroke:u.color,strokeWidth:"4",cx:"50",cy:"50",r:"44",style:{opacity:.5}}),r.default.createElement("circle",{fill:u.color,stroke:u.color,strokeWidth:"3",cx:"8",cy:"54",r:"6"},r.default.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 48",to:"360 50 52",repeatCount:"indefinite"})))}})}(wc)),wc}var Ic={};const Mk=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Lk=Vf(Mk);var cg;function Bk(){return cg||(cg=1,function(e){(function(t,n){n(e,Ee,Lk)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CradleLoader=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.CradleLoader=function(){return r.default.createElement("div",{"aria-busy":"true","aria-label":"Loading",role:"progressbar",className:"container"},r.default.createElement("div",{className:"react-spinner-loader-swing"},r.default.createElement("div",{className:"react-spinner-loader-swing-l"}),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",{className:"react-spinner-loader-swing-r"})),r.default.createElement("div",{className:"react-spinner-loader-shadow"},r.default.createElement("div",{className:"react-spinner-loader-shadow-l"}),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",{className:"react-spinner-loader-shadow-r"})))}})}(Ic)),Ic}var kc={};const Uk=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Gk=Vf(Uk);var fg;function Vk(){return fg||(fg=1,function(e){(function(t,n){n(e,Ee,Gk)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.Triangle=function(u){return r.default.createElement("div",{className:"react-spinner-loader-svg"},r.default.createElement("svg",{id:"triangle",width:u.height,height:u.height,viewBox:"-3 -4 39 39"},r.default.createElement("polygon",{fill:"transparent",stroke:u.color,strokeWidth:"1",points:"16,0 32,32 0,32"})))}})}(kc)),kc}var bc={};const Wk=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),$k=Vf(Wk);var hg;function zk(){return hg||(hg=1,function(e){(function(t,n){n(e,Ee,Uy(),$k)})(je,function(t,n,r){Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;var o=u(n),a=u(r);function u(m){return m&&m.__esModule?m:{default:m}}var c=t.Plane=function(_){return o.default.createElement("svg",{className:"react-spinner-loader-svg-calLoader",xmlns:"http://www.w3.org/2000/svg",width:"230",height:"230"},o.default.createElement("path",{className:"react-spinner-loader-cal-loader__path",style:{stroke:_.secondaryColor},d:"M86.429 40c63.616-20.04 101.511 25.08 107.265 61.93 6.487 41.54-18.593 76.99-50.6 87.643-59.46 19.791-101.262-23.577-107.142-62.616C29.398 83.441 59.945 48.343 86.43 40z",fill:"none",stroke:"#0099cc",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"10 10 10 10 10 10 10 432",strokeDashoffset:"77"}),o.default.createElement("path",{className:"cal-loader__plane",style:{fill:_.color},d:"M141.493 37.93c-1.087-.927-2.942-2.002-4.32-2.501-2.259-.824-3.252-.955-9.293-1.172-4.017-.146-5.197-.23-5.47-.37-.766-.407-1.526-1.448-7.114-9.773-4.8-7.145-5.344-7.914-6.327-8.976-1.214-1.306-1.396-1.378-3.79-1.473-1.036-.04-2-.043-2.153-.002-.353.1-.87.586-1 .952-.139.399-.076.71.431 2.22.241.72 1.029 3.386 1.742 5.918 1.644 5.844 2.378 8.343 2.863 9.705.206.601.33 1.1.275 1.125-.24.097-10.56 1.066-11.014 1.032a3.532 3.532 0 0 1-1.002-.276l-.487-.246-2.044-2.613c-2.234-2.87-2.228-2.864-3.35-3.309-.717-.287-2.82-.386-3.276-.163-.457.237-.727.644-.737 1.152-.018.39.167.805 1.916 4.373 1.06 2.166 1.964 4.083 1.998 4.27.04.179.004.521-.076.75-.093.228-1.109 2.064-2.269 4.088-1.921 3.34-2.11 3.711-2.123 4.107-.008.25.061.557.168.725.328.512.72.644 1.966.676 1.32.029 2.352-.236 3.05-.762.222-.171 1.275-1.313 2.412-2.611 1.918-2.185 2.048-2.32 2.45-2.505.241-.111.601-.232.82-.271.267-.058 2.213.201 5.912.8 3.036.48 5.525.894 5.518.914 0 .026-.121.306-.27.638-.54 1.198-1.515 3.842-3.35 9.021-1.029 2.913-2.107 5.897-2.4 6.62-.703 1.748-.725 1.833-.594 2.286.137.46.45.833.872 1.012.41.177 3.823.24 4.37.085.852-.25 1.44-.688 2.312-1.724 1.166-1.39 3.169-3.948 6.771-8.661 5.8-7.583 6.561-8.49 7.387-8.702.233-.065 2.828-.056 5.784.011 5.827.138 6.64.09 8.62-.5 2.24-.67 4.035-1.65 5.517-3.016 1.136-1.054 1.135-1.014.207-1.962-.357-.38-.767-.777-.902-.893z",fill:"#000033"}))};c.propTypes={secondaryColor:a.default.string,color:a.default.string},c.defaultProps={secondaryColor:"grey",color:"#FFA500"}})}(bc)),bc}var Dc={},pg;function qk(){return pg||(pg=1,function(e){(function(t,n){n(e,Ee)})(je,function(t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MutatingDot=void 0;var r=o(n);function o(a){return a&&a.__esModule?a:{default:a}}t.MutatingDot=function(u){return r.default.createElement("svg",{id:"goo-loader",width:u.width,height:u.height},r.default.createElement("filter",{id:"fancy-goo"},r.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"6",result:"blur"}),r.default.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),r.default.createElement("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})),r.default.createElement("g",{filter:"url(#fancy-goo)"},r.default.createElement("animateTransform",{id:"mainAnim",attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 50 50",to:"359 50 50",dur:"1.2s",repeatCount:"indefinite"}),r.default.createElement("circle",{cx:"50%",cy:"40",r:"11"},r.default.createElement("animate",{id:"cAnim1",attributeType:"XML",attributeName:"cy",dur:"0.6s",begin:"0;cAnim1.end+0.2s",calcMode:"spline",values:"40;20;40",keyTimes:"0;0.3;1",keySplines:"0.175, 0.885, 0.320, 1.5; 0.175, 0.885, 0.320, 1.5"})),r.default.createElement("circle",{cx:"50%",cy:"60",r:"11"},r.default.createElement("animate",{id:"cAnim2",attributeType:"XML",attributeName:"cy",dur:"0.6s",begin:"0.4s;cAnim2.end+0.2s",calcMode:"spline",values:"60;80;60",keyTimes:"0;0.3;1",keySplines:"0.175, 0.885, 0.320, 1.5;0.175, 0.885, 0.320, 1.5"}))))}})}(Dc)),Dc}(function(e){(function(t,n){n(e,Ee,Uy(),Ck(),Ek(),Tk(),Ak(),wk(),Ik(),kk(),bk(),Dk(),Nk(),Ok(),Pk(),Fk(),Bk(),Vk(),zk(),qk())})(je,function(t,n,r,o,a,u,c,m,_,v,R,b,L,H,J,E,T,D,P,q){Object.defineProperty(t,"__esModule",{value:!0});var B=ne(n),Y=ne(r);function ne(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}function ue(Ue,se){if(!(Ue instanceof se))throw new TypeError("Cannot call a class as a function")}var re=function(){function Ue(se,Ae){for(var nt=0;nt<Ae.length;nt++){var le=Ae[nt];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(se,le.key,le)}}return function(se,Ae,nt){return Ae&&Ue(se.prototype,Ae),nt&&Ue(se,nt),se}}();function tt(Ue,se){if(!Ue)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:Ue}function it(Ue,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);Ue.prototype=Object.create(se&&se.prototype,{constructor:{value:Ue,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(Ue,se):Ue.__proto__=se)}var xt=function(Ue){it(se,Ue);function se(){var Ae,nt,le,st;ue(this,se);for(var Cn=arguments.length,Ht=Array(Cn),xe=0;xe<Cn;xe++)Ht[xe]=arguments[xe];return st=(nt=(le=tt(this,(Ae=se.__proto__||Object.getPrototypeOf(se)).call.apply(Ae,[this].concat(Ht))),le),le.svgRenderer=function(Ze){switch(Ze){case"Audio":return B.default.createElement(o.Audio,le.props);case"Ball-Triangle":return B.default.createElement(a.BallTriangle,le.props);case"Bars":return B.default.createElement(u.Bars,le.props);case"Circles":return B.default.createElement(c.Circles,le.props);case"Grid":return B.default.createElement(m.Grid,le.props);case"Hearts":return B.default.createElement(_.Hearts,le.props);case"Oval":return B.default.createElement(v.Oval,le.props);case"Puff":return B.default.createElement(R.Puff,le.props);case"Rings":return B.default.createElement(b.Rings,le.props);case"TailSpin":return B.default.createElement(L.TailSpin,le.props);case"ThreeDots":return B.default.createElement(H.ThreeDots,le.props);case"Watch":return B.default.createElement(J.Watch,le.props);case"RevolvingDot":return B.default.createElement(E.RevolvingDot,le.props);case"CradleLoader":return B.default.createElement(T.CradleLoader,le.props);case"Triangle":return B.default.createElement(D.Triangle,le.props);case"Plane":return B.default.createElement(P.Plane,le.props);case"MutatingDot":return B.default.createElement(q.MutatingDot,le.props);default:return B.default.createElement("div",null,B.default.createElement("span",{style:{color:"Green"}},"LOADING"),B.default.createElement("small",null,B.default.createElement("i",null,B.default.createElement("br",null),"Note:No specific svg type exist")))}},nt),tt(le,st)}return re(se,[{key:"render",value:function(){var nt=this.props.type;return B.default.createElement("div",{className:this.props.style},this.svgRenderer(nt))}}]),se}(B.default.Component);xt.propTypes={color:Y.default.string,type:Y.default.string,height:Y.default.oneOfType([Y.default.number,Y.default.string]),width:Y.default.oneOfType([Y.default.number,Y.default.string]),style:Y.default.shape({})},xt.defaultProps={color:"#71238",type:"Audio",height:80,width:80},t.default=xt})})(By);var jk=By;const Hk=_i(jk);class Xk extends Ee.Component{constructor(){super(...arguments);Oe(this,"_onAssign",()=>{this.props.isAssigning?this.props.onAssignCancel():this.props.onAssignStart()})}render(){const{displayName:n,isAssigning:r,verticalMirror:o=!1}=this.props;return W.jsx("button",{type:"button",className:"nes-btn is-primary",onClick:this._onAssign,children:W.jsx("span",{style:o?{transform:"scale(1, -1)",display:"inline-block"}:null,children:r?"...":n})})}}const Yk="_settings_n5lne_1",Kk="_closeButton_n5lne_9",Zk="_setDefaultsButton_n5lne_16",Nc={settings:Yk,closeButton:Kk,setDefaultsButton:Zk},Jk=1920,Qk=[{name:"BUTTON_LEFT",displayName:"<"},{name:"BUTTON_RIGHT",displayName:">"},{name:"BUTTON_UP",displayName:"v",verticalMirror:!0},{name:"BUTTON_DOWN",displayName:"v"},{name:"BUTTON_B",displayName:"B"},{name:"BUTTON_A",displayName:"A"},{name:"BUTTON_SELECT",displayName:"SELECT"},{name:"BUTTON_START",displayName:"START"},{name:"SWAP",displayName:"<SWAP>"}];class eb extends Ee.Component{constructor(){super(...arguments);Oe(this,"state",{mappingButton:null});Oe(this,"_onClose",()=>{ve.emit("closeSettings")});Oe(this,"_onSetDefaults",()=>{Xe.reset(),this._notify()});Oe(this,"_onAssign",()=>{this.props.isAssigning||(this.props.onAssignStart(),window.addEventListener("keydown",this._onKeyDown))});Oe(this,"_onKeyDown",n=>{var a;if(!this.state.mappingButton)return;n.preventDefault();const r=Gr.findKey(Xe.options.input,u=>u===this.state.mappingButton),o=(a=n.key)==null?void 0:a.toLowerCase();o&&(delete Xe.options.input[r],Xe.options.input[o]=this.state.mappingButton,Xe.save(),this._notify(),this.setState({mappingButton:null}))});Oe(this,"_onResize",()=>{const n=window.innerWidth,r=document.querySelector("#settings"),o=n/Jk;r.style.transform=`scale(${o})`})}componentDidMount(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("resize",this._onResize),this._onResize()}componentWillUnmount(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("resize",this._onResize)}render(){return W.jsxs("div",{className:Nc.settings,id:"settings",children:[W.jsx("button",{type:"button",className:Nt(Nc.closeButton,"nes-btn","is-error"),onClick:this._onClose,children:"x"}),W.jsx("button",{type:"button",className:Nt(Nc.setDefaultsButton,"nes-btn","is-warning"),onClick:this._onSetDefaults,children:Ve.setDefaults}),W.jsxs("section",{className:Nt("nes-container","is-dark","with-title"),children:[W.jsx("div",{className:"title",children:Ve.sound}),W.jsx("div",{children:Xe.soundOptions.map(n=>W.jsxs("label",{children:[W.jsx("input",{type:"radio",className:"nes-radio is-dark",name:"sound",checked:Xe.options.sound===n.name,onChange:r=>this._update("sound",n.name)}),W.jsx("span",{children:n.name})]},n.name))})]}),W.jsx("br",{}),W.jsx("br",{}),W.jsxs("section",{className:Nt("nes-container","is-dark","with-title"),children:[W.jsx("div",{className:"title",children:Ve.buffering}),W.jsx("div",{children:Xe.bufferingOptions.map(n=>W.jsxs("label",{children:[W.jsx("input",{type:"radio",className:"nes-radio is-dark",name:"buffering",checked:Xe.options.buffering===n.name,onChange:()=>this._update("buffering",n.name)}),W.jsx("span",{children:n.name})]},n.name))})]}),W.jsx("br",{}),W.jsx("br",{}),W.jsxs("section",{className:Nt("nes-container","is-dark","with-title"),children:[W.jsx("div",{className:"title",children:Ve.crtEffect}),W.jsx("div",{children:[!0,!1].map(n=>W.jsxs("label",{children:[W.jsx("input",{type:"radio",className:"nes-radio is-dark",name:"crt",checked:Xe.options.crt===n,onChange:()=>this._update("crt",n)}),W.jsx("span",{children:Ve[`enabled_${n}`]})]},n))})]}),W.jsx("br",{}),W.jsx("br",{}),W.jsxs("section",{className:Nt("nes-container","is-dark","with-title"),children:[W.jsx("div",{className:"title",children:Ve.input}),Qk.map(n=>W.jsx(Xk,{name:n.name,verticalMirror:n.verticalMirror,displayName:n.displayName,isAssigning:this.state.mappingButton===n.name,onAssignStart:()=>this.setState({mappingButton:n.name}),onAssignCancel:()=>this.setState({mappingButton:null})},n.name))]})]})}_update(n,r){Gr.set(Xe.options,n,r),Xe.save(),this._notify()}_notify(){ve.emit("volume",Xe.sound.gain),ve.emit("keymap");const n=document.querySelector("#container");Xe.options.crt?n.classList.add("crt"):n.classList.remove("crt"),this.forceUpdate()}}const tb="_overlay_chi9k_1",nb="_show_chi9k_25",rb="_loader_chi9k_35",ib="_dark_chi9k_51",sb="_message_chi9k_61",Fs={overlay:tb,show:nb,loader:rb,dark:ib,message:sb};class ob extends Ee.Component{constructor(){super(...arguments);Oe(this,"state",{isSettingsMenuOpen:!1,isLoading:!1,message:null})}render(){const{isVisible:n}=this,{isSettingsMenuOpen:r,isLoading:o,message:a}=this.state;return W.jsx("div",{className:Nt(Fs.overlay,n&&Fs.show),children:W.jsx("div",{className:Nt(Fs.loader,a==null&&Fs.dark),children:r?W.jsx(eb,{}):a!=null?W.jsx("div",{className:Fs.message,children:a}):o&&W.jsx(Hk,{type:"Watch",color:"#CCCCCC",height:"50",width:"50"})})})}componentDidMount(){ve.on("isLoading",n=>{this.setState({isLoading:n})}).on("message",n=>{this.setState({isLoading:!1,message:n})}).on("openSettings",()=>{this.setState({isSettingsMenuOpen:!0})}).on("closeSettings",()=>{this.setState({isSettingsMenuOpen:!1})})}componentWillUnmount(){ve.removeListener("isLoading"),ve.removeListener("message"),ve.removeListener("openSettings"),ve.removeListener("closeSettings")}get isVisible(){return this.state.isSettingsMenuOpen||this.state.isLoading||this.state.message!=null}}const ab=256,lb=240;class ub extends Ee.Component{render(){return W.jsx("canvas",{style:{width:"100%",height:"100%",borderRadius:8},width:ab,height:lb,ref:t=>{t&&this._initCanvas(t)}})}componentWillUnmount(){cancelAnimationFrame(this._frameId)}_initCanvas(t){const n=this,r=t.getContext("2d");function o(u){let c=u.canvas.width,m=u.canvas.height,_=u.createImageData(c,m),v=new Uint32Array(_.data.buffer),R=v.length,b=0;for(;b<R;)v[b++]=(255*Math.random()|0)<<24;u.putImageData(_,0,0)}let a=!0;(function u(){if(a=!a,a){n._frameId=requestAnimationFrame(u);return}o(r),n._frameId=requestAnimationFrame(u)})()}}const cb=()=>{let e;e=window.location.href,e=e.replace(e.substring(e.indexOf("?")),""),e=e.substring(e.indexOf("//")+2),e=e.substring(e.indexOf("/")),window.history.replaceState({},"",e)},fb=(e,t)=>`${e.substring(0,t)}${e.length>t?"…":""}`,Gy={cleanQueryString:cb,ellipsize:fb},hb="_controls_5sq6n_1",pb="_title_5sq6n_23",db="_controller_5sq6n_31",mb="_dpad_5sq6n_41",gb="_buttons_5sq6n_53",_b="_centered_5sq6n_65",_n={controls:hb,title:pb,controller:db,dpad:mb,buttons:gb,centered:_b},yb=100,xb={arrowleft:"<",arrowright:">",arrowup:"~v",arrowdown:"v"," ":"[space]"};class vb extends Ee.Component{constructor(){super(...arguments);Oe(this,"state",{player:1});Oe(this,"_onGamepadConnected",n=>{this.usesGamepad=!0,this.forceUpdate(),this.blink()})}render(){const n=this._keyFor("BUTTON_UP"),r=n==="~v";return W.jsxs("div",{className:_n.controls,children:[W.jsx("b",{className:Nt(_n.title,_n.centered),children:Ve.controls}),W.jsxs("b",{className:Nt(_n.title,_n.centered),children:[this.state.player,"P"]}),this.state.player===1?W.jsxs("b",{className:Nt(_n.dpad,_n.centered),children:["(",Ve.swap,":"," ",this.usesGamepad?Ve.swapButton:this._keyFor("SWAP"),")"]}):W.jsx("br",{}),W.jsx("br",{}),this.usesGamepad?W.jsx("div",{className:_n.centered,children:Ve.yourController}):W.jsxs(W.Fragment,{children:[W.jsxs("div",{className:_n.controller,children:[W.jsxs("span",{className:_n.dpad,children:[W.jsx("span",{children:this._keyFor("BUTTON_LEFT")})," ",W.jsx("span",{children:this._keyFor("BUTTON_RIGHT")})," ",W.jsx("span",{style:r?{transform:"scale(1, -1)",display:"inline-block"}:null,children:r?"v":n})," ",W.jsx("span",{children:this._keyFor("BUTTON_DOWN")})]}),W.jsxs("span",{className:_n.buttons,children:[this._keyFor("BUTTON_B")," ",this._keyFor("BUTTON_A")]})]}),W.jsxs("div",{className:_n.centered,children:[this._keyFor("BUTTON_SELECT")," ",this._keyFor("BUTTON_START")]})]})]})}blink(){const n=document.querySelector("#root");n.classList.remove("blink"),setTimeout(()=>n.classList.add("blink"),yb)}componentDidMount(){ve.on("keymap",()=>{ve.emit("keymap-updated"),this.forceUpdate(),this.blink()}).on("player",n=>{this.setState({player:n}),this.blink()}).on("gamepad",this._onGamepadConnected).on("reset",()=>{this.setState({player:1})})}componentWillUnmount(){ve.removeListener("keymap")}_keyFor(n){const r=Gr.findKey(Xe.options.input,o=>o===n);return r?this._format(r):"[?]"}_format(n){return xb[n]||(n.length===1?n.toUpperCase():`[${Gy.ellipsize(n,6)}]`)}}const Sb="_button_1wvr1_1",Rb={button:Sb};class Cb extends Ee.Component{constructor(){super(...arguments);Oe(this,"_onClick",()=>{ve.emit("openSettings")})}render(){return W.jsx("div",{className:Rb.button,children:W.jsx("button",{type:"button",tabIndex:"-1",className:"nes-btn",onClick:this._onClick,children:Ve.settings})})}}const Eb="_app_1jatc_1",Tb="_main_1jatc_13",Ab="_gameContainer_1jatc_27",wb="_overlay_1jatc_37",Ib="_controls_1jatc_49",kb="_menu_1jatc_61",Ui={app:Eb,main:Tb,gameContainer:Ab,overlay:wb,controls:Ib,menu:kb},bb=/Chrome/i.test(navigator.userAgent)||/Chromium/i.test(navigator.userAgent),Oc=bb;class dg extends Ee.Component{constructor(){super(...arguments);Oe(this,"state",{rom:null,syncer:null});Oe(this,"_onSyncer",n=>{this.setState({syncer:n}),n.on("rom",r=>{this._loadRom(r,()=>n.initializeEmulator(this.emulator))}),n.on("start",()=>this.emulator&&this.emulator.start()),n.initializeRom(this.state.rom)});Oe(this,"_onFileDrop",n=>{n.preventDefault();const r=Gr.first(n.dataTransfer.files),o=new FileReader;r&&(o.onload=a=>{const u=a.target.result;this.state.syncer?this.state.syncer.updateRom(u):(this._loadRom(u),Oc||ve.emit("message",Ve.pressStart))},o.readAsArrayBuffer(r))});Oe(this,"_ignore",n=>{n.stopPropagation(),n.preventDefault()});Oe(this,"_onStartPressed",()=>{if(!this.state.syncer){this.emulator!=null&&!Oc&&(this.emulator.start(),ve.emit("message",null));return}this.state.syncer.onStartPressed()});Oe(this,"_onError",(n,r=!0)=>{this.setState({rom:null}),ve.emit("message",(n==null?void 0:n.message)||(typeof n=="string"?n:Ve.errors.connectionFailed)),r&&(ve.emit("reset"),this.setState({syncer:null}),Gy.cleanQueryString(),window.location.href="#/")})}render(){const{token:n}=this.props,{rom:r,syncer:o}=this.state;return W.jsxs("div",{className:Ui.app,children:[o?W.jsx(Vh,{children:Ve.connected}):n?W.jsx(vk,{onSyncer:this._onSyncer,onError:this._onError,token:n}):W.jsx(xk,{onSyncer:this._onSyncer,onError:this._onError,needsRom:!r}),W.jsx("div",{className:Ui.main,children:W.jsxs("section",{className:Nt(Ui.gameContainer,"nes-container","is-dark","with-title"),children:[W.jsx("div",{className:Ui.overlay,children:W.jsx(ob,{})}),r?W.jsx(II,{rom:r,syncer:o,onStartPressed:this._onStartPressed,onError:this._onError,ref:a=>this.emulator=a}):W.jsx(ub,{})]})}),W.jsx("div",{className:Ui.controls,children:W.jsx(vb,{})}),W.jsx("div",{className:Ui.menu,children:W.jsx(Cb,{})})]})}componentDidMount(){window.addEventListener("dragover",this._ignore),window.addEventListener("dragenter",this._ignore),window.addEventListener("drop",this._onFileDrop),Xe.options.crt&&document.querySelector("#container").classList.add("crt")}componentWillUnmount(){window.removeEventListener("dragover",this._ignore),window.removeEventListener("dragenter",this._ignore),window.removeEventListener("drop",this._onFileDrop)}_loadRom(n,r=Gr.noop,o=Oc){ve.emit("message",null),this.setState({rom:n},()=>{r(),o&&this.emulator.start()})}}const Vy="%[a-f0-9]{2}",mg=new RegExp("("+Vy+")|([^%]+?)","gi"),gg=new RegExp("("+Vy+")+","gi");function Ff(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],Ff(n),Ff(r))}function Db(e){try{return decodeURIComponent(e)}catch{let t=e.match(mg)||[];for(let n=1;n<t.length;n++)e=Ff(t,n).join(""),t=e.match(mg)||[];return e}}function Nb(e){const t={"%FE%FF":"��","%FF%FE":"��"};let n=gg.exec(e);for(;n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{const o=Db(n[0]);o!==n[0]&&(t[n[0]]=o)}n=gg.exec(e)}t["%C2"]="�";const r=Object.keys(t);for(const o of r)e=e.replace(new RegExp(o,"g"),t[o]);return e}function Ob(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return Nb(e)}}function Wy(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const n=e.indexOf(t);return n===-1?[]:[e.slice(0,n),e.slice(n+t.length)]}function Pb(e,t){const n={};if(Array.isArray(t))for(const r of t){const o=Object.getOwnPropertyDescriptor(e,r);o!=null&&o.enumerable&&Object.defineProperty(n,r,o)}else for(const r of Reflect.ownKeys(e)){const o=Object.getOwnPropertyDescriptor(e,r);if(o.enumerable){const a=e[r];t(r,a,e)&&Object.defineProperty(n,r,o)}}return n}const Fb=e=>e==null,Mb=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Mf=Symbol("encodeFragmentIdentifier");function Lb(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const o=n.length;return r===void 0||e.skipNull&&r===null||e.skipEmptyString&&r===""?n:r===null?[...n,[rt(t,e),"[",o,"]"].join("")]:[...n,[rt(t,e),"[",rt(o,e),"]=",rt(r,e)].join("")]};case"bracket":return t=>(n,r)=>r===void 0||e.skipNull&&r===null||e.skipEmptyString&&r===""?n:r===null?[...n,[rt(t,e),"[]"].join("")]:[...n,[rt(t,e),"[]=",rt(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>r===void 0||e.skipNull&&r===null||e.skipEmptyString&&r===""?n:r===null?[...n,[rt(t,e),":list="].join("")]:[...n,[rt(t,e),":list=",rt(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(r,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?r:(o=o===null?"":o,r.length===0?[[rt(n,e),t,rt(o,e)].join("")]:[[r,rt(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>r===void 0||e.skipNull&&r===null||e.skipEmptyString&&r===""?n:r===null?[...n,rt(t,e)]:[...n,[rt(t,e),"=",rt(r,e)].join("")]}}function Bb(e){let t;switch(e.arrayFormat){case"index":return(n,r,o)=>{if(t=/\[(\d*)]$/.exec(n),n=n.replace(/\[\d*]$/,""),!t){o[n]=r;return}o[n]===void 0&&(o[n]={}),o[n][t[1]]=r};case"bracket":return(n,r,o)=>{if(t=/(\[])$/.exec(n),n=n.replace(/\[]$/,""),!t){o[n]=r;return}if(o[n]===void 0){o[n]=[r];return}o[n]=[...o[n],r]};case"colon-list-separator":return(n,r,o)=>{if(t=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!t){o[n]=r;return}if(o[n]===void 0){o[n]=[r];return}o[n]=[...o[n],r]};case"comma":case"separator":return(n,r,o)=>{const a=typeof r=="string"&&r.includes(e.arrayFormatSeparator),u=typeof r=="string"&&!a&&ar(r,e).includes(e.arrayFormatSeparator);r=u?ar(r,e):r;const c=a||u?r.split(e.arrayFormatSeparator).map(m=>ar(m,e)):r===null?r:ar(r,e);o[n]=c};case"bracket-separator":return(n,r,o)=>{const a=/(\[])$/.test(n);if(n=n.replace(/\[]$/,""),!a){o[n]=r&&ar(r,e);return}const u=r===null?[]:r.split(e.arrayFormatSeparator).map(c=>ar(c,e));if(o[n]===void 0){o[n]=u;return}o[n]=[...o[n],...u]};default:return(n,r,o)=>{if(o[n]===void 0){o[n]=r;return}o[n]=[...[o[n]].flat(),r]}}}function $y(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function rt(e,t){return t.encode?t.strict?Mb(e):encodeURIComponent(e):e}function ar(e,t){return t.decode?Ob(e):e}function zy(e){return Array.isArray(e)?e.sort():typeof e=="object"?zy(Object.keys(e)).sort((t,n)=>Number(t)-Number(n)).map(t=>e[t]):e}function qy(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function Ub(e){let t="";const n=e.indexOf("#");return n!==-1&&(t=e.slice(n)),t}function _g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function jh(e){e=qy(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function Hh(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t},$y(t.arrayFormatSeparator);const n=Bb(t),r=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return r;for(const o of e.split("&")){if(o==="")continue;const a=t.decode?o.replace(/\+/g," "):o;let[u,c]=Wy(a,"=");u===void 0&&(u=a),c=c===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?c:ar(c,t),n(ar(u,t),c,r)}for(const[o,a]of Object.entries(r))if(typeof a=="object"&&a!==null)for(const[u,c]of Object.entries(a))a[u]=_g(c,t);else r[o]=_g(a,t);return t.sort===!1?r:(t.sort===!0?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((o,a)=>{const u=r[a];return u&&typeof u=="object"&&!Array.isArray(u)?o[a]=zy(u):o[a]=u,o},Object.create(null))}function jy(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},$y(t.arrayFormatSeparator);const n=u=>t.skipNull&&Fb(e[u])||t.skipEmptyString&&e[u]==="",r=Lb(t),o={};for(const[u,c]of Object.entries(e))n(u)||(o[u]=c);const a=Object.keys(o);return t.sort!==!1&&a.sort(t.sort),a.map(u=>{const c=e[u];return c===void 0?"":c===null?rt(u,t):Array.isArray(c)?c.length===0&&t.arrayFormat==="bracket-separator"?rt(u,t)+"[]":c.reduce(r(u),[]).join("&"):rt(u,t)+"="+rt(c,t)}).filter(u=>u.length>0).join("&")}function Hy(e,t){var o;t={decode:!0,...t};let[n,r]=Wy(e,"#");return n===void 0&&(n=e),{url:((o=n==null?void 0:n.split("?"))==null?void 0:o[0])??"",query:Hh(jh(e),t),...t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:ar(r,t)}:{}}}function Xy(e,t){t={encode:!0,strict:!0,[Mf]:!0,...t};const n=qy(e.url).split("?")[0]||"",r=jh(e.url),o={...Hh(r,{sort:!1}),...e.query};let a=jy(o,t);a&&(a=`?${a}`);let u=Ub(e.url);if(e.fragmentIdentifier){const c=new URL(n);c.hash=e.fragmentIdentifier,u=t[Mf]?c.hash:`#${e.fragmentIdentifier}`}return`${n}${a}${u}`}function Yy(e,t,n){n={parseFragmentIdentifier:!0,[Mf]:!1,...n};const{url:r,query:o,fragmentIdentifier:a}=Hy(e,n);return Xy({url:r,query:Pb(o,t),fragmentIdentifier:a},n)}function Gb(e,t,n){const r=Array.isArray(t)?o=>!t.includes(o):(o,a)=>!t(o,a);return Yy(e,r,n)}const Vb=Object.freeze(Object.defineProperty({__proto__:null,exclude:Gb,extract:jh,parse:Hh,parseUrl:Hy,pick:Yy,stringify:jy,stringifyUrl:Xy},Symbol.toStringTag,{value:"Module"}));class Wb extends Ee.PureComponent{render(){return window.location.hash.startsWith("#/join")?W.jsx(dg,{token:this.inviteToken}):W.jsx(dg,{})}UNSAFE_componentWillMount(){this._listener=window.addEventListener("hashchange",t=>{this.forceUpdate()})}componentWillUnmount(){window.removeEventListener("hashchange",this._listener)}get inviteToken(){return Vb.parse(window.location.search).token}}qw.render(W.jsx(Wb,{}),document.getElementById("root"));
